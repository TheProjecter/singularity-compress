%% LyX 1.4.3 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
%% Bold symbol macro for standard LaTeX users
\providecommand{\boldsymbol}[1]{\mbox{\boldmath $#1$}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
%% This file was generated by tiny_c2l (version 1.4.0, 25-feb-2000)

\ifx\getformat\undefined
 \newcount\getformat\getformat0
\else
 \mfilestrue\getformat3
\fi
\ifx\undefined\advance\getformat1\fi

\ifcase\getformat
 
 \usepackage{a4}
\usepackage{position}
\usepackage{fancyhdr}

 
 \textwidth18cm\textheight25cm\hoffset-3cm\voffset-1cm
\or
 \documentstyle[a4,position,fancyhdr]{article}
 \textwidth18cm\textheight25cm\hoffset-3cm\voffset-1cm
\else\fi % multiple file input: don't load format

\plcntmargin{777}
\lhead{\headfont }
\chead{\headfont Produced from /home/edwin/lz77{\mm}deflate/paq8f.cpp on 18{\mm}Jan{\mm}2007 11:12}
\rhead{\headfont }
\lfoot{\footfont }
\cfoot{\footfont Page \thepage}
\rfoot{\footfont }
\plinenowidth0pt
\gdef\cmt#1#2{\psinit{#1}{\hphantom{/}$\ast$\mblank{#2}}\commentfont}
\gdef\cmtpp#1#2{\psinit{#1}{//\mblank{#2}}\commentfont}
\gdef\ccmtend{\setbox\pstartbox=\hbox{\hphantom{/}}}
\ifmfiles\else

\usepackage{babel}
\makeatother
\begin{document}
\fi

\begin{flushleft}\init0{}\njo0{}\cmtinit\njo0{/$\ast$\commentfont~paq8f}\cmt{0}{1}\njo{9}{file}\njo{14}{compressor/archiver.
}\n \initc{0}{0}{0}{}\njo0{ }\n \initc{4}{0}{0}{}\njo0{Copyright}\njo{14}{(C)}\njo{18}{2006}\njo{23}{Matt}\njo{28}{Mahoney
}\n \initc{0}{0}{0}{}\njo0{ }\n \initc{4}{0}{0}{}\njo0{Enhanced}\njo{13}{by}\njo{16}{Torok}\njo{22}{Edwin}\njo{28}{(C)}\njo{32}{2007
}\n \initc{0}{0}{0}{}\njo0{ }\n \initc{4}{0}{0}{}\njo0{LICENSE
}\n \initc{0}{0}{0}{}\njo0{ }\n \initc{4}{0}{0}{}\njo0{This}\njo{9}{program}\njo{17}{is}\njo{20}{free}\njo{25}{software;}\njo{35}{you}\njo{39}{can}\njo{43}{redistribute}\njo{56}{it}\njo{59}{and/or
}\n \initc{4}{0}{0}{}\njo0{modify}\njo{11}{it}\njo{14}{under}\njo{20}{the}\njo{24}{terms}\njo{30}{of}\njo{33}{the}\njo{37}{GNU}\njo{41}{General}\njo{49}{Public}\njo{56}{License}\njo{64}{as
}\n \initc{4}{0}{0}{}\njo0{published}\njo{14}{by}\njo{17}{the}\njo{21}{Free}\njo{26}{Software}\njo{35}{Foundation;}\njo{47}{either}\njo{54}{version}\njo{62}{2}\njo{64}{of
}\n \initc{4}{0}{0}{}\njo0{the}\njo{8}{License,}\njo{17}{or}\njo{20}{(at}\njo{24}{your}\njo{29}{option)}\njo{37}{any}\njo{41}{later}\njo{47}{version.
}\n \initc{0}{0}{0}{}\njo0{ }\n \initc{4}{0}{0}{}\njo0{This}\njo{9}{program}\njo{17}{is}\njo{20}{distributed}\njo{32}{in}\njo{35}{the}\njo{39}{hope}\njo{44}{that}\njo{49}{it}\njo{52}{will}\njo{57}{be}\njo{60}{useful,}\njo{68}{but
}\n \initc{4}{0}{0}{}\njo0{WITHOUT}\njo{12}{ANY}\njo{16}{WARRANTY;}\njo{26}{without}\njo{34}{even}\njo{39}{the}\njo{43}{implied}\njo{51}{warranty}\njo{60}{of
}\n \initc{4}{0}{0}{}\njo0{MERCHANTABILITY}\njo{20}{or}\njo{23}{FITNESS}\njo{31}{FOR}\njo{35}{A}\njo{37}{PARTICULAR}\njo{48}{PURPOSE.}\jmpo{58}{See}\njo{62}{the}\njo{66}{GNU
}\n \initc{4}{0}{0}{}\njo0{General}\njo{12}{Public}\njo{19}{License}\njo{27}{for}\njo{31}{more}\njo{36}{details}\njo{44}{at
}\n \initc{4}{0}{0}{}\njo0{Visit}\njo{10}{$<$http://www.gnu.org/copyleft/gpl.html$>$.
}\n \initc{0}{5}{0}{}\ccmtend\basefont\njo0{/}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont define}}\njo{8}{PROGNAME}\njo{17}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{paq8f{\mm}mini\basefont
\qqr}\basefont\pes{ \bs{1}}{3}\njo0{}\jmpo{31}{}\njo0{/}\njo0{/}\njo{34}{Please}\njo{41}{change}\njo{48}{this}\njo{53}{{\keywordfont
if}}\njo{56}{you}\njo{60}{change}\njo{67}{the}\njo{71}{program.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont include}}\njo{9}{$<$stdio.h$>$
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{$<$stdlib.h$>$ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont include}}\njo{9}{$<$string.h$>$
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{$<$time.h$>$ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont include}}\njo{9}{$<$math.h$>$
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{$<$ctype.h$>$ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont define}}\njo{8}{NDEBUG}\jmpo{16}{}\njo0{/}\njo0{/}\njo{19}{remove}\njo{26}{{\keywordfont
for}}\njo{30}{debugging}\njo{40}{(turns}\njo{47}{on}\njo{50}{Array}\njo{56}{bound}\njo{62}{checks)
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{$<$assert.h$>$ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
ifdef}}\njo{7}{UNIX }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont include}}\njo{9}{$<$sys}\njo0{/types.h$>$
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{$<$sys}\njo0{/stat.h$>$ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont include}}\njo{9}{$<$dirent.h$>$
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{$<$errno.h$>$ }\n\ped \init0{}\njo0{\#endif
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont ifdef}}\njo{7}{WINDOWS
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{$<$windows.h$>$ }\n\ped \init0{}\njo0{\#endif
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont ifndef}}\njo{8}{DEFAULT{\ul}OPTION
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
define}}\njo{8}{DEFAULT{\ul}OPTION}\njo{23}{1 }\n\ped
\init0{}\njo0{\#endif }\n\ped \init0{}\njo0{ }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{8,}\njo{6}{16,}\njo{10}{32}\njo{13}{bit}\njo{17}{unsigned}\njo{26}{types}\njo{32}{(adjust}\njo{40}{as}\njo{43}{appropriate)
}\n\ped \init0{}\njo0{{\keywordfont typedef}}\njo{8}{unsigned}\njo{17}{{\keywordfont
char}}\jmpo{23}{U8;}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
typedef}}\njo{8}{unsigned}\njo{17}{{\keywordfont short}}\njo{23}{U16;}\njo0{
}\n\ped \init0{}\njo0{{\keywordfont typedef}}\njo{8}{unsigned}\njo{17}{{\keywordfont
int}}\jmpo{23}{U32;}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{min,}\njo{8}{max}\njo{12}{functions
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
ifndef}}\njo{8}{WINDOWS }\n\ped \init0{}\njo0{inline}\njo{7}{{\keywordfont
int}}\njo{11}{min({\keywordfont int}}\njo{19}{a,}\njo{22}{{\keywordfont
int}}\njo{26}{b)}\njo{29}{}\njo0{\brl{}{\keywordfont
return}}\njo{37}{a$<$b?a:b;}\njo0{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{inline}\njo{7}{{\keywordfont int}}\njo{11}{max({\keywordfont
int}}\njo{19}{a,}\njo{22}{{\keywordfont int}}\njo{26}{b)}\njo{29}{}\njo0{\brl{}{\keywordfont
return}}\njo{37}{a$<$b?b:a;}\njo0{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\#endif }\n\ped \init0{}\njo0{ }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Error}\njo{9}{handler:}\njo{18}{print}\njo{24}{message}\njo{32}{{\keywordfont
if}}\njo{35}{any,}\njo{40}{and}\njo{44}{exit }\n\ped
\init0{}\njo0{{\keywordfont void}}\njo{5}{quit({\keywordfont
const}}\njo{16}{{\keywordfont char}}\njo0{$\ast$}\njo{22}{message}\njo0{=0)}\njo{33}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{throw}\njo{8}{message;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{strings}\njo{11}{are}\njo{15}{equal}\njo{21}{ignoring}\njo{30}{case?
}\n\ped \init0{}\njo0{{\keywordfont int}}\njo{4}{equals({\keywordfont
const}}\njo{17}{{\keywordfont char}}\njo0{$\ast$}\njo{23}{a,}\njo{26}{{\keywordfont
const}}\njo{32}{{\keywordfont char}}\njo0{$\ast$}\njo{38}{b)}\njo{41}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{assert(a}\njo{11}{}\njo0{\&\&}\njo{14}{b);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont while}}\njo{8}{(}\njo0{$\ast$a}\njo{12}{}\njo0{\&\&}\njo{15}{}\njo0{$\ast$b)}\njo{19}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{c1}\njo0{=}\njo0{$\ast$a;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(c1}\njo0{$>$={\sq}A{\sq}}\njo0{\&\&c1}\njo0{$<$={\sq}Z{\sq})}\njo{26}{c1}\njo0{+={\sq}a{\sq}}\njo0{{\mm}{\sq}A{\sq};}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{c2}\njo0{=}\njo0{$\ast$b;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(c2}\njo0{$>$={\sq}A{\sq}}\njo0{\&\&c2}\njo0{$<$={\sq}Z{\sq})}\njo{26}{c2}\njo0{+={\sq}a{\sq}}\njo0{{\mm}{\sq}A{\sq};}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(c1}\njo0{!=c2)}\njo{16}{{\keywordfont
return}}\njo{23}{0;}\njo0{ }\n\ped \init{4}{}\njo{-4}{++a;}\njo0{
}\n\ped \init{4}{}\njo{-4}{++b;}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{}\njo0{$\ast$a}\njo0{==}\njo0{$\ast$b;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{25}{Program}\njo{33}{Checker}\njo{41}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Track}\njo{9}{time}\njo{14}{and}\njo{18}{memory}\njo{25}{used
}\n\ped \init0{}\njo0{class}\njo{6}{ProgramChecker}\njo{21}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{memused;}\jmpo{16}{}\njo0{/}\njo0{/}\njo{19}{bytes}\njo{25}{allocated}\njo{35}{by}\njo{38}{Array$<$T$>$}\njo{47}{now
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{maxmem;}\jmpo{16}{}\njo0{/}\njo0{/}\njo{19}{most}\njo{24}{bytes}\njo{30}{allocated}\njo{40}{ever
}\n\ped \init{2}{}\njo{-2}{clock{\ul}t}\njo{10}{start{\ul}time;}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{in}\njo{29}{ticks
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{{\keywordfont
void}}\njo{7}{alloc({\keywordfont int}}\njo{17}{n)}\njo{20}{}\njo0{\brl{}}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{report}\njo{33}{memory}\njo{40}{allocated,}\njo{51}{may}\njo{55}{be}\njo{58}{negative
}\n\ped \init{4}{}\njo{-4}{memused}\njo0{+=n;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(memused$>$maxmem)}\njo{24}{maxmem}\njo0{=memused;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{ProgramChecker():}\njo{20}{memused(0),}\njo{32}{maxmem(0)}\njo{42}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{start{\ul}time}\njo0{=clock();}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert({\keywordfont sizeof}(U8)}\njo0{==1);}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert({\keywordfont sizeof}(U16)}\njo0{==2);}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert({\keywordfont sizeof}(U32)}\njo0{==4);}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert({\keywordfont sizeof}({\keywordfont
short})}\njo0{==2);}\njo0{ }\n\ped \init{4}{}\njo{-4}{assert({\keywordfont
sizeof}({\keywordfont int})}\njo0{==4);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
void}}\njo{7}{print()}\njo{15}{{\keywordfont const}}\njo{21}{}\njo0{\brl{}}\jmpo{24}{}\njo0{/}\njo0{/}\njo{27}{print}\njo{33}{time}\njo{38}{and}\njo{42}{memory}\njo{49}{used}\n\ped
\init{4}{}\njo{-4}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Time~}\njo0{\%1.2f~}\njo0{sec,~}\njo0{used~}\njo0{\%d~}\njo0{bytes~}\njo0{of~}\njo0{memory\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo0{ }\n\ped
\init{6}{}\njo{-6}{double(clock()}\njo0{{\mm}start{\ul}time)}\njo0{/CLOCKS{\ul}PER{\ul}SEC,}\njo{49}{maxmem);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo{2}{programChecker;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{Array}\njo{35}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Array$<$T,}\njo{12}{ALIGN$>$}\njo{19}{a(n);}\njo{25}{creates}\njo{33}{n}\njo{35}{elements}\njo{44}{of}\njo{47}{T}\njo{49}{initialized}\njo{61}{to}\njo{64}{0}\njo{66}{bits.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Constructors}\njo{16}{{\keywordfont
for}}\njo{20}{T}\njo{22}{are}\njo{26}{not}\njo{30}{called.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Indexing}\njo{12}{is}\njo{15}{bounds}\njo{22}{checked}\njo{30}{{\keywordfont
if}}\njo{33}{assertions}\njo{44}{are}\njo{48}{on.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{a.size()}\njo{12}{returns}\njo{20}{n.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{a.resize(n)}\njo{15}{changes}\njo{23}{size}\njo{28}{to}\njo{31}{n,}\njo{34}{padding}\njo{42}{with}\njo{47}{0}\njo{49}{bits}\njo{54}{or}\njo{57}{truncating.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{a.push{\ul}back(x)}\njo{18}{appends}\njo{26}{x}\njo{28}{and}\njo{32}{increases}\njo{42}{size}\njo{47}{by}\njo{50}{1,}\njo{53}{reserving}\njo{63}{up}\njo{66}{to}\njo{69}{size}\njo0{$\ast$2.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{a.pop{\ul}back()}\njo{16}{decreases}\njo{26}{size}\njo{31}{by}\njo{34}{1,}\njo{37}{does}\njo{42}{not}\njo{46}{free}\njo{51}{memory.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Copy}\njo{8}{and}\njo{12}{assignment}\njo{23}{are}\njo{27}{not}\njo{31}{supported.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Memory}\njo{10}{is}\njo{13}{aligned}\njo{21}{on}\njo{24}{a}\njo{26}{ALIGN}\njo{32}{byte}\njo{37}{boundary}\njo{46}{(power}\njo{53}{of}\njo{56}{2),}\njo{60}{{\keywordfont
default}}\njo{68}{is}\njo{71}{none. }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{template}\njo{9}{$<$class}\njo{16}{T,}\njo{19}{{\keywordfont
int}}\njo{23}{ALIGN}\njo0{=0$>$}\njo{32}{class}\njo{38}{Array}\njo{44}{}\njo0{\brl{}
}\n\ped \init0{}\njo0{private: }\n\ped \init{2}{}\njo{-2}{{\keywordfont
int}}\njo{6}{n;}\jmpo{13}{}\njo0{/}\njo0{/}\njo{16}{user}\njo{21}{size
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{reserved;}\jmpo{17}{}\njo0{/}\njo0{/}\njo{20}{actual}\njo{27}{size
}\n\ped \init{2}{}\njo{-2}{{\keywordfont char}}\njo{7}{}\njo0{$\ast$ptr;}\njo{13}{}\njo0{/}\njo0{/}\njo{16}{allocated}\njo{26}{memory,}\njo{34}{zeroed
}\n\ped \init{2}{}\njo{-2}{T}\njo0{$\ast$}\njo{5}{data;}\jmpo{13}{}\njo0{/}\njo0{/}\njo{16}{start}\njo{22}{of}\njo{25}{n}\njo{27}{elements}\njo{36}{of}\njo{39}{aligned}\njo{47}{data
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{create({\keywordfont
int}}\njo{18}{i);}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{create}\njo{33}{with}\njo{38}{size}\njo{43}{i
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{explicit}\njo{11}{Array({\keywordfont
int}}\njo{21}{i}\njo0{=0)}\njo{26}{}\njo0{\brl{}create(i);}\njo0{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{$\sim$Array();}\njo0{ }\n\ped
\init{2}{}\njo{-2}{T\&}\njo{5}{operator{[}]({\keywordfont
int}}\njo{20}{i)}\njo{23}{}\njo0{\brl{} }\n\ped
\init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
ifndef}}\njo{8}{NDEBUG }\n\ped \init{4}{}\njo{-4}{{\keywordfont
if}}\njo{7}{(i$<$0}\njo{12}{}\njo0{$\mid$$\mid$}\njo{15}{i}\njo0{$>$=n)}\njo{21}{fprintf(stderr,}\njo{37}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%d~}\njo0{out~}\njo0{of~}\njo0{bounds~}\njo0{\%d\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{62}{i,}\njo{65}{n),}\njo{69}{quit();}\njo0{
}\n\ped \init0{}\njo0{\#endif }\n\ped \init{4}{}\njo{-4}{{\keywordfont
return}}\njo{11}{data{[}i];}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont const}}\njo{8}{T\&}\njo{11}{operator{[}]({\keywordfont
int}}\njo{26}{i)}\njo{29}{{\keywordfont const}}\njo{35}{}\njo0{\brl{}
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
ifndef}}\njo{8}{NDEBUG }\n\ped \init{4}{}\njo{-4}{{\keywordfont
if}}\njo{7}{(i$<$0}\njo{12}{}\njo0{$\mid$$\mid$}\njo{15}{i}\njo0{$>$=n)}\njo{21}{fprintf(stderr,}\njo{37}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%d~}\njo0{out~}\njo0{of~}\njo0{bounds~}\njo0{\%d\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{62}{i,}\njo{65}{n),}\njo{69}{quit();}\njo0{
}\n\ped \init0{}\njo0{\#endif }\n\ped \init{4}{}\njo{-4}{{\keywordfont
return}}\njo{11}{data{[}i];}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{size()}\njo{13}{{\keywordfont
const}}\njo{19}{}\njo0{\brl{}{\keywordfont return}}\njo{27}{n;}\njo0{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{resize({\keywordfont
int}}\njo{18}{i);}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{change}\njo{33}{size}\njo{38}{to}\njo{41}{i
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{pop{\ul}back()}\njo{18}{}\njo0{\brl{}{\keywordfont
if}}\njo{22}{(n$>$0)}\njo{28}{{\mm\mm}n;}\njo0{\brr{}}\jmpo{35}{}\njo0{/}\njo0{/}\njo{38}{decrement}\njo{48}{size
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{push{\ul}back({\keywordfont
const}}\njo{23}{T\&}\njo{26}{x);}\jmpo{31}{}\njo0{/}\njo0{/}\njo{34}{increment}\njo{44}{size,}\njo{50}{append}\njo{57}{x
}\n\ped \init0{}\njo0{private: }\n\ped \init{2}{}\njo{-2}{Array({\keywordfont
const}}\njo{14}{Array\&);}\jmpo{24}{}\njo0{/}\njo0{/}\njo{27}{no}\njo{30}{copy}\njo{35}{or}\njo{38}{assignment
}\n\ped \init{2}{}\njo{-2}{Array\&}\njo{9}{operator}\njo0{=({\keywordfont
const}}\njo{25}{Array\&);}\njo0{ }\n\ped \init0{}\njo0{\brr{}}\njo0{;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{template$<$class}\njo{15}{T,}\njo{18}{{\keywordfont
int}}\njo{22}{ALIGN$>$}\njo{29}{{\keywordfont void}}\njo{34}{Array$<$T,}\njo{43}{ALIGN$>$::resize({\keywordfont
int}}\njo{62}{i)}\njo{65}{}\njo0{\brl{}}\n\ped \init{2}{}\njo{-2}{{\keywordfont
if}}\njo{5}{(i}\njo0{$<$=reserved)}\njo{19}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{n}\njo0{=i;}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont return};}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
char}}\njo{7}{}\njo0{$\ast$saveptr}\njo0{=ptr;}\njo0{
}\n\ped \init{2}{}\njo{-2}{T}\njo{4}{}\njo0{$\ast$savedata}\njo0{=data;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{saven}\njo0{=n;}\njo0{
}\n\ped \init{2}{}\njo{-2}{create(i);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(savedata}\njo{15}{}\njo0{\&\&}\njo{18}{saveptr)}\njo{27}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{memcpy(data,}\njo{17}{savedata,}\njo{27}{{\keywordfont
sizeof}(T)}\njo0{$\ast$min(i,}\njo{44}{saven));}\njo0{
}\n\ped \init{4}{}\njo{-4}{programChecker.alloc(}\njo0{{\mm}ALIGN}\njo0{{\mm}n}\njo0{$\ast${\keywordfont
sizeof}(T));}\njo0{ }\n\ped \init{4}{}\njo{-4}{free(saveptr);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{template$<$class}\njo{15}{T,}\njo{18}{{\keywordfont
int}}\njo{22}{ALIGN$>$}\njo{29}{{\keywordfont void}}\njo{34}{Array$<$T,}\njo{43}{ALIGN$>$::create({\keywordfont
int}}\njo{62}{i)}\njo{65}{}\njo0{\brl{}}\n\ped \init{2}{}\njo{-2}{n}\njo0{=reserved}\njo0{=i;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(i}\njo0{$<$=0)}\njo{12}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{data}\njo0{=0;}\njo0{
}\n\ped \init{4}{}\njo{-4}{ptr}\njo0{=0;}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont return};}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
const}}\njo{8}{{\keywordfont int}}\njo{12}{sz}\njo0{=ALIGN}\njo0{+n}\njo0{$\ast${\keywordfont
sizeof}(T);}\njo0{ }\n\ped \init{2}{}\njo{-2}{programChecker.alloc(sz);}\njo0{
}\n\ped \init{2}{}\njo{-2}{ptr}\njo{6}{}\njo0{=}\njo{8}{({\keywordfont
char}}\njo0{$\ast$)calloc(sz,}\njo{26}{1);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(!ptr)}\njo{12}{quit(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Out~}\njo0{of~}\njo0{memory\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{data}\njo{7}{}\njo0{=}\njo{9}{(ALIGN}\njo{16}{?}\njo{18}{(T}\njo0{$\ast$)(ptr}\njo0{+ALIGN}\njo0{{\mm}((({\keywordfont
long})ptr)\&(ALIGN}\njo0{{\mm}1)))}\njo{58}{:}\njo{60}{(T}\njo0{$\ast$)ptr);}\njo0{
}\n\ped \init{2}{}\njo{-2}{assert(({\keywordfont char}}\njo0{$\ast$)data}\njo0{$>$=ptr}\njo{26}{}\njo0{\&\&}\njo{29}{({\keywordfont
char}}\njo0{$\ast$)data}\njo0{$<$=ptr}\njo0{+ALIGN);}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{template$<$class}\njo{15}{T,}\njo{18}{{\keywordfont
int}}\njo{22}{ALIGN$>$}\njo{29}{Array$<$T,}\njo{38}{ALIGN$>$::$\sim$Array()}\njo{55}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{programChecker.alloc(}\njo0{{\mm}ALIGN}\njo0{{\mm}n}\njo0{$\ast${\keywordfont
sizeof}(T));}\njo0{ }\n\ped \init{2}{}\njo{-2}{free(ptr);}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{template$<$class}\njo{15}{T,}\njo{18}{{\keywordfont
int}}\njo{22}{ALIGN$>$}\njo{29}{{\keywordfont void}}\njo{34}{Array$<$T,}\njo{43}{ALIGN$>$::push{\ul}back({\keywordfont
const}}\njo{67}{T\&}\njo{70}{x)}\njo{73}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(n}\njo0{==reserved)}\njo{19}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{saven}\njo0{=n;}\njo0{
}\n\ped \init{4}{}\njo{-4}{resize(max(1,}\njo{18}{n}\njo0{$\ast$2));}\njo0{
}\n\ped \init{4}{}\njo{-4}{n}\njo0{=saven;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{data{[}n++]}\njo0{=x;}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{28}{String}\njo{35}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{A}\njo{5}{tiny}\njo{10}{subset}\njo{17}{of}\njo{20}{std::string
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{size()}\njo{10}{includes}\njo{19}{NUL}\njo{23}{terminator.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{class}\njo{6}{String:}\njo{14}{public}\njo{21}{Array$<$char$>$}\njo{33}{}\njo0{\brl{}
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{{\keywordfont
const}}\njo{8}{{\keywordfont char}}\njo0{$\ast$}\njo{14}{c{\ul}str()}\njo{22}{{\keywordfont
const}}\njo{28}{}\njo0{\brl{}{\keywordfont return}}\njo{36}{\&(}\njo0{$\ast$this){[}0];}\njo0{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{operator}\njo0{=({\keywordfont
const}}\njo{23}{{\keywordfont char}}\njo0{$\ast$}\njo{29}{s)}\njo{32}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{resize(strlen(s)}\njo0{+1);}\njo0{
}\n\ped \init{4}{}\njo{-4}{strcpy(\&(}\njo0{$\ast$this){[}0],}\njo{24}{s);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{operator}\njo0{+=({\keywordfont
const}}\njo{24}{{\keywordfont char}}\njo0{$\ast$}\njo{30}{s)}\njo{33}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{assert(s);}\njo0{ }\n\ped
\init{4}{}\njo{-4}{pop{\ul}back();}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont while}}\njo{10}{(}\njo0{$\ast$s)}\njo{15}{push{\ul}back(}\njo0{$\ast$s++);}\njo0{
}\n\ped \init{4}{}\njo{-4}{push{\ul}back(0);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{String({\keywordfont const}}\njo{15}{{\keywordfont
char}}\njo0{$\ast$}\njo{21}{s}\njo0{=\texttt{\char`\"{}\char`\"{}}):}\njo{28}{Array$<$char$>$(1)}\njo{43}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{(}\njo0{$\ast$this)}\njo0{+=s;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{rnd}\njo{33}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{32}\njo0{{\mm}bit}\njo{10}{pseudo}\njo{17}{random}\njo{24}{number}\njo{31}{generator
}\n\ped \init0{}\njo0{class}\njo{6}{Random}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{Array$<$U32$>$}\njo{13}{table;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{i;}\njo0{
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{Random():}\njo{12}{table(64)}\njo{22}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{table{[}0]}\njo0{=123456789;}\njo0{
}\n\ped \init{4}{}\njo{-4}{table{[}1]}\njo0{=987654321;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}({\keywordfont
int}}\njo{12}{j}\njo0{=0;}\njo{17}{j$<$62;}\njo{23}{j++)}\njo{28}{table{[}j}\njo0{+2]}\njo0{=table{[}j}\njo0{+1]}\njo0{$\ast$11}\njo0{+table{[}j]}\njo0{$\ast$23}\njo0{/16;}\njo0{
}\n\ped \init{4}{}\njo{-4}{i}\njo0{=0;}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{U32}\njo{6}{operator()()}\njo{19}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{++i,}\njo{16}{table{[}i\&63]}\njo0{=table{[}i}\njo0{{\mm}24\&63]$\hat{~}$table{[}i}\njo0{{\mm}55\&63];}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo{2}{rnd;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{31}{Buf}\njo{35}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Buf(n)}\njo{10}{buf;}\njo{15}{creates}\njo{23}{an}\njo{26}{array}\njo{32}{of}\njo{35}{n}\njo{37}{bytes}\njo{43}{(must}\njo{49}{be}\njo{52}{a}\njo{54}{power}\njo{60}{of}\njo{63}{2).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{buf{[}i]}\njo{10}{returns}\njo{18}{a}\njo{20}{reference}\njo{30}{to}\njo{33}{the}\njo{37}{i\sq{}th}\njo{42}{byte}\njo{47}{with}\njo{52}{wrap}\njo{57}{(no}\njo{61}{out}\njo{65}{of}\njo{68}{bounds).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{buf(i)}\njo{10}{returns}\njo{18}{i\sq{}th}\njo{23}{byte}\njo{28}{back}\njo{33}{from}\njo{38}{pos}\njo{42}{(i}\njo{45}{$>$}\njo{47}{0)}\njo{50}{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{buf.size()}\njo{14}{returns}\njo{22}{n.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
int}}\njo{4}{pos;}\jmpo{10}{}\njo0{/}\njo0{/}\njo{13}{Number}\njo{20}{of}\njo{23}{input}\njo{29}{bytes}\njo{35}{in}\njo{38}{buf}\njo{42}{(not}\njo{47}{wrapped)
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{class}\njo{6}{Buf}\njo{10}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{Array$<$U8$>$}\njo{12}{b;}\njo0{
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{Buf({\keywordfont
int}}\njo{10}{i}\njo0{=0):}\njo{16}{b(i)}\njo{21}{}\njo0{\brl{}\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{setsize({\keywordfont
int}}\njo{19}{i)}\njo{22}{}\njo0{\brl{} }\n\ped
\init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(!i)}\njo{12}{{\keywordfont
return};}\njo0{ }\n\ped \init{4}{}\njo{-4}{assert(i$>$0}\njo{15}{}\njo0{\&\&}\njo{18}{(i\&(i}\njo0{{\mm}1))}\njo0{==0);}\njo0{
}\n\ped \init{4}{}\njo{-4}{b.resize(i);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{U8\&}\njo{6}{operator{[}]({\keywordfont
int}}\njo{21}{i)}\njo{24}{}\njo0{\brl{} }\n\ped
\init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{b{[}i\&b.size()}\njo0{{\mm}1];}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{operator()({\keywordfont
int}}\njo{21}{i)}\njo{24}{{\keywordfont const}}\njo{30}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{assert(i$>$0);}\njo0{ }\n\ped \init{4}{}\njo{-4}{{\keywordfont
return}}\njo{11}{b{[}pos}\njo0{{\mm}i\&b.size()}\njo0{{\mm}1];}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{size()}\njo{13}{{\keywordfont
const}}\njo{19}{}\njo0{\brl{} }\n\ped \init{4}{}\njo{-4}{{\keywordfont
return}}\njo{11}{b.size();}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{24}{Global}\njo{31}{context}\njo{39}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
const}}\njo{6}{{\keywordfont int}}\njo{10}{level}\njo0{=1;}\jmpo{20}{}\njo0{/}\njo0{/}\njo{23}{Compression}\njo{35}{level}\njo{41}{0}\njo{43}{to}\njo{46}{9
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
define}}\njo{8}{MEM}\njo{12}{(0x10000\mlt{2}level) }\n\ped
\init0{}\njo0{{\keywordfont int}}\njo{4}{y}\njo0{=0;}\jmpo{10}{}\njo0{/}\njo0{/}\njo{13}{Last}\njo{18}{bit,}\njo{23}{0}\njo{25}{or}\njo{28}{1,}\njo{31}{set}\njo{35}{by}\njo{38}{encoder
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Global}\njo{10}{context}\njo{18}{set}\njo{22}{by}\njo{25}{Predictor}\njo{35}{and}\njo{39}{available}\njo{49}{to}\njo{52}{all}\njo{56}{models.
}\n\ped \init0{}\njo0{{\keywordfont int}}\njo{4}{c0}\njo0{=1;}\njo{10}{}\njo0{/}\njo0{/}\njo{13}{Last}\njo{18}{0}\njo0{{\mm}7}\njo{22}{bits}\njo{27}{of}\njo{30}{the}\njo{34}{partial}\njo{42}{byte}\njo{47}{with}\njo{52}{a}\njo{54}{leading}\njo{62}{1}\njo{64}{bit}\njo{68}{(1}\njo0{{\mm}255)
}\n\ped \init0{}\njo0{U32}\njo{4}{c4}\njo0{=0;}\njo{10}{}\njo0{/}\njo0{/}\njo{13}{Last}\njo{18}{4}\njo{20}{whole}\njo{26}{bytes,}\njo{33}{packed.}\jmpo{42}{Last}\njo{47}{byte}\njo{52}{is}\njo{55}{bits}\njo{60}{0}\njo0{{\mm}7.
}\n\ped \init0{}\njo0{{\keywordfont int}}\njo{4}{bpos}\njo0{=0;}\njo{12}{}\njo0{/}\njo0{/}\njo{15}{bits}\njo{20}{in}\njo{23}{c0}\njo{26}{(0}\njo{29}{to}\njo{32}{7)
}\n\ped \init0{}\njo0{Buf}\njo{4}{buf;}\jmpo{10}{}\njo0{/}\njo0{/}\njo{13}{Rotating}\njo{22}{input}\njo{28}{queue}\njo{34}{set}\njo{38}{by}\njo{41}{Predictor
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{30}{ilog}\njo{35}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{ilog(x)}\njo{11}{}\njo0{=}\njo{13}{round(log2(x)}\njo{27}{}\njo0{$\ast$}\njo{29}{16),}\njo{34}{0}\njo{36}{}\njo0{$<$=}\njo{39}{x}\njo{41}{$<$}\njo{43}{64K
}\n\ped \init0{}\njo0{class}\njo{6}{Ilog}\njo{11}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{Array$<$U8$>$}\njo{12}{t;}\njo0{
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{{\keywordfont
int}}\njo{6}{operator()(U16}\njo{21}{x)}\njo{24}{{\keywordfont
const}}\njo{30}{}\njo0{\brl{}{\keywordfont return}}\njo{38}{t{[}x];}\njo0{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{Ilog();}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo{2}{ilog;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Compute}\njo{11}{lookup}\njo{18}{table}\njo{24}{by}\njo{27}{numerical}\njo{37}{integration}\njo{49}{of}\njo{52}{1}\njo0{/x
}\n\ped \init0{}\njo0{Ilog::Ilog():}\njo{14}{t(65536)}\njo{23}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{U32}\njo{6}{x}\njo0{=14155776;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=2;}\njo{16}{i$<$65536;}\njo{25}{++i)}\njo{30}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{x}\njo0{+=774541002}\njo0{/(i}\njo0{$\ast$2}\njo0{{\mm}1);}\jmpo{27}{}\njo0{/}\njo0{/}\njo{30}{numerator}\njo{40}{is}\njo{43}{2$\hat{~}$29}\njo0{/ln}\njo{51}{2
}\n\ped \init{4}{}\njo{-4}{t{[}i]}\njo0{=x\mgt{2}24;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{llog(x)}\njo{11}{accepts}\njo{19}{32}\njo{22}{bits
}\n\ped \init0{}\njo0{inline}\njo{7}{{\keywordfont int}}\njo{11}{llog(U32}\njo{20}{x)}\njo{23}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(x}\njo0{$>$=0x1000000)
}\n\ped \init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{256}\njo0{+ilog(x\mgt{2}16);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont else}}\njo{7}{{\keywordfont
if}}\njo{10}{(x}\njo0{$>$=0x10000) }\n\ped \init{4}{}\njo{-4}{{\keywordfont
return}}\njo{11}{128}\njo0{+ilog(x\mgt{2}8);}\njo0{
}\n\ped \init{2}{}\njo{-2}{else }\n\ped \init{4}{}\njo{-4}{{\keywordfont
return}}\njo{11}{ilog(x);}\njo0{ }\n\ped \init0{}\njo0{\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{26}{state}\njo{32}{table}\njo{38}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{State}\njo{9}{table:
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{nex(state,}\njo{16}{0)}\njo{19}{}\njo0{=}\njo{21}{next}\njo{26}{state}\njo{32}{{\keywordfont
if}}\njo{35}{bit}\njo{39}{y}\njo{41}{is}\njo{44}{0,}\njo{47}{0}\njo{49}{}\njo0{$<$=}\njo{52}{state}\njo{58}{$<$}\njo{60}{256
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{nex(state,}\njo{16}{1)}\njo{19}{}\njo0{=}\njo{21}{next}\njo{26}{state}\njo{32}{{\keywordfont
if}}\njo{35}{bit}\njo{39}{y}\njo{41}{is}\njo{44}{1
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{nex(state,}\njo{16}{2)}\njo{19}{}\njo0{=}\njo{21}{number}\njo{28}{of}\njo{31}{zeros}\njo{37}{in}\njo{40}{bit}\njo{44}{history}\njo{52}{represented}\njo{64}{by}\njo{67}{state
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{nex(state,}\njo{16}{3)}\njo{19}{}\njo0{=}\njo{21}{number}\njo{28}{of}\njo{31}{ones}\njo{36}{represented
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{States}\njo{10}{represent}\njo{20}{a}\njo{22}{bit}\njo{26}{history}\njo{34}{within}\njo{41}{some}\njo{46}{context.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{State}\njo{9}{0}\njo{11}{is}\njo{14}{the}\njo{18}{starting}\njo{27}{state}\njo{33}{(no}\njo{37}{bits}\njo{42}{seen).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{States}\njo{10}{1}\njo0{{\mm}30}\njo{15}{represent}\njo{25}{all}\njo{29}{possible}\njo{38}{sequences}\njo{48}{of}\njo{51}{1}\njo0{{\mm}4}\njo{55}{bits.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{States}\njo{10}{31}\njo0{{\mm}252}\njo{17}{represent}\njo{27}{a}\njo{29}{pair}\njo{34}{of}\njo{37}{counts,}\njo{45}{(n0,}\njo0{n1),}\njo{54}{the}\njo{58}{number}\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{of}\njo{8}{0}\njo{10}{and}\njo{14}{1}\njo{16}{bits}\njo{21}{respectively.}\jmpo{36}{If}\njo{39}{n0}\njo0{+n1}\njo{45}{$<$}\njo{47}{16}\njo{50}{then}\njo{55}{there}\njo{61}{are
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{two}\njo{9}{states}\njo{16}{{\keywordfont
for}}\njo{20}{each}\njo{25}{pair,}\njo{31}{depending}\njo{41}{on}\njo{44}{{\keywordfont
if}}\njo{47}{a}\njo{49}{0}\njo{51}{or}\njo{54}{1}\njo{56}{was}\njo{60}{the}\njo{64}{last
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{bit}\njo{9}{seen.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{If}\njo{6}{n0}\njo{9}{and}\njo{13}{n1}\njo{16}{are}\njo{20}{too}\njo{24}{large,}\njo{31}{then}\njo{36}{there}\njo{42}{is}\njo{45}{no}\njo{48}{state}\njo{54}{to}\njo{57}{represent}\njo{67}{this
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{pair,}\njo{9}{so}\njo{12}{another}\njo{20}{state}\njo{26}{with}\njo{31}{about}\njo{37}{the}\njo{41}{same}\njo{46}{ratio}\njo{52}{of}\njo{55}{n0}\njo0{/n1}\njo{61}{is}\njo{64}{substituted.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Also,}\njo{9}{when}\njo{14}{a}\njo{16}{bit}\njo{20}{is}\njo{23}{observed}\njo{32}{and}\njo{36}{the}\njo{40}{count}\njo{46}{of}\njo{49}{the}\njo{53}{opposite}\njo{62}{bit}\njo{66}{is}\njo{69}{large,}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{then}\njo{8}{part}\njo{13}{of}\njo{16}{this}\njo{21}{count}\njo{27}{is}\njo{30}{discarded}\njo{40}{to}\njo{43}{favor}\njo{49}{newer}\njo{55}{data}\njo{60}{over}\njo{65}{old.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont if}}\njo{4}{1}\njo{6}{}\njo0{/}\njo0{/}\njo{9}{change}\njo{16}{to}\njo{19}{{\keywordfont
\#}}\pes{ \bs{1}}{22}\njo0{{\keywordfont if}}\njo{23}{0}\njo{25}{to}\njo{28}{generate}\njo{37}{this}\njo{42}{table}\njo{48}{at}\njo{51}{run}\njo{55}{time}\njo{60}{(4}\njo0{\%}\njo{64}{slower)
}\n\ped \init0{}\njo0{{\keywordfont static}}\njo{7}{{\keywordfont
const}}\njo{13}{U8}\njo{16}{State{\ul}table{[}256]{[}4]}\njo0{=}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\jmpo{5}{1,}\jmpo{9}{2,}\njo{12}{0,}\njo{15}{0\brr{}}\njo0{,}\njo0{\brl{}}\jmpo{21}{3,}\jmpo{25}{5,}\njo{28}{1,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}}\jmpo{37}{4,}\jmpo{41}{6,}\njo{44}{0,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}}\jmpo{53}{7,}\njo{56}{10,}\njo{60}{2,}\njo{63}{0\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{0}\njo0{{\mm}3
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\jmpo{5}{8,}\njo{8}{12,}\njo{12}{1,}\njo{15}{1\brr{}}\njo0{,}\njo0{\brl{}}\jmpo{21}{9,}\njo{24}{13,}\njo{28}{1,}\njo{31}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{11,}\njo{40}{14,}\njo{44}{0,}\njo{47}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{15,}\njo{56}{19,}\njo{60}{3,}\njo{63}{0\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{4}\njo0{{\mm}7
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{16,}\njo{8}{23,}\njo{12}{2,}\njo{15}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{17,}\njo{24}{24,}\njo{28}{2,}\njo{31}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{18,}\njo{40}{25,}\njo{44}{2,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{20,}\njo{56}{27,}\njo{60}{1,}\njo{63}{2\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{8}\njo0{{\mm}11
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{21,}\njo{8}{28,}\njo{12}{1,}\njo{15}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{22,}\njo{24}{29,}\njo{28}{1,}\njo{31}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{26,}\njo{40}{30,}\njo{44}{0,}\njo{47}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{31,}\njo{56}{33,}\njo{60}{4,}\njo{63}{0\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{12}\njo0{{\mm}15
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{32,}\njo{8}{35,}\njo{12}{3,}\njo{15}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{32,}\njo{24}{35,}\njo{28}{3,}\njo{31}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{32,}\njo{40}{35,}\njo{44}{3,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{32,}\njo{56}{35,}\njo{60}{3,}\njo{63}{1\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{16}\njo0{{\mm}19
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{34,}\njo{8}{37,}\njo{12}{2,}\njo{15}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{34,}\njo{24}{37,}\njo{28}{2,}\njo{31}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{34,}\njo{40}{37,}\njo{44}{2,}\njo{47}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{34,}\njo{56}{37,}\njo{60}{2,}\njo{63}{2\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{20}\njo0{{\mm}23
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{34,}\njo{8}{37,}\njo{12}{2,}\njo{15}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{34,}\njo{24}{37,}\njo{28}{2,}\njo{31}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{36,}\njo{40}{39,}\njo{44}{1,}\njo{47}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{36,}\njo{56}{39,}\njo{60}{1,}\njo{63}{3\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{24}\njo0{{\mm}27
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{36,}\njo{8}{39,}\njo{12}{1,}\njo{15}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{36,}\njo{24}{39,}\njo{28}{1,}\njo{31}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{38,}\njo{40}{40,}\njo{44}{0,}\njo{47}{4\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{41,}\njo{56}{43,}\njo{60}{5,}\njo{63}{0\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{28}\njo0{{\mm}31
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{42,}\njo{8}{45,}\njo{12}{4,}\njo{15}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{42,}\njo{24}{45,}\njo{28}{4,}\njo{31}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{44,}\njo{40}{47,}\njo{44}{3,}\njo{47}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{44,}\njo{56}{47,}\njo{60}{3,}\njo{63}{2\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{32}\njo0{{\mm}35
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{46,}\njo{8}{49,}\njo{12}{2,}\njo{15}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{46,}\njo{24}{49,}\njo{28}{2,}\njo{31}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{48,}\njo{40}{51,}\njo{44}{1,}\njo{47}{4\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{48,}\njo{56}{51,}\njo{60}{1,}\njo{63}{4\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{36}\njo0{{\mm}39
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{50,}\njo{8}{52,}\njo{12}{0,}\njo{15}{5\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{53,}\njo{24}{43,}\njo{28}{6,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{54,}\njo{40}{57,}\njo{44}{5,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{54,}\njo{56}{57,}\njo{60}{5,}\njo{63}{1\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{40}\njo0{{\mm}43
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{56,}\njo{8}{59,}\njo{12}{4,}\njo{15}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{56,}\njo{24}{59,}\njo{28}{4,}\njo{31}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{58,}\njo{40}{61,}\njo{44}{3,}\njo{47}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{58,}\njo{56}{61,}\njo{60}{3,}\njo{63}{3\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{44}\njo0{{\mm}47
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{60,}\njo{8}{63,}\njo{12}{2,}\njo{15}{4\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{60,}\njo{24}{63,}\njo{28}{2,}\njo{31}{4\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{62,}\njo{40}{65,}\njo{44}{1,}\njo{47}{5\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{62,}\njo{56}{65,}\njo{60}{1,}\njo{63}{5\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{48}\njo0{{\mm}51
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{50,}\njo{8}{66,}\njo{12}{0,}\njo{15}{6\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{67,}\njo{24}{55,}\njo{28}{7,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{68,}\njo{40}{57,}\njo{44}{6,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{68,}\njo{56}{57,}\njo{60}{6,}\njo{63}{1\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{52}\njo0{{\mm}55
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{70,}\njo{8}{73,}\njo{12}{5,}\njo{15}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{70,}\njo{24}{73,}\njo{28}{5,}\njo{31}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{72,}\njo{40}{75,}\njo{44}{4,}\njo{47}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{72,}\njo{56}{75,}\njo{60}{4,}\njo{63}{3\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{56}\njo0{{\mm}59
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{74,}\njo{8}{77,}\njo{12}{3,}\njo{15}{4\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{74,}\njo{24}{77,}\njo{28}{3,}\njo{31}{4\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{76,}\njo{40}{79,}\njo{44}{2,}\njo{47}{5\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{76,}\njo{56}{79,}\njo{60}{2,}\njo{63}{5\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{60}\njo0{{\mm}63
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{62,}\njo{8}{81,}\njo{12}{1,}\njo{15}{6\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{62,}\njo{24}{81,}\njo{28}{1,}\njo{31}{6\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{64,}\njo{40}{82,}\njo{44}{0,}\njo{47}{7\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{83,}\njo{56}{69,}\njo{60}{8,}\njo{63}{0\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{64}\njo0{{\mm}67
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{84,}\njo{8}{71,}\njo{12}{7,}\njo{15}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{84,}\njo{24}{71,}\njo{28}{7,}\njo{31}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{86,}\njo{40}{73,}\njo{44}{6,}\njo{47}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{86,}\njo{56}{73,}\njo{60}{6,}\njo{63}{2\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{68}\njo0{{\mm}71
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{44,}\njo{8}{59,}\njo{12}{5,}\njo{15}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{44,}\njo{24}{59,}\njo{28}{5,}\njo{31}{3\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{58,}\njo{40}{61,}\njo{44}{4,}\njo{47}{4\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{58,}\njo{56}{61,}\njo{60}{4,}\njo{63}{4\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{72}\njo0{{\mm}75
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{60,}\njo{8}{49,}\njo{12}{3,}\njo{15}{5\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{60,}\njo{24}{49,}\njo{28}{3,}\njo{31}{5\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{76,}\njo{40}{89,}\njo{44}{2,}\njo{47}{6\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{76,}\njo{56}{89,}\njo{60}{2,}\njo{63}{6\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{76}\njo0{{\mm}79
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{78,}\njo{8}{91,}\njo{12}{1,}\njo{15}{7\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{78,}\njo{24}{91,}\njo{28}{1,}\njo{31}{7\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{80,}\njo{40}{92,}\njo{44}{0,}\njo{47}{8\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{93,}\njo{56}{69,}\njo{60}{9,}\njo{63}{0\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{80}\njo0{{\mm}83
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{94,}\njo{8}{87,}\njo{12}{8,}\njo{15}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{94,}\njo{24}{87,}\njo{28}{8,}\njo{31}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{96,}\njo{40}{45,}\njo{44}{7,}\njo{47}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{96,}\njo{56}{45,}\njo{60}{7,}\njo{63}{2\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{84}\njo0{{\mm}87
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{48,}\njo{8}{99,}\njo{12}{2,}\njo{15}{7\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{48,}\njo{24}{99,}\njo{28}{2,}\njo{31}{7\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{88,}\njo0{101,}\njo{44}{1,}\njo{47}{8\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{88,}\njo0{101,}\njo{60}{1,}\njo{63}{8\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{88}\njo0{{\mm}91
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{80,}\njo0{102,}\njo{12}{0,}\njo{15}{9\brr{}}\njo0{,}\njo0{\brl{}103,}\njo{24}{69,}\njo0{10,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}104,}\njo{40}{87,}\njo{44}{9,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}104,}\njo{56}{87,}\njo{60}{9,}\njo{63}{1\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{92}\njo0{{\mm}95
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}106,}\njo{8}{57,}\njo{12}{8,}\njo{15}{2\brr{}}\njo0{,}\njo0{\brl{}106,}\njo{24}{57,}\njo{28}{8,}\njo{31}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{62,}\njo0{109,}\njo{44}{2,}\njo{47}{8\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{62,}\njo0{109,}\njo{60}{2,}\njo{63}{8\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{96}\njo0{{\mm}99
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{88,}\njo0{111,}\njo{12}{1,}\njo{15}{9\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{88,}\njo0{111,}\njo{28}{1,}\njo{31}{9\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{80,}\njo0{112,}\njo{44}{0,}\njo0{10\brr{}}\njo0{,}\njo0{\brl{}113,}\njo{56}{85,}\njo0{11,}\njo{63}{0\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{100}\njo0{{\mm}103
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}114,}\njo{8}{87,}\njo0{10,}\njo{15}{1\brr{}}\njo0{,}\njo0{\brl{}114,}\njo{24}{87,}\njo0{10,}\njo{31}{1\brr{}}\njo0{,}\njo0{\brl{}116,}\njo{40}{57,}\njo{44}{9,}\njo{47}{2\brr{}}\njo0{,}\njo0{\brl{}116,}\njo{56}{57,}\njo{60}{9,}\njo{63}{2\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{104}\njo0{{\mm}107
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{62,}\njo0{119,}\njo{12}{2,}\njo{15}{9\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{62,}\njo0{119,}\njo{28}{2,}\njo{31}{9\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{88,}\njo0{121,}\njo{44}{1,}\njo0{10\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{88,}\njo0{121,}\njo{60}{1,}\njo0{10\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{108}\njo0{{\mm}111
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{90,}\njo0{122,}\njo{12}{0,}\njo0{11\brr{}}\njo0{,}\njo0{\brl{}123,}\njo{24}{85,}\njo0{12,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}124,}\njo{40}{97,}\njo0{11,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}124,}\njo{56}{97,}\njo0{11,}\njo{63}{1\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{112}\njo0{{\mm}115
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}126,}\njo{8}{57,}\njo0{10,}\njo{15}{2\brr{}}\njo0{,}\njo0{\brl{}126,}\njo{24}{57,}\njo0{10,}\njo{31}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{62,}\njo0{129,}\njo{44}{2,}\njo0{10\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{62,}\njo0{129,}\njo{60}{2,}\njo0{10\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{116}\njo0{{\mm}119
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{98,}\njo0{131,}\njo{12}{1,}\njo0{11\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{98,}\njo0{131,}\njo{28}{1,}\njo0{11\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{90,}\njo0{132,}\njo{44}{0,}\njo0{12\brr{}}\njo0{,}\njo0{\brl{}133,}\njo{56}{85,}\njo0{13,}\njo{63}{0\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{120}\njo0{{\mm}123
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}134,}\njo{8}{97,}\njo0{12,}\njo{15}{1\brr{}}\njo0{,}\njo0{\brl{}134,}\njo{24}{97,}\njo0{12,}\njo{31}{1\brr{}}\njo0{,}\njo0{\brl{}136,}\njo{40}{57,}\njo0{11,}\njo{47}{2\brr{}}\njo0{,}\njo0{\brl{}136,}\njo{56}{57,}\njo0{11,}\njo{63}{2\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{124}\njo0{{\mm}127
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{62,}\njo0{139,}\njo{12}{2,}\njo0{11\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{62,}\njo0{139,}\njo{28}{2,}\njo0{11\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{98,}\njo0{141,}\njo{44}{1,}\njo0{12\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{98,}\njo0{141,}\njo{60}{1,}\njo0{12\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{128}\njo0{{\mm}131
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{90,}\njo0{142,}\njo{12}{0,}\njo0{13\brr{}}\njo0{,}\njo0{\brl{}143,}\njo{24}{95,}\njo0{14,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}144,}\njo{40}{97,}\njo0{13,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}144,}\njo{56}{97,}\njo0{13,}\njo{63}{1\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{132}\njo0{{\mm}135
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{68,}\njo{8}{57,}\njo0{12,}\njo{15}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{68,}\njo{24}{57,}\njo0{12,}\njo{31}{2\brr{}}\njo0{,}\njo0{\brl{}}\njo{36}{62,}\njo{40}{81,}\njo{44}{2,}\njo0{12\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{62,}\njo{56}{81,}\njo{60}{2,}\njo0{12\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{136}\njo0{{\mm}139}\n\ped
\init{2}{}\njo{-2}{}\njo0{\brl{}}\njo{4}{98,}\njo0{147,}\njo{12}{1,}\njo0{13\brr{}}\njo0{,}\njo0{\brl{}}\njo{20}{98,}\njo0{147,}\njo{28}{1,}\njo0{13\brr{}}\njo0{,}\njo0{\brl{}100,}\njo0{148,}\njo{44}{0,}\njo0{14\brr{}}\njo0{,}\njo0{\brl{}149,}\njo{56}{95,}\njo0{15,}\njo{63}{0\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{140}\njo0{{\mm}143
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}150,}\njo0{107,}\njo0{14,}\njo{15}{1\brr{}}\njo0{,}\njo0{\brl{}150,}\njo0{107,}\njo0{14,}\njo{31}{1\brr{}}\njo0{,}\njo0{\brl{}108,}\njo0{151,}\njo{44}{1,}\njo0{14\brr{}}\njo0{,}\njo0{\brl{}108,}\njo0{151,}\njo{60}{1,}\njo0{14\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{144}\njo0{{\mm}147
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}100,}\njo0{152,}\njo{12}{0,}\njo0{15\brr{}}\njo0{,}\njo0{\brl{}153,}\njo{24}{95,}\njo0{16,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}154,}\njo0{107,}\njo0{15,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}108,}\njo0{155,}\njo{60}{1,}\njo0{15\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{148}\njo0{{\mm}151
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}100,}\njo0{156,}\njo{12}{0,}\njo0{16\brr{}}\njo0{,}\njo0{\brl{}157,}\njo{24}{95,}\njo0{17,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}158,}\njo0{107,}\njo0{16,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}108,}\njo0{159,}\njo{60}{1,}\njo0{16\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{152}\njo0{{\mm}155
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}100,}\njo0{160,}\njo{12}{0,}\njo0{17\brr{}}\njo0{,}\njo0{\brl{}161,}\njo0{105,}\njo0{18,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}162,}\njo0{107,}\njo0{17,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}108,}\njo0{163,}\njo{60}{1,}\njo0{17\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{156}\njo0{{\mm}159
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}110,}\njo0{164,}\njo{12}{0,}\njo0{18\brr{}}\njo0{,}\njo0{\brl{}165,}\njo0{105,}\njo0{19,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}166,}\njo0{117,}\njo0{18,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}118,}\njo0{167,}\njo{60}{1,}\njo0{18\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{160}\njo0{{\mm}163
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}110,}\njo0{168,}\njo{12}{0,}\njo0{19\brr{}}\njo0{,}\njo0{\brl{}169,}\njo0{105,}\njo0{20,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}170,}\njo0{117,}\njo0{19,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}118,}\njo0{171,}\njo{60}{1,}\njo0{19\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{164}\njo0{{\mm}167
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}110,}\njo0{172,}\njo{12}{0,}\njo0{20\brr{}}\njo0{,}\njo0{\brl{}173,}\njo0{105,}\njo0{21,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}174,}\njo0{117,}\njo0{20,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}118,}\njo0{175,}\njo{60}{1,}\njo0{20\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{168}\njo0{{\mm}171
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}110,}\njo0{176,}\njo{12}{0,}\njo0{21\brr{}}\njo0{,}\njo0{\brl{}177,}\njo0{105,}\njo0{22,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}178,}\njo0{117,}\njo0{21,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}118,}\njo0{179,}\njo{60}{1,}\njo0{21\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{172}\njo0{{\mm}175
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}110,}\njo0{180,}\njo{12}{0,}\njo0{22\brr{}}\njo0{,}\njo0{\brl{}181,}\njo0{115,}\njo0{23,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}182,}\njo0{117,}\njo0{22,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}118,}\njo0{183,}\njo{60}{1,}\njo0{22\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{176}\njo0{{\mm}179
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}120,}\njo0{184,}\njo{12}{0,}\njo0{23\brr{}}\njo0{,}\njo0{\brl{}185,}\njo0{115,}\njo0{24,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}186,}\njo0{127,}\njo0{23,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}128,}\njo0{187,}\njo{60}{1,}\njo0{23\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{180}\njo0{{\mm}183
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}120,}\njo0{188,}\njo{12}{0,}\njo0{24\brr{}}\njo0{,}\njo0{\brl{}189,}\njo0{115,}\njo0{25,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}190,}\njo0{127,}\njo0{24,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}128,}\njo0{191,}\njo{60}{1,}\njo0{24\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{184}\njo0{{\mm}187
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}120,}\njo0{192,}\njo{12}{0,}\njo0{25\brr{}}\njo0{,}\njo0{\brl{}193,}\njo0{115,}\njo0{26,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}194,}\njo0{127,}\njo0{25,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}128,}\njo0{195,}\njo{60}{1,}\njo0{25\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{188}\njo0{{\mm}191
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}120,}\njo0{196,}\njo{12}{0,}\njo0{26\brr{}}\njo0{,}\njo0{\brl{}197,}\njo0{115,}\njo0{27,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}198,}\njo0{127,}\njo0{26,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}128,}\njo0{199,}\njo{60}{1,}\njo0{26\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{192}\njo0{{\mm}195
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}120,}\njo0{200,}\njo{12}{0,}\njo0{27\brr{}}\njo0{,}\njo0{\brl{}201,}\njo0{115,}\njo0{28,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}202,}\njo0{127,}\njo0{27,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}128,}\njo0{203,}\njo{60}{1,}\njo0{27\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{196}\njo0{{\mm}199
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}120,}\njo0{204,}\njo{12}{0,}\njo0{28\brr{}}\njo0{,}\njo0{\brl{}205,}\njo0{115,}\njo0{29,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}206,}\njo0{127,}\njo0{28,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}128,}\njo0{207,}\njo{60}{1,}\njo0{28\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{200}\njo0{{\mm}203
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}120,}\njo0{208,}\njo{12}{0,}\njo0{29\brr{}}\njo0{,}\njo0{\brl{}209,}\njo0{125,}\njo0{30,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}210,}\njo0{127,}\njo0{29,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}128,}\njo0{211,}\njo{60}{1,}\njo0{29\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{204}\njo0{{\mm}207
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}130,}\njo0{212,}\njo{12}{0,}\njo0{30\brr{}}\njo0{,}\njo0{\brl{}213,}\njo0{125,}\njo0{31,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}214,}\njo0{137,}\njo0{30,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}138,}\njo0{215,}\njo{60}{1,}\njo0{30\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{208}\njo0{{\mm}211
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}130,}\njo0{216,}\njo{12}{0,}\njo0{31\brr{}}\njo0{,}\njo0{\brl{}217,}\njo0{125,}\njo0{32,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}218,}\njo0{137,}\njo0{31,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}138,}\njo0{219,}\njo{60}{1,}\njo0{31\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{212}\njo0{{\mm}215
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}130,}\njo0{220,}\njo{12}{0,}\njo0{32\brr{}}\njo0{,}\njo0{\brl{}221,}\njo0{125,}\njo0{33,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}222,}\njo0{137,}\njo0{32,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}138,}\njo0{223,}\njo{60}{1,}\njo0{32\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{216}\njo0{{\mm}219
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}130,}\njo0{224,}\njo{12}{0,}\njo0{33\brr{}}\njo0{,}\njo0{\brl{}225,}\njo0{125,}\njo0{34,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}226,}\njo0{137,}\njo0{33,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}138,}\njo0{227,}\njo{60}{1,}\njo0{33\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{220}\njo0{{\mm}223
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}130,}\njo0{228,}\njo{12}{0,}\njo0{34\brr{}}\njo0{,}\njo0{\brl{}229,}\njo0{125,}\njo0{35,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}230,}\njo0{137,}\njo0{34,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}138,}\njo0{231,}\njo{60}{1,}\njo0{34\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{224}\njo0{{\mm}227
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}130,}\njo0{232,}\njo{12}{0,}\njo0{35\brr{}}\njo0{,}\njo0{\brl{}233,}\njo0{125,}\njo0{36,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}234,}\njo0{137,}\njo0{35,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}138,}\njo0{235,}\njo{60}{1,}\njo0{35\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{228}\njo0{{\mm}231
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}130,}\njo0{236,}\njo{12}{0,}\njo0{36\brr{}}\njo0{,}\njo0{\brl{}237,}\njo0{125,}\njo0{37,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}238,}\njo0{137,}\njo0{36,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}138,}\njo0{239,}\njo{60}{1,}\njo0{36\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{232}\njo0{{\mm}235
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}130,}\njo0{240,}\njo{12}{0,}\njo0{37\brr{}}\njo0{,}\njo0{\brl{}241,}\njo0{125,}\njo0{38,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}242,}\njo0{137,}\njo0{37,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}138,}\njo0{243,}\njo{60}{1,}\njo0{37\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{236}\njo0{{\mm}239
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}130,}\njo0{244,}\njo{12}{0,}\njo0{38\brr{}}\njo0{,}\njo0{\brl{}245,}\njo0{135,}\njo0{39,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}246,}\njo0{137,}\njo0{38,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}138,}\njo0{247,}\njo{60}{1,}\njo0{38\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{240}\njo0{{\mm}243
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}140,}\njo0{248,}\njo{12}{0,}\njo0{39\brr{}}\njo0{,}\njo0{\brl{}249,}\njo0{135,}\njo0{40,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}250,}\njo{40}{69,}\njo0{39,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{80,}\njo0{251,}\njo{60}{1,}\njo0{39\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{244}\njo0{{\mm}247
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}140,}\njo0{252,}\njo{12}{0,}\njo0{40\brr{}}\njo0{,}\njo0{\brl{}249,}\njo0{135,}\njo0{41,}\njo{31}{0\brr{}}\njo0{,}\njo0{\brl{}250,}\njo{40}{69,}\njo0{40,}\njo{47}{1\brr{}}\njo0{,}\njo0{\brl{}}\njo{52}{80,}\njo0{251,}\njo{60}{1,}\njo0{40\brr{}}\njo0{,}\njo{67}{}\njo0{/}\njo0{/}\njo{70}{248}\njo0{{\mm}251
}\n\ped \init{2}{}\njo{-2}{}\njo0{\brl{}140,}\njo0{252,}\njo{12}{0,}\njo0{41\brr{}}\njo0{\brr{}}\njo0{;}\jmpo{21}{}\njo0{/}\njo0{/}\njo{24}{252,}\njo{29}{253}\njo0{{\mm}255}\njo{37}{are}\njo{41}{reserved
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont define}}\njo{8}{nex(state,}\njo0{sel)}\njo{23}{State{\ul}table{[}state]{[}sel]
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{The}\njo{7}{code}\njo{12}{used}\njo{17}{to}\njo{20}{generate}\njo{29}{the}\njo{33}{above}\njo{39}{table}\njo{45}{at}\njo{48}{run}\njo{52}{time}\njo{57}{(4}\njo0{\%}\njo{61}{slower).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{To}\njo{6}{print}\njo{12}{the}\njo{16}{table,}\njo{23}{uncomment}\njo{33}{the}\njo{37}{4}\njo{39}{lines}\njo{45}{of}\njo{48}{print}\njo{54}{statements}\njo{65}{below.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{In}\njo{6}{this}\njo{11}{code}\njo{16}{x,}\njo0{y}\njo{20}{}\njo0{=}\njo{22}{n0,}\njo0{n1}\njo{28}{is}\njo{31}{the}\njo{35}{number}\njo{42}{of}\njo{45}{0,}\njo0{1}\njo{49}{bits}\njo{54}{represented}\njo{66}{by}\njo{69}{a}\njo{71}{state.
}\n\ped \init0{}\njo0{\#else }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{class}\njo{6}{StateTable}\njo{17}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{Array$<$U8$>$}\njo{12}{ns;}\jmpo{17}{}\njo0{/}\njo0{/}\njo{20}{state}\njo0{$\ast$4}\njo{28}{}\njo0{{\mm}$>$}\njo{31}{next}\njo{36}{state}\njo{42}{{\keywordfont
if}}\njo{45}{0,}\njo{48}{{\keywordfont if}}\njo{51}{1,}\njo{54}{n0,}\njo{58}{n1
}\n\ped \init{2}{}\njo{-2}{{\keywordfont enum}}\njo{7}{}\njo0{\brl{}B}\njo0{=5,}\njo{13}{N}\njo0{=64\brr{}}\njo0{;}\njo{20}{}\njo0{/}\njo0{/}\njo{23}{sizes}\njo{29}{of}\njo{32}{b,}\njo{35}{t
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{{\keywordfont
const}}\njo{15}{{\keywordfont int}}\njo{19}{b{[}B];}\jmpo{26}{}\njo0{/}\njo0{/}\njo{29}{x}\njo{31}{}\njo0{{\mm}$>$}\njo{34}{max}\njo{38}{y,}\njo{41}{y}\njo{43}{}\njo0{{\mm}$>$}\njo{46}{max}\njo{50}{x
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{U8}\njo{12}{t{[}N]{[}N]{[}2];}\jmpo{25}{}\njo0{/}\njo0{/}\njo{28}{x,}\njo0{y}\njo{32}{}\njo0{{\mm}$>$}\njo{35}{state}\njo{41}{number,}\njo{49}{number}\njo{56}{of}\njo{59}{states
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{num{\ul}states({\keywordfont
int}}\njo{21}{x,}\njo{24}{{\keywordfont int}}\njo{28}{y);}\jmpo{33}{}\njo0{/}\njo0{/}\njo{36}{compute}\njo{44}{t{[}x]{[}y]{[}1]
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{discount(int\&}\njo{21}{x);}\jmpo{26}{}\njo0{/}\njo0{/}\njo{29}{set}\njo{33}{new}\njo{37}{value}\njo{43}{of}\njo{46}{x}\njo{48}{after}\njo{54}{1}\njo{56}{or}\njo{59}{y}\njo{61}{after}\njo{67}{0
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{next{\ul}state(int\&}\njo{23}{x,}\njo{26}{int\&}\njo{31}{y,}\njo{34}{{\keywordfont
int}}\njo{38}{b);}\jmpo{43}{}\njo0{/}\njo0{/}\njo{46}{new}\njo{50}{(x,}\njo0{y)}\njo{56}{after}\njo{62}{bit}\njo{66}{b
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{{\keywordfont
int}}\njo{6}{operator()({\keywordfont int}}\njo{21}{state,}\njo{28}{{\keywordfont
int}}\njo{32}{sel)}\njo{37}{}\njo0{\brl{}{\keywordfont
return}}\njo{45}{ns{[}state}\njo0{$\ast$4}\njo0{+sel];}\njo0{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{StateTable();}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo{2}{nex;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont const}}\njo{6}{{\keywordfont
int}}\njo{10}{StateTable::b{[}B]}\njo0{=}\njo0{\brl{}42,}\njo0{41,}\njo0{13,}\njo0{6,}\njo0{5\brr{}}\njo0{;}\jmpo{44}{}\njo0{/}\njo0{/}\njo{47}{x}\njo{49}{}\njo0{{\mm}$>$}\njo{52}{max}\njo{56}{y,}\njo{59}{y}\njo{61}{}\njo0{{\mm}$>$}\njo{64}{max}\njo{68}{x
}\n\ped \init0{}\njo0{U8}\njo{3}{StateTable::t{[}N]{[}N]{[}2];}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
int}}\njo{4}{StateTable::num{\ul}states({\keywordfont int}}\njo{31}{x,}\njo{34}{{\keywordfont
int}}\njo{38}{y)}\njo{41}{}\njo0{\brl{} }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(x$<$y)}\njo{11}{{\keywordfont
return}}\njo{18}{num{\ul}states(y,}\njo{32}{x);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(x$<$0}\njo{10}{}\njo0{$\mid$$\mid$}\njo{13}{y$<$0}\njo{17}{}\njo0{$\mid$$\mid$}\njo{20}{x}\njo0{$>$=N}\njo{25}{}\njo0{$\mid$$\mid$}\njo{28}{y}\njo0{$>$=N}\njo{33}{}\njo0{$\mid$$\mid$}\njo{36}{y}\njo0{$>$=B}\njo{41}{}\njo0{$\mid$$\mid$}\njo{44}{x}\njo0{$>$=b{[}y])}\njo{53}{{\keywordfont
return}}\njo{60}{0;}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{States}\njo{12}{0}\njo0{{\mm}30}\njo{17}{are}\njo{21}{a}\njo{23}{history}\njo{31}{of}\njo{34}{the}\njo{38}{last}\njo{43}{0}\njo0{{\mm}4}\njo{47}{bits
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(x}\njo0{+y}\njo0{$<$=4)}\njo{14}{}\njo0{\brl{}}\jmpo{17}{}\njo0{/}\njo0{/}\njo{20}{x}\njo0{+y}\njo{24}{choose}\njo{31}{x}\njo{33}{}\njo0{=}\njo{35}{(x}\njo0{+y)!}\njo0{/x!y!
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{r}\njo0{=1;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{i}\njo0{=x}\njo0{+1;}\njo{20}{i}\njo0{$<$=x}\njo0{+y;}\njo{28}{++i)}\njo{33}{r}\njo0{$\ast$=i;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{i}\njo0{=2;}\njo{18}{i}\njo0{$<$=y;}\njo{24}{++i)}\njo{29}{r}\njo0{/=i;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{r;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{States}\njo{12}{31}\njo0{{\mm}255}\njo{19}{represent}\njo{29}{a}\njo{31}{0,}\njo0{1}\njo{35}{count}\njo{41}{and}\njo{45}{possibly}\njo{54}{the}\njo{58}{last}\njo{63}{bit
}\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{{\keywordfont
if}}\njo{8}{the}\njo{12}{state}\njo{18}{is}\njo{21}{reachable}\njo{31}{by}\njo{34}{either}\njo{41}{a}\njo{43}{0}\njo{45}{or}\njo{48}{1.
}\n\ped \init{2}{}\njo{-2}{else }\n\ped \init{4}{}\njo{-4}{{\keywordfont
return}}\njo{11}{1}\njo0{+(y$>$0}\njo{18}{}\njo0{\&\&}\njo{21}{x}\njo0{+y$<$16);}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{New}\njo{7}{value}\njo{13}{of}\njo{16}{count}\njo{22}{x}\njo{24}{{\keywordfont
if}}\njo{27}{the}\njo{31}{opposite}\njo{40}{bit}\njo{44}{is}\njo{47}{observed}\n\ped
\init0{}\njo0{{\keywordfont void}}\njo{5}{StateTable::discount(int\&}\njo{31}{x)}\njo{34}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(x$>$2)}\njo{11}{x}\njo0{=ilog(x)}\njo0{/6}\njo0{{\mm}1;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{compute}\njo{11}{next}\njo{16}{x,}\njo0{y}\njo{20}{(0}\njo{23}{to}\njo{26}{N)}\njo{29}{given}\njo{35}{input}\njo{41}{b}\njo{43}{(0}\njo{46}{or}\njo{49}{1)
}\n\ped \init0{}\njo0{{\keywordfont void}}\njo{5}{StateTable::next{\ul}state(int\&}\njo{33}{x,}\njo{36}{int\&}\njo{41}{y,}\njo{44}{{\keywordfont
int}}\njo{48}{b)}\njo{51}{}\njo0{\brl{} }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(x$<$y)
}\n\ped \init{4}{}\njo{-4}{next{\ul}state(y,}\njo{18}{x,}\njo{21}{1}\njo0{{\mm}b);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont else}}\njo{7}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(b)}\njo{11}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{++y;}\njo0{ }\n\ped \init{6}{}\njo{-6}{discount(x);}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{++x;}\njo0{ }\n\ped \init{6}{}\njo{-6}{discount(y);}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont while}}\njo{10}{(!t{[}x]{[}y]{[}1])}\njo{24}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(y$<$2)}\njo{15}{{\mm\mm}x;}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont else}}\njo{11}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{x}\njo0{=(x}\njo0{$\ast$(y}\njo0{{\mm}1)}\njo0{+(y}\njo0{/2))}\njo0{/y;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\mm\mm}y;}\njo0{ }\n\ped
\init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Initialize}\njo{14}{next}\njo{19}{state}\njo{25}{table}\njo{31}{ns{[}state}\njo0{$\ast$4]}\njo{43}{}\njo0{{\mm}$>$}\njo{46}{next}\njo{51}{{\keywordfont
if}}\njo{54}{0,}\njo{57}{next}\njo{62}{{\keywordfont
if}}\njo{65}{1,}\njo{68}{x,}\njo{71}{y }\n\ped
\init0{}\njo0{StateTable::StateTable():}\njo{26}{ns(1024)}\njo{35}{}\njo0{\brl{}}\n\ped
\init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Assign}\njo{12}{states
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{state}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$256;}\njo{23}{++i)}\njo{28}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{y}\njo0{=0;}\njo{18}{y}\njo0{$<$=i;}\njo{24}{++y)}\njo{29}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{{\keywordfont int}}\njo{10}{x}\njo0{=i}\njo0{{\mm}y;}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont int}}\njo{10}{n}\njo0{=num{\ul}states(x,}\njo{26}{y);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(n)}\njo{13}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{t{[}x]{[}y]{[}0]}\njo0{=state;}\njo0{
}\n\ped \init{8}{}\njo{-8}{t{[}x]{[}y]{[}1]}\njo0{=n;}\njo0{
}\n\ped \init{8}{}\njo{-8}{state}\njo0{+=n;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Print}\njo0{/generate}\njo{20}{next}\njo{25}{state}\njo{31}{table
}\n\ped \init{2}{}\njo{-2}{state}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$N;}\njo{21}{++i)}\njo{26}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{y}\njo0{=0;}\njo{18}{y}\njo0{$<$=i;}\njo{24}{++y)}\njo{29}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{{\keywordfont int}}\njo{10}{x}\njo0{=i}\njo0{{\mm}y;}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{k}\njo0{=0;}\njo{20}{k$<$t{[}x]{[}y]{[}1];}\njo{34}{++k)}\njo{39}{}\njo0{\brl{}
}\n\ped \init{8}{}\njo{-8}{{\keywordfont int}}\njo{12}{x0}\njo0{=x,}\njo{18}{y0}\njo0{=y,}\njo{24}{x1}\njo0{=x,}\njo{30}{y1}\njo0{=y;}\jmpo{37}{}\njo0{/}\njo0{/}\njo{40}{next}\njo{45}{x,}\njo0{y}\njo{49}{{\keywordfont
for}}\njo{53}{input}\njo{59}{0,}\njo0{1}\n\ped \init{8}{}\njo{-8}{{\keywordfont
int}}\njo{12}{ns0}\njo0{=0,}\njo{19}{ns1}\njo0{=0;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont if}}\njo{11}{(state$<$15)}\njo{22}{}\njo0{\brl{}}\n\ped
\init{10}{}\njo{-10}{++x0;}\njo0{ }\n\ped \init{10}{}\njo{-10}{++y1;}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns0}\njo0{=t{[}x0]{[}y0]{[}0]}\njo0{+state}\njo0{{\mm}t{[}x]{[}y]{[}0];}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns1}\njo0{=t{[}x1]{[}y1]{[}0]}\njo0{+state}\njo0{{\mm}t{[}x]{[}y]{[}0];}\njo0{
}\n\ped \init{10}{}\njo{-10}{{\keywordfont if}}\njo{13}{(x$>$0)}\njo{19}{ns1}\njo0{+=t{[}x}\njo0{{\mm}1]{[}y}\njo0{+1]{[}1];}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns{[}state}\njo0{$\ast$4]}\njo0{=ns0;}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns{[}state}\njo0{$\ast$4}\njo0{+1]}\njo0{=ns1;}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns{[}state}\njo0{$\ast$4}\njo0{+2]}\njo0{=x;}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns{[}state}\njo0{$\ast$4}\njo0{+3]}\njo0{=y;}\njo0{
}\n\ped \init{8}{}\njo{-8}{\brr{}}\njo0{ }\n\ped
\init{8}{}\njo{-8}{{\keywordfont else}}\njo{13}{{\keywordfont
if}}\njo{16}{(t{[}x]{[}y]{[}1])}\njo{29}{}\njo0{\brl{}
}\n\ped \init{10}{}\njo{-10}{next{\ul}state(x0,}\njo{25}{y0,}\njo{29}{0);}\njo0{
}\n\ped \init{10}{}\njo{-10}{next{\ul}state(x1,}\njo{25}{y1,}\njo{29}{1);}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns{[}state}\njo0{$\ast$4]}\njo0{=ns0}\njo0{=t{[}x0]{[}y0]{[}0];}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns{[}state}\njo0{$\ast$4}\njo0{+1]}\njo0{=ns1}\njo0{=t{[}x1]{[}y1]{[}0]}\njo0{+(t{[}x1]{[}y1]{[}1]$>$1);}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns{[}state}\njo0{$\ast$4}\njo0{+2]}\njo0{=x;}\njo0{
}\n\ped \init{10}{}\njo{-10}{ns{[}state}\njo0{$\ast$4}\njo0{+3]}\njo0{=y;}\njo0{
}\n\ped \init{8}{}\njo{-8}{\brr{}}\njo0{ }\n\ped
\init{10}{}\njo{-10}{}\njo0{/}\njo0{/}\njo{13}{uncomment}\njo{23}{to}\njo{26}{print}\njo{32}{table}\njo{38}{above
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{10}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\brl{}\%3d,\%3d,\%2d,\%2d\brr{},\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{39}{ns{[}state}\njo0{$\ast$4],}\njo{52}{ns{[}state}\njo0{$\ast$4}\njo0{+1],}\njo{67}{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{12}{ns{[}state}\njo0{$\ast$4}\njo0{+2],}\njo{27}{ns{[}state}\njo0{$\ast$4}\njo0{+3]);}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{10}{{\keywordfont
if}}\njo{13}{(state}\njo0{\%4}\njo0{==3)}\njo{26}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{//~}\njo0{\%d{\mm}\%d\bs{1}n}\njo0{~~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{50}{state}\njo0{{\mm}3,}\njo{59}{state);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(state}\njo0{$>$=0}\njo{24}{}\njo0{\&\&}\njo{27}{state$<$256);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(t{[}x]{[}y]{[}1]$>$0);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(t{[}x]{[}y]{[}0]}\njo0{$<$=state);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(t{[}x]{[}y]{[}0]}\njo0{+t{[}x]{[}y]{[}1]$>$state);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(t{[}x]{[}y]{[}1]}\njo0{$<$=6);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(t{[}x0]{[}y0]{[}1]$>$0);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(t{[}x1]{[}y1]{[}1]$>$0);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(ns0}\njo0{{\mm}t{[}x0]{[}y0]{[}0]$<$t{[}x0]{[}y0]{[}1]);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(ns0}\njo0{{\mm}t{[}x0]{[}y0]{[}0]}\njo0{$>$=0);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(ns1}\njo0{{\mm}t{[}x1]{[}y1]{[}0]$<$t{[}x1]{[}y1]{[}1]);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(ns1}\njo0{{\mm}t{[}x1]{[}y1]{[}0]}\njo0{$>$=0);}\njo0{
}\n\ped \init{8}{}\njo{-8}{++state;}\njo0{ }\n\ped
\init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{4}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%d~}\njo0{states\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{26}{state);}\njo{34}{exit(0);}\jmpo{44}{}\njo0{/}\njo0{/}\njo{47}{uncomment}\njo{57}{to}\njo{60}{print}\njo{66}{table}\njo{72}{above
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{\#endif }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{30}{Squash}\njo{37}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{{\keywordfont
return}}\njo{10}{p}\njo{12}{}\njo0{=}\njo{14}{1}\njo0{/(1}\njo{19}{}\njo0{+}\njo{21}{exp(}\njo0{{\mm}d)),}\njo{31}{d}\njo{33}{scaled}\njo{40}{by}\njo{43}{8}\njo{45}{bits,}\njo{51}{p}\njo{53}{scaled}\njo{60}{by}\njo{63}{12}\njo{66}{bits
}\n\ped \init0{}\njo0{{\keywordfont int}}\njo{4}{squash({\keywordfont
int}}\njo{15}{d)}\njo{18}{}\njo0{\brl{} }\n\ped
\init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{{\keywordfont
const}}\njo{15}{{\keywordfont int}}\njo{19}{t{[}33]}\njo0{=}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{1,}\njo0{2,}\njo0{3,}\njo0{6,}\njo0{10,}\njo0{16,}\njo0{27,}\njo0{45,}\njo0{73,}\njo0{120,}\njo0{194,}\njo0{310,}\njo0{488,}\njo0{747,}\njo0{1101,}\njo0{
}\n\ped \init{4}{}\njo{-4}{1546,}\njo0{2047,}\njo0{2549,}\njo0{2994,}\njo0{3348,}\njo0{3607,}\njo0{3785,}\njo0{3901,}\njo0{3975,}\njo0{4022,}\njo0{
}\n\ped \init{4}{}\njo{-4}{4050,}\njo0{4068,}\njo0{4079,}\njo0{4085,}\njo0{4089,}\njo0{4092,}\njo0{4093,}\njo0{4094\brr{}}\njo0{;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(d$>$2047)}\njo{14}{{\keywordfont
return}}\njo{21}{4095;}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
if}}\njo{5}{(d$<$}\njo0{{\mm}2047)}\njo{15}{{\keywordfont
return}}\njo{22}{0;}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
int}}\njo{6}{w}\njo0{=d\&127;}\njo0{ }\n\ped \init{2}{}\njo{-2}{d}\njo0{=(d\mgt{2}7)}\njo0{+16;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{(t{[}d]}\njo0{$\ast$(128}\njo0{{\mm}w)}\njo0{+t{[}(d}\njo0{+1)]}\njo0{$\ast$w}\njo0{+64)}\njo{38}{\mgt{2}}\njo{41}{7;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{Stretch}\njo{37}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Inverse}\njo{11}{of}\njo{14}{squash.}\njo{22}{d}\njo{24}{}\njo0{=}\njo{26}{ln(p}\njo0{/(1}\njo0{{\mm}p)),}\njo{39}{d}\njo{41}{scaled}\njo{48}{by}\njo{51}{8}\njo{53}{bits,}\njo{59}{p}\njo{61}{by}\njo{64}{12}\njo{67}{bits.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{d}\njo{5}{has}\njo{9}{range}\njo{15}{}\njo0{{\mm}2047}\njo{21}{to}\njo{24}{2047}\njo{29}{representing}\njo{42}{}\njo0{{\mm}8}\njo{45}{to}\njo{48}{8.}\jmpo{52}{p}\njo{54}{has}\njo{58}{range}\njo{64}{0}\njo{66}{to}\njo{69}{4095.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{class}\njo{6}{Stretch}\njo{14}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{Array$<$short$>$}\njo{15}{t;}\njo0{
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{Stretch();}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{operator()({\keywordfont
int}}\njo{21}{p)}\njo{24}{{\keywordfont const}}\njo{30}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{assert(p}\njo0{$>$=0}\njo{16}{}\njo0{\&\&}\njo{19}{p$<$4096);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{t{[}p];}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo{2}{stretch;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{Stretch::Stretch():}\njo{20}{t(4096)}\njo{28}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{pi}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{x}\njo0{=}\njo0{{\mm}2047;}\njo{20}{x}\njo0{$<$=2047;}\njo{29}{++x)}\njo{34}{}\njo0{\brl{}}\jmpo{37}{}\njo0{/}\njo0{/}\njo{40}{invert}\njo{47}{squash()
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{i}\njo0{=squash(x);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{j}\njo0{=pi;}\njo{19}{j}\njo0{$<$=i;}\njo{25}{++j)
}\n\ped \init{6}{}\njo{-6}{t{[}j]}\njo0{=x;}\njo0{
}\n\ped \init{4}{}\njo{-4}{pi}\njo0{=i}\njo0{+1;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{t{[}4095]}\njo0{=2047;}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{Mixer}\njo{35}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Mixer}\njo{9}{m(N,}\njo{14}{M,}\njo{17}{S}\njo0{=1,}\njo{22}{w}\njo0{=0)}\njo{27}{combines}\njo{36}{models}\njo{43}{using}\njo{49}{M}\njo{51}{neural}\njo{58}{networks}\njo{67}{with
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{N}\njo{7}{inputs}\njo{14}{each,}\njo{20}{of}\njo{23}{which}\njo{29}{up}\njo{32}{to}\njo{35}{S}\njo{37}{may}\njo{41}{be}\njo{44}{selected.}\jmpo{55}{If}\njo{58}{S}\njo{60}{$>$}\njo{62}{1}\njo{64}{then
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{the}\njo{9}{outputs}\njo{17}{of}\njo{20}{these}\njo{26}{neural}\njo{33}{networks}\njo{42}{are}\njo{46}{combined}\njo{55}{using}\njo{61}{another
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{neural}\njo{12}{network}\njo{20}{(with}\njo{26}{parameters}\njo{37}{S,}\njo{40}{1,}\njo{43}{1).}\jmpo{48}{If}\njo{51}{S}\njo{53}{}\njo0{=}\njo{55}{1}\njo{57}{then}\njo{62}{the
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{output}\njo{12}{is}\njo{15}{direct.}\jmpo{24}{The}\njo{28}{weights}\njo{36}{are}\njo{40}{initially}\njo{50}{w}\njo{52}{(}\njo0{+}\njo0{{\mm}32K).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{It}\njo{8}{is}\njo{11}{used}\njo{16}{as}\njo{19}{follows:
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{m.update()}\njo{14}{trains}\njo{21}{the}\njo{25}{network}\njo{33}{where}\njo{39}{the}\njo{43}{expected}\njo{52}{output}\njo{59}{is}\njo{62}{the
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{last}\njo{10}{bit}\njo{14}{(in}\njo{18}{the}\njo{22}{global}\njo{29}{variable}\njo{38}{y).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{m.add(stretch(p))}\njo{21}{inputs}\njo{28}{prediction}\njo{39}{from}\njo{44}{one}\njo{48}{of}\njo{51}{N}\njo{53}{models.}\jmpo{62}{The
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{prediction}\njo{16}{should}\njo{23}{be}\njo{26}{positive}\njo{35}{to}\njo{38}{predict}\njo{46}{a}\njo{48}{1}\njo{50}{bit,}\njo{55}{negative}\njo{64}{{\keywordfont
for}}\njo{68}{0,}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{nominally}\njo{15}{}\njo0{+}\njo0{{\mm}256}\njo{21}{to}\njo{24}{}\njo0{+}\njo0{{\mm}2K.}\jmpo{31}{The}\njo{35}{maximum}\njo{43}{allowed}\njo{51}{value}\njo{57}{is}\njo{60}{}\njo0{+}\njo0{{\mm}32K}\njo{66}{but
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{using}\njo{11}{such}\njo{16}{large}\njo{22}{values}\njo{29}{may}\njo{33}{cause}\njo{39}{overflow}\njo{48}{{\keywordfont
if}}\njo{51}{N}\njo{53}{is}\njo{56}{large. }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{m.set(cxt,}\njo{14}{range)}\njo{21}{selects}\njo{29}{cxt}\njo{33}{as}\njo{36}{one}\njo{40}{of}\njo{43}{\sq{}range\sq{}}\njo{51}{neural}\njo{58}{networks}\njo{67}{to
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{use.}\jmpo{11}{0}\njo{13}{}\njo0{$<$=}\njo{16}{cxt}\njo{20}{$<$}\njo{22}{range.}\jmpo{30}{Should}\njo{37}{be}\njo{40}{called}\njo{47}{up}\njo{50}{to}\njo{53}{S}\njo{55}{times}\njo{61}{such
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{that}\njo{10}{the}\njo{14}{total}\njo{20}{of}\njo{23}{the}\njo{27}{ranges}\njo{34}{is}\njo{37}{}\njo0{$<$=}\njo{40}{M.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{m.p()}\njo{9}{returns}\njo{17}{the}\njo{21}{output}\njo{28}{prediction}\njo{39}{that}\njo{44}{the}\njo{48}{next}\njo{53}{bit}\njo{57}{is}\njo{60}{1}\njo{62}{as}\njo{65}{a
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{12}\njo{8}{bit}\njo{12}{number}\njo{19}{(0}\njo{22}{to}\njo{25}{4095).
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{dot{\ul}product}\njo{15}{returns}\njo{23}{dot}\njo{27}{product}\njo{35}{t}\njo0{$\ast$w}\njo{39}{of}\njo{42}{n}\njo{44}{elements.}\jmpo{55}{n}\njo{57}{is}\njo{60}{rounded
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{up}\njo{6}{to}\njo{9}{a}\njo{11}{multiple}\njo{20}{of}\njo{23}{8.}\jmpo{27}{Result}\njo{34}{is}\njo{37}{scaled}\njo{44}{down}\njo{49}{by}\njo{52}{8}\njo{54}{bits.
}\n\ped \init0{}\njo0{{\keywordfont int}}\njo{4}{dot{\ul}product({\keywordfont
short}}\njo{22}{}\njo0{$\ast$t,}\njo{26}{{\keywordfont
short}}\njo{32}{}\njo0{$\ast$w,}\njo{36}{{\keywordfont
int}}\njo{40}{n)}\njo{43}{}\njo0{\brl{} }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{sum}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{n}\njo0{=(n}\njo0{+7)\&}\njo0{{\mm}8;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$n;}\njo{21}{i}\njo0{+=2)
}\n\ped \init{4}{}\njo{-4}{sum}\njo0{+=(t{[}i]}\njo0{$\ast$w{[}i]}\njo0{+t{[}i}\njo0{+1]}\njo0{$\ast$w{[}i}\njo0{+1])}\njo{35}{\mgt{2}}\njo{38}{8;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{sum;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Train}\njo{9}{neural}\njo{16}{network}\njo{24}{weights}\njo{32}{w{[}n]}\njo{37}{given}\njo{43}{inputs}\njo{50}{t{[}n]}\njo{55}{and}\njo{59}{err.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{w{[}i]}\njo{8}{}\njo0{+=}\njo{11}{t{[}i]}\njo0{$\ast$err,}\njo{21}{i}\njo0{=0..n}\njo0{{\mm}1.}\jmpo{32}{t,}\njo{35}{w,}\njo{38}{err}\njo{42}{are}\njo{46}{signed}\njo{53}{16}\njo{56}{bits}\njo{61}{(}\njo0{+}\njo0{{\mm}}\njo{65}{32K).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{err}\njo{7}{is}\njo{10}{scaled}\njo{17}{16}\njo{20}{bits}\njo{25}{(representing}\njo{39}{}\njo0{+}\njo0{{\mm}}\njo{42}{1}\njo0{/2).}\jmpo{49}{w{[}i]}\njo{54}{is}\njo{57}{clamped}\njo{65}{to}\njo{68}{}\njo0{+}\njo0{{\mm}}\njo{71}{32K
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{and}\njo{7}{rounded.}\jmpo{17}{n}\njo{19}{is}\njo{22}{rounded}\njo{30}{up}\njo{33}{to}\njo{36}{a}\njo{38}{multiple}\njo{47}{of}\njo{50}{8.
}\n\ped \init0{}\njo0{{\keywordfont void}}\njo{5}{train({\keywordfont
short}}\njo{17}{}\njo0{$\ast$t,}\njo{21}{{\keywordfont
short}}\njo{27}{}\njo0{$\ast$w,}\njo{31}{{\keywordfont
int}}\njo{35}{n,}\njo{38}{{\keywordfont int}}\njo{42}{err)}\njo{47}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{n}\njo0{=(n}\njo0{+7)\&}\njo0{{\mm}8;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$n;}\njo{21}{++i)}\njo{26}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{wt}\njo0{=w{[}i]}\njo0{+((t{[}i]}\njo0{$\ast$err}\njo0{$\ast$2\mgt{2}16)}\njo0{+1\mgt{2}1);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(wt$<$}\njo0{{\mm}32768)}\njo{19}{wt}\njo0{=}\njo0{{\mm}32768;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(wt$>$32767)}\njo{18}{wt}\njo0{=32767;}\njo0{
}\n\ped \init{4}{}\njo{-4}{w{[}i]}\njo0{=wt;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{class}\njo{6}{Mixer}\njo{12}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont const}}\njo{8}{{\keywordfont
int}}\njo{12}{N,}\njo{15}{M,}\njo{18}{S;}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{max}\njo{30}{inputs,}\njo{38}{max}\njo{42}{contexts,}\njo{52}{max}\njo{56}{context}\njo{64}{sets
}\n\ped \init{2}{}\njo{-2}{Array$<$short,}\njo{15}{16$>$}\njo{19}{tx;}\njo{23}{}\njo0{/}\njo0{/}\njo{26}{N}\njo{28}{inputs}\njo{35}{from}\njo{40}{add()
}\n\ped \init{2}{}\njo{-2}{Array$<$short,}\njo{15}{16$>$}\njo{19}{wx;}\njo{23}{}\njo0{/}\njo0{/}\njo{26}{N}\njo0{$\ast$M}\njo{30}{weights
}\n\ped \init{2}{}\njo{-2}{Array$<$int$>$}\njo{13}{cxt;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{S}\njo{24}{contexts
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{ncxt;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{number}\njo{29}{of}\njo{32}{contexts}\njo{41}{(0}\njo{44}{to}\njo{47}{S)
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{base;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{offset}\njo{29}{of}\njo{32}{next}\njo{37}{context}\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{nx;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{Number}\njo{29}{of}\njo{32}{inputs}\njo{39}{in}\njo{42}{tx,}\njo{46}{0}\njo{48}{to}\njo{51}{N
}\n\ped \init{2}{}\njo{-2}{Array$<$int$>$}\njo{13}{pr;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{last}\njo{27}{result}\njo{34}{(scaled}\njo{42}{12}\njo{45}{bits)
}\n\ped \init{2}{}\njo{-2}{Mixer}\njo0{$\ast$}\njo{9}{mp;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{points}\njo{29}{to}\njo{32}{a}\njo{34}{Mixer}\njo{40}{to}\njo{43}{combine}\njo{51}{results
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{Mixer({\keywordfont
int}}\njo{12}{n,}\njo{15}{{\keywordfont int}}\njo{19}{m,}\njo{22}{{\keywordfont
int}}\njo{26}{s}\njo0{=1,}\njo{31}{{\keywordfont int}}\njo{35}{w}\njo0{=0);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Adjust}\njo{12}{weights}\njo{20}{to}\njo{23}{minimize}\njo{32}{coding}\njo{39}{cost}\njo{44}{of}\njo{47}{last}\njo{52}{prediction
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{update()}\njo{16}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{i}\njo0{=0;}\njo{18}{i$<$ncxt;}\njo{26}{++i)}\njo{31}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{{\keywordfont int}}\njo{10}{err}\njo0{=((y\mlt{2}12)}\njo0{{\mm}pr{[}i])}\njo0{$\ast$7;}\njo0{
}\n\ped \init{6}{}\njo{-6}{assert(err}\njo0{$>$=}\njo0{{\mm}32768}\njo{25}{}\njo0{\&\&}\njo{28}{err$<$32768);}\njo0{
}\n\ped \init{6}{}\njo{-6}{train(\&tx{[}0],}\njo{20}{\&wx{[}cxt{[}i]}\njo0{$\ast$N],}\njo{35}{nx,}\njo{39}{err);}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{nx}\njo0{=base}\njo0{=ncxt}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Input}\njo{11}{x}\njo{13}{(call}\njo{19}{up}\njo{22}{to}\njo{25}{N}\njo{27}{times)
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{add({\keywordfont
int}}\njo{15}{x)}\njo{18}{}\njo0{\brl{} }\n\ped
\init{4}{}\njo{-4}{assert(nx$<$N);}\njo0{ }\n\ped \init{4}{}\njo{-4}{tx{[}nx++]}\njo0{=x;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Set}\njo{9}{a}\njo{11}{context}\njo{19}{(call}\njo{25}{S}\njo{27}{times,}\njo{34}{sum}\njo{38}{of}\njo{41}{ranges}\njo{48}{}\njo0{$<$=}\njo{51}{M)
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{set({\keywordfont
int}}\njo{15}{cx,}\njo{19}{{\keywordfont int}}\njo{23}{range)}\njo{30}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{assert(range}\njo0{$>$=0);}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert(ncxt$<$S);}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert(cx}\njo0{$>$=0);}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert(base}\njo0{+cx$<$M);}\njo0{
}\n\ped \init{4}{}\njo{-4}{cxt{[}ncxt++]}\njo0{=base}\njo0{+cx;}\njo0{
}\n\ped \init{4}{}\njo{-4}{base}\njo0{+=range;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{predict}\njo{13}{next}\njo{18}{bit
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{p()}\njo{10}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont while}}\njo{10}{(nx\&7)}\njo{17}{tx{[}nx++]}\njo0{=0;}\jmpo{30}{}\njo0{/}\njo0{/}\njo{33}{pad
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(mp)}\njo{12}{}\njo0{\brl{}}\jmpo{15}{}\njo0{/}\njo0{/}\njo{18}{combine}\njo{26}{outputs
}\n\ped \init{6}{}\njo{-6}{mp}\njo0{{\mm}$>$update();}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=0;}\njo{20}{i$<$ncxt;}\njo{28}{++i)}\njo{33}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{pr{[}i]}\njo0{=squash(dot{\ul}product(\&tx{[}0],}\njo{41}{\&wx{[}cxt{[}i]}\njo0{$\ast$N],}\njo{56}{nx)\mgt{2}5);}\njo0{
}\n\ped \init{8}{}\njo{-8}{mp}\njo0{{\mm}$>$add(stretch(pr{[}i]));}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{6}{}\njo{-6}{mp}\njo0{{\mm}$>$set(0,}\njo{17}{1);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont return}}\njo{13}{mp}\njo0{{\mm}$>$p();}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{}\njo0{\brl{}}\jmpo{12}{}\njo0{/}\njo0{/}\njo{15}{S}\njo0{=1}\njo{19}{context
}\n\ped \init{6}{}\njo{-6}{{\keywordfont return}}\njo{13}{pr{[}0]}\njo0{=squash(dot{\ul}product(\&tx{[}0],}\njo{46}{\&wx{[}0],}\njo{54}{nx)\mgt{2}8);}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{$\sim$Mixer();}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{Mixer::$\sim$Mixer()}\njo{16}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{delete}\njo{9}{mp;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{Mixer::Mixer({\keywordfont
int}}\njo{17}{n,}\njo{20}{{\keywordfont int}}\njo{24}{m,}\njo{27}{{\keywordfont
int}}\njo{31}{s,}\njo{34}{{\keywordfont int}}\njo{38}{w):
}\n\ped \init{4}{}\njo{-4}{N((n}\njo0{+7)\&}\njo0{{\mm}8),}\njo{17}{M(m),}\njo{23}{S(s),}\njo{29}{tx(N),}\njo{36}{wx(N}\njo0{$\ast$M),}\njo0{
}\n\ped \init{4}{}\njo{-4}{cxt(S),}\njo{12}{ncxt(0),}\njo{21}{base(0),}\njo{30}{nx(0),}\njo{37}{pr(S),}\njo{44}{mp(0)}\njo{50}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{assert(n$>$0}\njo{13}{}\njo0{\&\&}\njo{16}{N$>$0}\njo{20}{}\njo0{\&\&}\njo{23}{(N\&7)}\njo0{==0}\njo{32}{}\njo0{\&\&}\njo{35}{M$>$0);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$S;}\njo{21}{++i)
}\n\ped \init{4}{}\njo{-4}{pr{[}i]}\njo0{=2048;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$N}\njo0{$\ast$M;}\njo{23}{++i)
}\n\ped \init{4}{}\njo{-4}{wx{[}i]}\njo0{=w;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(S$>$1)}\njo{11}{mp}\njo0{=new}\njo{18}{Mixer(S,}\njo{27}{1,}\njo{30}{1,}\njo{33}{0x7fff);}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{APM}\njo{33}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{APM}\njo{7}{maps}\njo{12}{a}\njo{14}{probability}\njo{26}{and}\njo{30}{a}\njo{32}{context}\njo{40}{into}\njo{45}{a}\njo{47}{new}\njo{51}{probability
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{that}\njo{8}{bit}\njo{12}{y}\njo{14}{will}\njo{19}{next}\njo{24}{be}\njo{27}{1.}\jmpo{31}{After}\njo{37}{each}\njo{42}{guess}\njo{48}{it}\njo{51}{updates
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{its}\njo{7}{state}\njo{13}{to}\njo{16}{improve}\njo{24}{future}\njo{31}{guesses.}\jmpo{41}{Methods:
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{APM}\njo{7}{a(N)}\njo{12}{creates}\njo{20}{with}\njo{25}{N}\njo{27}{contexts,}\njo{37}{uses}\njo{42}{66}\njo0{$\ast$N}\njo{47}{bytes}\njo{53}{memory.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{a.p(pr,}\njo{11}{cx,}\njo{15}{rate}\njo0{=8)}\njo{23}{returned}\njo{32}{adjusted}\njo{41}{probability}\njo{53}{in}\njo{56}{context}\njo{64}{cx}\njo{67}{(0}\njo{70}{to
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{N}\njo0{{\mm}1).}\jmpo{12}{rate}\njo{17}{determines}\njo{28}{the}\njo{32}{learning}\njo{41}{rate}\njo{46}{(smaller}\njo{55}{}\njo0{=}\njo{57}{faster,}\njo{65}{{\keywordfont
default}}\njo{73}{8). }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{Probabilities}\njo{19}{are}\njo{23}{scaled}\njo{30}{16}\njo{33}{bits}\njo{38}{(0}\njo0{{\mm}65535).
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{class}\njo{6}{APM}\njo{10}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{index;}\jmpo{17}{}\njo0{/}\njo0{/}\njo{20}{last}\njo{25}{p,}\njo{28}{context
}\n\ped \init{2}{}\njo{-2}{{\keywordfont const}}\njo{8}{{\keywordfont
int}}\njo{12}{N;}\jmpo{17}{}\njo0{/}\njo0{/}\njo{20}{number}\njo{27}{of}\njo{30}{contexts
}\n\ped \init{2}{}\njo{-2}{Array$<$U16$>$}\njo{13}{t;}\jmpo{17}{}\njo0{/}\njo0{/}\njo{20}{{[}N]{[}33]:}\jmpo{30}{p,}\njo{33}{context}\njo{41}{}\njo0{{\mm}$>$}\njo{44}{p
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{APM({\keywordfont
int}}\njo{10}{n);}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
int}}\njo{6}{p({\keywordfont int}}\njo{12}{pr}\njo0{=2048,}\njo{21}{{\keywordfont
int}}\njo{25}{cxt}\njo0{=0,}\njo{32}{{\keywordfont
int}}\njo{36}{rate}\njo0{=8)}\njo{44}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{assert(pr}\njo0{$>$=0}\njo{17}{}\njo0{\&\&}\njo{20}{pr$<$4096}\njo{28}{}\njo0{\&\&}\njo{31}{cxt}\njo0{$>$=0}\njo{38}{}\njo0{\&\&}\njo{41}{cxt$<$N}\njo{47}{}\njo0{\&\&}\njo{50}{rate$>$0}\njo{57}{}\njo0{\&\&}\njo{60}{rate$<$32);}\njo0{
}\n\ped \init{4}{}\njo{-4}{pr}\njo0{=stretch(pr);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{g}\njo0{=(y\mlt{2}16)}\njo0{+(y\mlt{2}rate)}\njo0{{\mm}y}\njo0{{\mm}y;}\njo0{
}\n\ped \init{4}{}\njo{-4}{t{[}index]}\njo{13}{}\njo0{+=}\njo{16}{g}\njo0{{\mm}t{[}index]}\njo{27}{\mgt{2}}\njo{30}{rate;}\njo0{
}\n\ped \init{4}{}\njo{-4}{t{[}index}\njo0{+1]}\njo{15}{}\njo0{+=}\njo{18}{g}\njo0{{\mm}t{[}index}\njo0{+1]}\njo{31}{\mgt{2}}\njo{34}{rate;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont const}}\njo{10}{{\keywordfont
int}}\njo{14}{w}\njo0{=pr\&127;}\jmpo{25}{}\njo0{/}\njo0{/}\njo{28}{interpolation}\njo{42}{weight}\njo{49}{(33}\njo{53}{points)
}\n\ped \init{4}{}\njo{-4}{index}\njo0{=(pr}\njo0{+2048\mgt{2}7)}\njo0{+cxt}\njo0{$\ast$33;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{t{[}index]}\njo0{$\ast$(128}\njo0{{\mm}w)}\njo0{+t{[}index}\njo0{+1]}\njo0{$\ast$w}\njo{41}{\mgt{2}}\njo{44}{11;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{maps}\njo{8}{p,}\njo{11}{cxt}\njo{15}{}\njo0{{\mm}$>$}\njo{18}{p}\njo{20}{initially}\n\ped
\init0{}\njo0{APM::APM({\keywordfont int}}\njo{13}{n):}\njo{17}{index(0),}\njo{27}{N(n),}\njo{33}{t(n}\njo0{$\ast$33)}\njo{41}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$N;}\njo{21}{++i)
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{j}\njo0{=0;}\njo{18}{j$<$33;}\njo{24}{++j)
}\n\ped \init{6}{}\njo{-6}{t{[}i}\njo0{$\ast$33}\njo0{+j]}\njo{16}{}\njo0{=}\njo{18}{i}\njo0{==0}\njo{23}{?}\njo{25}{squash((j}\njo0{{\mm}16)}\njo0{$\ast$128)}\njo0{$\ast$16}\njo{47}{:}\njo{49}{t{[}j];}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{StateMap}\njo{38}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{A}\njo{5}{StateMap}\njo{14}{maps}\njo{19}{a}\njo{21}{nonstationary}\njo{35}{counter}\njo{43}{state}\njo{49}{to}\njo{52}{a}\njo{54}{probability.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{After}\njo{9}{each}\njo{14}{mapping,}\njo{23}{the}\njo{27}{mapping}\njo{35}{is}\njo{38}{adjusted}\njo{47}{to}\njo{50}{improve}\njo{58}{future
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{predictions.}\jmpo{17}{Methods:
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{sm.p(cx)}\njo{12}{converts}\njo{21}{state}\njo{27}{cx}\njo{30}{(0}\njo0{{\mm}255)}\njo{38}{to}\njo{41}{a}\njo{43}{probability}\njo{55}{(0}\njo0{{\mm}4095).
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Counter}\njo{11}{state}\njo{17}{}\njo0{{\mm}$>$}\njo{20}{probability}\njo{32}{}\njo0{$\ast$}\njo{34}{256
}\n\ped \init0{}\njo0{class}\njo{6}{StateMap}\njo{15}{}\njo0{\brl{}
}\n\ped \init0{}\njo0{protected: }\n\ped \init{2}{}\njo{-2}{{\keywordfont
int}}\njo{6}{cxt;}\jmpo{12}{}\njo0{/}\njo0{/}\njo{15}{context
}\n\ped \init{2}{}\njo{-2}{Array$<$U16$>$}\njo{13}{t;}\njo{16}{}\njo0{/}\njo0{/}\njo{19}{256}\njo{23}{states}\njo{30}{}\njo0{{\mm}$>$}\njo{33}{probability}\njo{45}{}\njo0{$\ast$}\njo{47}{64K
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{StateMap();}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{p({\keywordfont
int}}\njo{12}{cx)}\njo{16}{}\njo0{\brl{} }\n\ped
\init{4}{}\njo{-4}{assert(cx}\njo0{$>$=0}\njo{17}{}\njo0{\&\&}\njo{20}{cx$<$t.size());}\njo0{
}\n\ped \init{4}{}\njo{-4}{t{[}cxt]}\njo0{+=(y\mlt{2}16)}\njo0{{\mm}t{[}cxt]}\njo0{+128}\njo{31}{\mgt{2}}\njo{34}{8;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{t{[}cxt}\njo0{=cx]}\njo{21}{\mgt{2}}\njo{24}{4;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{StateMap::StateMap():}\njo{22}{cxt(0),}\njo{30}{t(256)}\njo{37}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$256;}\njo{23}{++i)}\njo{28}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{n0}\njo0{=nex(i,}\njo0{2);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{n1}\njo0{=nex(i,}\njo0{3);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(n0}\njo0{==0)}\njo{15}{n1}\njo0{$\ast$=64;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(n1}\njo0{==0)}\njo{15}{n0}\njo0{$\ast$=64;}\njo0{
}\n\ped \init{4}{}\njo{-4}{t{[}i]}\njo{9}{}\njo0{=}\njo{11}{65536}\njo0{$\ast$(n1}\njo0{+1)}\njo0{/(n0}\njo0{+n1}\njo0{+2);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{hash}\njo{34}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Hash}\njo{8}{2}\njo0{{\mm}5}\njo{12}{ints.
}\n\ped \init0{}\njo0{inline}\njo{7}{U32}\njo{11}{hash(U32}\njo{20}{a,}\njo{23}{U32}\njo{27}{b,}\njo{30}{U32}\njo{34}{c}\njo0{=0xffffffff,}\njo{48}{U32}\njo{52}{d}\njo0{=0xffffffff,}\njo0{
}\n\ped \init{4}{}\njo{-4}{U32}\njo{8}{e}\njo0{=0xffffffff)}\njo{22}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{U32}\njo{6}{h}\njo0{=a}\njo0{$\ast$200002979u}\njo0{+b}\njo0{$\ast$30005491u}\njo0{+c}\njo0{$\ast$50004239u}\njo0{+d}\njo0{$\ast$70004807u}\njo0{+e}\njo0{$\ast$110002499u;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{h$\hat{~}$h\mgt{2}9$\hat{~}$a\mgt{2}2$\hat{~}$b\mgt{2}3$\hat{~}$c\mgt{2}4$\hat{~}$d\mgt{2}5$\hat{~}$e\mgt{2}6;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{30}{BH}\njo{33}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{A}\njo{5}{BH}\njo{8}{maps}\njo{13}{a}\njo{15}{32}\njo{18}{bit}\njo{22}{hash}\njo{27}{to}\njo{30}{an}\njo{33}{array}\njo{39}{of}\njo{42}{B}\njo{44}{bytes}\njo{50}{(checksum}\njo{60}{and}\njo{64}{B}\njo0{{\mm}2}\njo{68}{values)
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{BH}\njo{6}{bh(N);}\njo{13}{creates}\njo{21}{N}\njo{23}{element}\njo{31}{table}\njo{37}{with}\njo{42}{B}\njo{44}{bytes}\njo{50}{each.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{N}\njo{7}{must}\njo{12}{be}\njo{15}{a}\njo{17}{power}\njo{23}{of}\njo{26}{2.}\jmpo{30}{The}\njo{34}{first}\njo{40}{byte}\njo{45}{of}\njo{48}{each}\njo{53}{element}\njo{61}{is
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{reserved}\njo{14}{{\keywordfont
for}}\njo{18}{a}\njo{20}{checksum}\njo{29}{to}\njo{32}{detect}\njo{39}{collisions.}\jmpo{52}{The}\njo{56}{remaining
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{B}\njo0{{\mm}1}\njo{9}{bytes}\njo{15}{are}\njo{19}{values,}\njo{27}{prioritized}\njo{39}{by}\njo{42}{the}\njo{46}{first}\njo{52}{value.}\jmpo{60}{This
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{byte}\njo{10}{is}\njo{13}{0}\njo{15}{to}\njo{18}{mark}\njo{23}{an}\njo{26}{unused}\njo{33}{element.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{bh{[}i]}\njo{9}{returns}\njo{17}{a}\njo{19}{pointer}\njo{27}{to}\njo{30}{the}\njo{34}{i\sq{}th}\njo{39}{element,}\njo{48}{such}\njo{53}{that
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{bh{[}i]{[}0]}\njo{14}{is}\njo{17}{a}\njo{19}{checksum}\njo{28}{of}\njo{31}{i,}\njo{34}{bh{[}i]{[}1]}\njo{43}{is}\njo{46}{the}\njo{50}{priority,}\njo{60}{and}\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{bh{[}i]{[}2..B}\njo0{{\mm}1]}\njo{19}{are}\njo{23}{other}\njo{29}{values}\njo{36}{(0}\njo0{{\mm}255).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{The}\njo{9}{low}\njo{13}{lg(n)}\njo{19}{bits}\njo{24}{as}\njo{27}{an}\njo{30}{index}\njo{36}{into}\njo{41}{the}\njo{45}{table.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{If}\njo{8}{a}\njo{10}{collision}\njo{20}{is}\njo{23}{detected,}\njo{33}{up}\njo{36}{to}\njo{39}{M}\njo{41}{nearby}\njo{48}{locations}\njo{58}{in}\njo{61}{the}\njo{65}{same
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{cache}\njo{11}{line}\njo{16}{are}\njo{20}{tested}\njo{27}{and}\njo{31}{the}\njo{35}{first}\njo{41}{matching}\njo{50}{checksum}\njo{59}{or
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{empty}\njo{11}{element}\njo{19}{is}\njo{22}{returned.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{If}\njo{8}{no}\njo{11}{match}\njo{17}{or}\njo{20}{empty}\njo{26}{element}\njo{34}{is}\njo{37}{found,}\njo{44}{then}\njo{49}{the}\njo{53}{lowest}\njo{60}{priority}\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{element}\njo{13}{is}\njo{16}{replaced.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{2}\njo{5}{byte}\njo{10}{checksum}\njo{19}{with}\njo{24}{LRU}\njo{28}{replacement}\njo{40}{(except}\njo{48}{last}\njo{53}{2}\njo{55}{by}\njo{58}{priority)
}\n\ped \init0{}\njo0{template}\njo{9}{$<${\keywordfont
int}}\njo{14}{B$>$}\njo{17}{class}\njo{23}{BH}\njo{26}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont enum}}\njo{7}{}\njo0{\brl{}M}\njo0{=8\brr{}}\njo0{;}\jmpo{15}{}\njo0{/}\njo0{/}\njo{18}{search}\njo{25}{limit
}\n\ped \init{2}{}\njo{-2}{Array$<$U8,}\njo{12}{64$>$}\njo{16}{t;}\njo{19}{}\njo0{/}\njo0{/}\njo{22}{elements
}\n\ped \init{2}{}\njo{-2}{U32}\njo{6}{n;}\njo{9}{}\njo0{/}\njo0{/}\njo{12}{size}\njo0{{\mm}1
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{BH({\keywordfont
int}}\njo{9}{i):}\njo{13}{t(i}\njo0{$\ast$B),}\njo{21}{n(i}\njo0{{\mm}1)}\njo{28}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{assert(B}\njo0{$>$=2}\njo{16}{}\njo0{\&\&}\njo{19}{i$>$0}\njo{23}{}\njo0{\&\&}\njo{26}{(i\&(i}\njo0{{\mm}1))}\njo0{==0);}\njo{41}{}\njo0{/}\njo0{/}\njo{44}{size}\njo{49}{a}\njo{51}{power}\njo{57}{of}\njo{60}{2?
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{U8}\njo0{$\ast$}\njo{6}{operator{[}](U32}\njo{21}{i);}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{template}\njo{9}{$<${\keywordfont
int}}\njo{14}{B$>$ }\n\ped \init0{}\njo0{inline}\jmpo{8}{U8}\njo0{$\ast$}\njo{12}{BH$<$B$>$::operator{[}](U32}\njo{34}{i)}\njo{37}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{chk}\njo0{=(i\mgt{2}16$\hat{~}$i)\&0xffff;}\njo0{
}\n\ped \init{2}{}\njo{-2}{i}\njo0{=i}\njo0{$\ast$M\&n;}\njo0{
}\n\ped \init{2}{}\njo{-2}{U8}\njo{5}{}\njo0{$\ast$p;}\njo0{
}\n\ped \init{2}{}\njo{-2}{U16}\njo{6}{}\njo0{$\ast$cp;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{j;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{(j}\njo0{=0;}\njo{12}{j$<$M;}\njo{17}{++j)}\njo{22}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{p}\njo0{=\&t{[}(i}\njo0{+j)}\njo0{$\ast$B];}\njo0{
}\n\ped \init{4}{}\njo{-4}{cp}\njo0{=(U16}\njo0{$\ast$)p;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(p{[}2]}\njo0{==0)}\njo{17}{}\njo0{$\ast$cp}\njo0{=chk;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(}\njo0{$\ast$cp}\njo0{==chk)}\njo{18}{{\keywordfont
break};}\jmpo{26}{}\njo0{/}\njo0{/}\njo{29}{found
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(j}\njo0{==0)}\njo{12}{{\keywordfont
return}}\njo{19}{p}\njo0{+1;}\jmpo{25}{}\njo0{/}\njo0{/}\njo{28}{front
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{U8}\njo{12}{tmp{[}B];}\jmpo{21}{}\njo0{/}\njo0{/}\njo{24}{element}\njo{32}{to}\njo{35}{move}\njo{40}{to}\njo{43}{front
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(j}\njo0{==M)}\njo{12}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\mm\mm}j;}\njo0{ }\n\ped
\init{4}{}\njo{-4}{memset(tmp,}\njo{16}{0,}\njo{19}{B);}\njo0{
}\n\ped \init{4}{}\njo{-4}{}\njo0{$\ast$(U16}\njo0{$\ast$)tmp}\njo0{=chk;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(M$>$2}\njo{12}{}\njo0{\&\&}\njo{15}{t{[}(i}\njo0{+j)}\njo0{$\ast$B}\njo0{+2]$>$t{[}(i}\njo0{+j}\njo0{{\mm}1)}\njo0{$\ast$B}\njo0{+2])}\njo{44}{{\mm\mm}j;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont else}}\njo{7}{memcpy(tmp,}\njo{19}{cp,}\njo{23}{B);}\njo0{
}\n\ped \init{2}{}\njo{-2}{memmove(\&t{[}(i}\njo0{+1)}\njo0{$\ast$B],}\njo{23}{\&t{[}i}\njo0{$\ast$B],}\njo{32}{j}\njo0{$\ast$B);}\njo0{
}\n\ped \init{2}{}\njo{-2}{memcpy(\&t{[}i}\njo0{$\ast$B],}\njo{18}{tmp,}\njo{23}{B);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{\&t{[}i}\njo0{$\ast$B}\njo0{+1];}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{28}{ContextMap}\njo{39}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{A}\njo{5}{ContextMap}\njo{16}{maps}\njo{21}{contexts}\njo{30}{to}\njo{33}{a}\njo{35}{bit}\njo{39}{histories}\njo{49}{and}\njo{53}{makes}\njo{59}{predictions
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{to}\njo{6}{a}\njo{8}{Mixer.}\jmpo{16}{Methods}\njo{24}{common}\njo{31}{to}\njo{34}{all}\njo{38}{classes:
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{ContextMap}\njo{14}{cm(M,}\njo{20}{C);}\njo{24}{creates}\njo{32}{using}\njo{38}{about}\njo{44}{M}\njo{46}{bytes}\njo{52}{of}\njo{55}{memory}\njo{62}{(a}\njo{65}{power}\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{of}\njo{8}{2)}\njo{11}{{\keywordfont
for}}\njo{15}{C}\njo{17}{contexts. }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{cm.set(cx);}\jmpo{16}{sets}\njo{21}{the}\njo{25}{next}\njo{30}{context}\njo{38}{to}\njo{41}{cx,}\njo{45}{called}\njo{52}{up}\njo{55}{to}\njo{58}{C}\njo{60}{times
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{cx}\njo{8}{is}\njo{11}{an}\njo{14}{arbitrary}\njo{24}{32}\njo{27}{bit}\njo{31}{value}\njo{37}{that}\njo{42}{identifies}\njo{53}{the}\njo{57}{context.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{It}\njo{8}{should}\njo{15}{be}\njo{18}{called}\njo{25}{before}\njo{32}{predicting}\njo{43}{the}\njo{47}{first}\njo{53}{bit}\njo{57}{of}\njo{60}{each}\njo{65}{byte.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{cm.mix(m)}\njo{13}{updates}\njo{21}{Mixer}\njo{27}{m}\njo{29}{with}\njo{34}{the}\njo{38}{next}\njo{43}{prediction.}\jmpo{56}{Returns}\njo{64}{1
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{{\keywordfont
if}}\njo{8}{context}\njo{16}{cx}\njo{19}{is}\njo{22}{found,}\njo{29}{{\keywordfont
else}}\njo{34}{0.}\jmpo{38}{Then}\njo{43}{it}\njo{46}{extends}\njo{54}{all}\njo{58}{the}\njo{62}{contexts}\njo{71}{with
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{global}\njo{12}{bit}\njo{16}{y.}\jmpo{20}{It}\njo{23}{should}\njo{30}{be}\njo{33}{called}\njo{40}{{\keywordfont
for}}\njo{44}{every}\njo{50}{bit: }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{7}{{\keywordfont
if}}\njo{10}{(bpos}\njo0{==0)}\njo{20}{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{9}{{\keywordfont
for}}\njo{13}{({\keywordfont int}}\njo{18}{i}\njo0{=0;}\njo{23}{i$<$C;}\njo{28}{++i)}\njo{33}{cm.set(cxt{[}i]);}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{7}{cm.mix(m);}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{The}\njo{7}{different}\njo{17}{types}\njo{23}{are}\njo{27}{as}\njo{30}{follows:
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{}\njo0{{\mm}}\njo{5}{RunContextMap.}\jmpo{21}{The}\njo{25}{bit}\njo{29}{history}\njo{37}{is}\njo{40}{a}\njo{42}{count}\njo{48}{of}\njo{51}{0}\njo0{{\mm}255}\njo{57}{consecutive
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{7}{zeros}\njo{13}{or}\njo{16}{ones.}\jmpo{23}{Uses}\njo{28}{4}\njo{30}{bytes}\njo{36}{per}\njo{40}{whole}\njo{46}{byte}\njo{51}{context.}\jmpo{61}{C}\njo0{=1.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{7}{The}\njo{11}{context}\njo{19}{should}\njo{26}{be}\njo{29}{a}\njo{31}{hash.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{}\njo0{{\mm}}\njo{5}{SmallStationaryContextMap.}\jmpo{33}{0}\njo{35}{}\njo0{$<$=}\njo{38}{cx}\njo{41}{$<$}\njo{43}{M}\njo0{/512.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{7}{The}\njo{11}{state}\njo{17}{is}\njo{20}{a}\njo{22}{16}\njo0{{\mm}bit}\njo{29}{probability}\njo{41}{that}\njo{46}{is}\njo{49}{adjusted}\njo{58}{after}\njo{64}{each
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{7}{prediction.}\jmpo{20}{C}\njo0{=1.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{}\njo0{{\mm}}\njo{5}{ContextMap.}\jmpo{18}{For}\njo{22}{large}\njo{28}{contexts,}\njo{38}{C}\njo{40}{}\njo0{$>$=}\njo{43}{1.}\jmpo{47}{Context}\njo{55}{need}\njo{60}{not}\njo{64}{be}\njo{67}{hashed.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Predict}\njo{11}{to}\njo{14}{mixer}\njo{20}{m}\njo{22}{from}\njo{27}{bit}\njo{31}{history}\njo{39}{state}\njo{45}{s,}\njo{48}{using}\njo{54}{sm}\njo{57}{to}\njo{60}{map}\njo{64}{s}\njo{66}{to
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{a}\njo{5}{probability.
}\n\ped \init0{}\njo0{inline}\njo{7}{{\keywordfont int}}\njo{11}{mix2(Mixer\&}\njo{23}{m,}\njo{26}{{\keywordfont
int}}\njo{30}{s,}\njo{33}{StateMap\&}\njo{43}{sm)}\njo{47}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{p1}\njo0{=sm.p(s);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{n0}\njo0{=nex(s,}\njo0{2);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{n1}\njo0{=nex(s,}\njo0{3);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{st}\njo0{=stretch(p1)\mgt{2}2;}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.add(st);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{p1}\njo0{\mgt{2}=4;}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{p0}\njo0{=255}\njo0{{\mm}p1;}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.add(p1}\njo0{{\mm}p0);}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.add(st}\njo0{$\ast$(!n0}\njo0{{\mm}!n1));}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.add((p1\&}\njo0{{\mm}!n0)}\njo0{{\mm}(p0\&}\njo0{{\mm}!n1));}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.add((p1\&}\njo0{{\mm}!n1)}\njo0{{\mm}(p0\&}\njo0{{\mm}!n0));}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{s$>$0;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{A}\njo{5}{RunContextMap}\njo{19}{maps}\njo{24}{a}\njo{26}{context}\njo{34}{into}\njo{39}{the}\njo{43}{next}\njo{48}{byte}\njo{53}{and}\njo{57}{a}\njo{59}{repeat
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{count}\njo{9}{up}\njo{12}{to}\njo{15}{M.}\jmpo{19}{Size}\njo{24}{should}\njo{31}{be}\njo{34}{a}\njo{36}{power}\njo{42}{of}\njo{45}{2.}\jmpo{49}{Memory}\njo{56}{usage}\njo{62}{is}\njo{65}{3M}\njo0{/4.
}\n\ped \init0{}\njo0{class}\njo{6}{RunContextMap}\njo{20}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{BH$<$4$>$}\njo{8}{t;}\njo0{ }\n\ped
\init{2}{}\njo{-2}{U8}\njo0{$\ast$}\njo{6}{cp;}\njo0{
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{RunContextMap({\keywordfont
int}}\njo{20}{m):}\njo{24}{t(m}\njo0{/4)}\njo{31}{}\njo0{\brl{}cp}\njo0{=t{[}0]}\njo0{+1;}\njo0{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{set(U32}\njo{15}{cx)}\njo{19}{}\njo0{\brl{}}\jmpo{22}{}\njo0{/}\njo0{/}\njo{25}{update}\njo{32}{count
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(cp{[}0]}\njo0{==0}\njo{17}{}\njo0{$\mid$$\mid$}\njo{20}{cp{[}1]}\njo0{!=buf(1))}\njo{35}{cp{[}0]}\njo0{=1,}\njo{44}{cp{[}1]}\njo0{=buf(1);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{{\keywordfont
if}}\njo{12}{(cp{[}0]$<$255)}\njo{24}{++cp{[}0];}\njo0{
}\n\ped \init{4}{}\njo{-4}{cp}\njo0{=t{[}cx]}\njo0{+1;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{p()}\njo{10}{}\njo0{\brl{}}\jmpo{13}{}\njo0{/}\njo0{/}\njo{16}{predict}\njo{24}{next}\njo{29}{bit
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(cp{[}1]}\njo0{+256\mgt{2}8}\njo0{{\mm}bpos}\njo0{==c0)
}\n\ped \init{6}{}\njo{-6}{{\keywordfont return}}\njo{13}{((cp{[}1]\mgt{2}7}\njo0{{\mm}bpos\&1)}\njo0{$\ast$2}\njo0{{\mm}1)}\njo0{$\ast$ilog(cp{[}0]}\njo0{+1)}\njo0{$\ast$8;}\njo0{
}\n\ped \init{4}{}\njo{-4}{else }\n\ped \init{6}{}\njo{-6}{{\keywordfont
return}}\njo{13}{0;}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{mix(Mixer\&}\njo{17}{m)}\njo{20}{}\njo0{\brl{}}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{{\keywordfont
return}}\njo{33}{run}\njo{37}{length }\n\ped \init{4}{}\njo{-4}{m.add(p());}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{cp{[}0]}\njo0{!=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Context}\njo{11}{is}\njo{14}{looked}\njo{21}{up}\njo{24}{directly.}\jmpo{35}{m}\njo0{=size}\njo{42}{is}\njo{45}{power}\njo{51}{of}\njo{54}{2}\njo{56}{in}\njo{59}{bytes.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Context}\njo{11}{should}\njo{18}{be}\njo{21}{$<$}\njo{23}{m}\njo0{/512.}\jmpo{31}{High}\njo{36}{bits}\njo{41}{are}\njo{45}{discarded.
}\n\ped \init0{}\njo0{class}\njo{6}{SmallStationaryContextMap}\njo{32}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{Array$<$U16$>$}\njo{13}{t;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{cxt;}\njo0{
}\n\ped \init{2}{}\njo{-2}{U16}\njo{6}{}\njo0{$\ast$cp;}\njo0{
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{SmallStationaryContextMap({\keywordfont
int}}\njo{32}{m):}\njo{36}{t(m}\njo0{/2),}\njo{44}{cxt(0)}\njo{51}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{assert((m}\njo0{/2\&m}\njo0{/2}\njo0{{\mm}1)}\njo0{==0);}\njo{28}{}\njo0{/}\njo0{/}\njo{31}{power}\njo{37}{of}\njo{40}{2?
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{i}\njo0{=0;}\njo{18}{i$<$t.size();}\njo{30}{++i)
}\n\ped \init{6}{}\njo{-6}{t{[}i]}\njo0{=32768;}\njo0{
}\n\ped \init{4}{}\njo{-4}{cp}\njo0{=\&t{[}0];}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{set(U32}\njo{15}{cx)}\njo{19}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{cxt}\njo0{=cx}\njo0{$\ast$256\&t.size()}\njo0{{\mm}256;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{mix(Mixer\&}\njo{18}{m,}\njo{21}{{\keywordfont
int}}\njo{25}{rate}\njo0{=7)}\njo{33}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{}\njo0{$\ast$cp}\njo{8}{}\njo0{+=}\njo{11}{(y\mlt{2}16)}\njo0{{\mm}}\njo0{$\ast$cp}\njo0{+(1\mlt{2}rate}\njo0{{\mm}1)}\njo{35}{\mgt{2}}\njo{38}{rate;}\njo0{
}\n\ped \init{4}{}\njo{-4}{cp}\njo0{=\&t{[}cxt}\njo0{+c0];}\njo0{
}\n\ped \init{4}{}\njo{-4}{m.add(stretch(}\njo0{$\ast$cp\mgt{2}4));}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Context}\njo{11}{map}\njo{15}{{\keywordfont
for}}\njo{19}{large}\njo{25}{contexts.}\jmpo{36}{Most}\njo{41}{modeling}\njo{50}{uses}\njo{55}{this}\njo{60}{type}\njo{65}{of}\njo{68}{context
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{map.}\jmpo{9}{It}\njo{12}{includes}\njo{21}{a}\njo{23}{built}\njo{29}{in}\njo{32}{RunContextMap}\njo{46}{to}\njo{49}{predict}\njo{57}{the}\njo{61}{last}\njo{66}{byte}\njo{71}{seen
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{in}\njo{6}{the}\njo{10}{same}\njo{15}{context,}\njo{24}{and}\njo{28}{also}\njo{33}{bit}\njo0{{\mm}level}\njo{43}{contexts}\njo{52}{that}\njo{57}{map}\njo{61}{to}\njo{64}{a}\njo{66}{bit
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{history}\njo{11}{state.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Bit}\njo{7}{histories}\njo{17}{are}\njo{21}{stored}\njo{28}{in}\njo{31}{a}\njo{33}{hash}\njo{38}{table.}\jmpo{46}{The}\njo{50}{table}\njo{56}{is}\njo{59}{organized}\njo{69}{into
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{64}\njo0{{\mm}byte}\njo{11}{buckets}\njo{19}{alinged}\njo{27}{on}\njo{30}{cache}\njo{36}{page}\njo{41}{boundaries.}\jmpo{54}{Each}\njo{59}{bucket}\njo{66}{contains}\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{a}\njo{5}{hash}\njo{10}{chain}\njo{16}{of}\njo{19}{7}\njo{21}{elements,}\njo{31}{plus}\njo{36}{a}\njo{38}{2}\njo{40}{element}\njo{48}{queue}\njo{54}{(packed}\njo{62}{into}\njo{67}{1}\njo{69}{byte)}\njo{75}{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{of}\njo{6}{the}\njo{10}{last}\njo{15}{2}\njo{17}{elements}\njo{26}{accessed}\njo{35}{{\keywordfont
for}}\njo{39}{LRU}\njo{43}{replacement.}\jmpo{57}{Each}\njo{62}{element}\njo{70}{has
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{a}\njo{5}{2}\njo{7}{byte}\njo{12}{checksum}\njo{21}{{\keywordfont
for}}\njo{25}{detecting}\njo{35}{collisions,}\njo{47}{and}\njo{51}{an}\njo{54}{array}\njo{60}{of}\njo{63}{7}\njo{65}{bit}\njo{69}{history
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{states}\njo{10}{indexed}\njo{18}{by}\njo{21}{the}\njo{25}{last}\njo{30}{0}\njo{32}{to}\njo{35}{2}\njo{37}{bits}\njo{42}{of}\njo{45}{context.}\jmpo{55}{The}\njo{59}{buckets}\njo{67}{are}\njo{71}{indexed
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{by}\njo{6}{a}\njo{8}{context}\njo{16}{ending}\njo{23}{after}\njo{29}{0,}\njo{32}{2,}\njo{35}{or}\njo{38}{5}\njo{40}{bits}\njo{45}{of}\njo{48}{the}\njo{52}{current}\njo{60}{byte.}\jmpo{67}{Thus,}\njo{73}{each
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{byte}\njo{8}{modeled}\njo{16}{results}\njo{24}{in}\njo{27}{3}\njo{29}{main}\njo{34}{memory}\njo{41}{accesses}\njo{50}{per}\njo{54}{context,}\njo{63}{with}\njo{68}{all}\njo{72}{other
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{accesses}\njo{12}{to}\njo{15}{cache.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{On}\njo{6}{bits}\njo{11}{0,}\njo{14}{2}\njo{16}{and}\njo{20}{5,}\njo{23}{the}\njo{27}{context}\njo{35}{is}\njo{38}{updated}\njo{46}{and}\njo{50}{a}\njo{52}{new}\njo{56}{bucket}\njo{63}{is}\njo{66}{selected.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{The}\njo{7}{most}\njo{12}{recently}\njo{21}{accessed}\njo{30}{element}\njo{38}{is}\njo{41}{tried}\njo{47}{first,}\njo{54}{by}\njo{57}{comparing}\njo{67}{the
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{16}\njo{6}{bit}\njo{10}{checksum,}\njo{20}{then}\njo{25}{the}\njo{29}{7}\njo{31}{elements}\njo{40}{are}\njo{44}{searched}\njo{53}{linearly.}\jmpo{64}{If}\njo{67}{no}\njo{70}{match
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{is}\njo{6}{found,}\njo{13}{then}\njo{18}{the}\njo{22}{element}\njo{30}{with}\njo{35}{the}\njo{39}{lowest}\njo{46}{priority}\njo{55}{among}\njo{61}{the}\njo{65}{5}\njo{67}{elements}\njo{76}{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{not}\njo{7}{in}\njo{10}{the}\njo{14}{LRU}\njo{18}{queue}\njo{24}{is}\njo{27}{replaced.}\jmpo{38}{After}\njo{44}{a}\njo{46}{replacement,}\njo{59}{the}\njo{63}{queue}\njo{69}{is
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{emptied}\njo{11}{(so}\njo{15}{that}\njo{20}{consecutive}\njo{32}{misses}\njo{39}{favor}\njo{45}{a}\njo{47}{LFU}\njo{51}{replacement}\njo{63}{policy).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{In}\njo{6}{all}\njo{10}{cases,}\njo{17}{the}\njo{21}{found}\njo0{/replaced}\njo{36}{element}\njo{44}{is}\njo{47}{put}\njo{51}{in}\njo{54}{the}\njo{58}{front}\njo{64}{of}\njo{67}{the}\njo{71}{queue.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{The}\njo{7}{priority}\njo{16}{is}\njo{19}{the}\njo{23}{state}\njo{29}{number}\njo{36}{of}\njo{39}{the}\njo{43}{first}\njo{49}{element}\njo{57}{(the}\njo{62}{one}\njo{66}{with}\njo{71}{0
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{additional}\njo{14}{bits}\njo{19}{of}\njo{22}{context).}\jmpo{33}{The}\njo{37}{states}\njo{44}{are}\njo{48}{sorted}\njo{55}{by}\njo{58}{increasing}\njo{69}{n0}\njo0{+n1
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{(number}\njo{11}{of}\njo{14}{bits}\njo{19}{seen),}\njo{26}{implementing}\njo{39}{a}\njo{41}{LFU}\njo{45}{replacement}\njo{57}{policy.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{When}\njo{8}{the}\njo{12}{context}\njo{20}{ends}\njo{25}{on}\njo{28}{a}\njo{30}{byte}\njo{35}{boundary}\njo{44}{(bit}\njo{49}{0),}\njo{53}{only}\njo{58}{3}\njo{60}{of}\njo{63}{the}\njo{67}{7}\njo{69}{bit
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{history}\njo{11}{states}\njo{18}{are}\njo{22}{used.}\jmpo{29}{The}\njo{33}{remaining}\njo{43}{4}\njo{45}{bytes}\njo{51}{implement}\njo{61}{a}\njo{63}{run}\njo{67}{model}\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{as}\njo{6}{follows:}\njo{15}{$<$count:7,}\njo0{d:1$>$}\njo{29}{$<$b1$>$}\njo{34}{$<$b2$>$}\njo{39}{$<$b3$>$}\njo{44}{where}\njo{50}{$<$b1$>$}\njo{55}{is}\njo{58}{the}\njo{62}{last}\njo{67}{byte
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{seen,}\njo{9}{possibly}\njo{18}{repeated,}\njo{28}{and}\njo{32}{$<$b2$>$}\njo{37}{and}\njo{41}{$<$b3$>$}\njo{46}{are}\njo{50}{the}\njo{54}{two}\njo{58}{bytes}\njo{64}{seen
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{before}\njo{10}{the}\njo{14}{first}\njo{20}{$<$b1$>$.}\jmpo{27}{$<$count:7,}\njo0{d:1$>$}\njo{41}{is}\njo{44}{a}\njo{46}{7}\njo{48}{bit}\njo{52}{count}\njo{58}{and}\njo{62}{a}\njo{64}{1}\njo{66}{bit
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{flag.}\jmpo{10}{If}\njo{13}{d}\njo0{=0}\njo{17}{then}\njo{22}{$<$count$>$}\njo{30}{}\njo0{=}\njo{32}{1..127}\njo{39}{is}\njo{42}{the}\njo{46}{number}\njo{53}{of}\njo{56}{repeats}\njo{64}{of}\njo{67}{$<$b1$>$
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{and}\njo{7}{no}\njo{10}{other}\njo{16}{bytes}\njo{22}{have}\njo{27}{been}\njo{32}{seen,}\njo{38}{and}\njo{42}{$<$b2$>$$<$b3$>$}\njo{51}{are}\njo{55}{not}\njo{59}{used.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{If}\njo{6}{$<$d$>$}\njo{10}{}\njo0{=}\njo{12}{1}\njo{14}{then}\njo{19}{the}\njo{23}{history}\njo{31}{is}\njo{34}{$<$b3$>$,}\njo{40}{$<$b2$>$,}\njo{46}{and}\njo{50}{$<$count$>$}\njo{58}{}\njo0{{\mm}}\njo{60}{2}\njo{62}{repeats
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{of}\njo{6}{$<$b1$>$.}\jmpo{13}{In}\njo{16}{this}\njo{21}{case,}\njo{27}{$<$b3$>$}\njo{32}{is}\njo{35}{valid}\njo{41}{only}\njo{46}{{\keywordfont
if}}\njo{49}{$<$count$>$}\njo{57}{}\njo0{$>$=}\njo{60}{3}\njo{62}{and
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{$<$b2$>$}\njo{8}{is}\njo{11}{valid}\njo{17}{only}\njo{22}{{\keywordfont
if}}\njo{25}{$<$count$>$}\njo{33}{}\njo0{$>$=}\njo{36}{2.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{As}\njo{6}{an}\njo{9}{optimization,}\njo{23}{the}\njo{27}{last}\njo{32}{two}\njo{36}{hash}\njo{41}{elements}\njo{50}{of}\njo{53}{each}\njo{58}{byte}\njo{63}{(representing
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{contexts}\njo{12}{with}\njo{17}{2}\njo0{{\mm}7}\njo{21}{bits)}\njo{27}{are}\njo{31}{not}\njo{35}{updated}\njo{43}{until}\njo{49}{a}\njo{51}{context}\njo{59}{is}\njo{62}{seen}\njo{67}{for
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{a}\njo{5}{second}\njo{12}{time.}\jmpo{19}{This}\njo{24}{is}\njo{27}{indicated}\njo{37}{by}\njo{40}{$<$count,}\njo0{d$>$}\njo{50}{}\njo0{=}\njo{52}{$<$1,}\njo0{0$>$.}\jmpo{60}{After}\njo{66}{update,}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{$<$count,}\njo0{d$>$}\njo{13}{is}\njo{16}{updated}\njo{24}{to}\njo{27}{$<$2,}\njo0{0$>$}\njo{33}{or}\njo{36}{$<$2,}\njo0{1$>$.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{class}\njo{6}{ContextMap}\njo{17}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{{\keywordfont const}}\njo{8}{{\keywordfont
int}}\njo{12}{C;}\jmpo{16}{}\njo0{/}\njo0{/}\njo{19}{max}\njo{23}{number}\njo{30}{of}\njo{33}{contexts
}\n\ped \init{2}{}\njo{-2}{class}\njo{8}{E}\njo{10}{}\njo0{\brl{}}\jmpo{13}{}\njo0{/}\njo0{/}\njo{16}{hash}\njo{21}{element,}\njo{30}{64}\njo{33}{bytes
}\n\ped \init{4}{}\njo{-4}{U16}\njo{8}{chk{[}7];}\jmpo{17}{}\njo0{/}\njo0{/}\njo{20}{byte}\njo{25}{context}\njo{33}{checksums
}\n\ped \init{4}{}\njo{-4}{U8}\njo{7}{last;}\jmpo{17}{}\njo0{/}\njo0{/}\njo{20}{last}\njo{25}{2}\njo{27}{accesses}\njo{36}{(0}\njo0{{\mm}6)}\njo{42}{in}\njo{45}{low,}\njo{50}{high}\njo{55}{nibble
}\n\ped \init{2}{}\njo{-2}{public: }\n\ped \init{4}{}\njo{-4}{U8}\njo{7}{bh{[}7]{[}7];}\njo{17}{}\njo0{/}\njo0{/}\njo{20}{byte}\njo{25}{context,}\njo{34}{3}\njo0{{\mm}bit}\njo{40}{context}\njo{48}{}\njo0{{\mm}$>$}\njo{51}{bit}\njo{55}{history}\njo{63}{state
}\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{bh{[}]{[}0]}\njo{17}{}\njo0{=}\njo{19}{1st}\njo{23}{bit,}\njo{28}{bh{[}]{[}1,}\njo0{2]}\njo{38}{}\njo0{=}\njo{40}{2nd}\njo{44}{bit,}\njo{49}{bh{[}]{[}3..6]}\njo{60}{}\njo0{=}\njo{62}{3rd}\njo{66}{bit}\n\ped
\init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{bh{[}]{[}0]}\njo{17}{is}\njo{20}{also}\njo{25}{a}\njo{27}{replacement}\njo{39}{priority,}\njo{49}{0}\njo{51}{}\njo0{=}\njo{53}{empty
}\n\ped \init{4}{}\njo{-4}{U8}\njo0{$\ast$}\njo{8}{get(U16}\njo{16}{chk);}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{Find}\njo{31}{element}\njo{39}{(0}\njo0{{\mm}6)}\njo{45}{matching}\njo{54}{checksum.
}\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{If}\njo{12}{not}\njo{16}{found,}\njo{23}{insert}\njo{30}{or}\njo{33}{replace}\njo{41}{lowest}\njo{48}{priority}\njo{57}{(not}\njo{62}{last).
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{;}\njo0{
}\n\ped \init{2}{}\njo{-2}{Array$<$E,}\njo{11}{64$>$}\njo{15}{t;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{bit}\njo{26}{histories}\njo{36}{{\keywordfont
for}}\njo{40}{bits}\njo{45}{0}\njo0{{\mm}1,}\njo{50}{2}\njo0{{\mm}4,}\njo{55}{5}\njo0{{\mm}7
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{For}\njo{11}{0}\njo0{{\mm}1,}\njo{16}{also}\njo{21}{contains}\njo{30}{a}\njo{32}{run}\njo{36}{count}\njo{42}{in}\njo{45}{bh{[}]{[}4]}\njo{53}{and}\njo{57}{value}\njo{63}{in}\njo{66}{bh{[}]{[}5]
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{and}\njo{11}{pending}\njo{19}{update}\njo{26}{count}\njo{32}{in}\njo{35}{bh{[}7]
}\n\ped \init{2}{}\njo{-2}{Array$<$U8}\njo0{$\ast$$>$}\njo{13}{cp;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{C}\njo{24}{pointers}\njo{33}{to}\njo{36}{current}\njo{44}{bit}\njo{48}{history
}\n\ped \init{2}{}\njo{-2}{Array$<$U8}\njo0{$\ast$$>$}\njo{13}{cp0;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{First}\njo{28}{element}\njo{36}{of}\njo{39}{7}\njo{41}{element}\njo{49}{array}\njo{55}{containing}\njo{66}{cp{[}i]
}\n\ped \init{2}{}\njo{-2}{Array$<$U32$>$}\njo{13}{cxt;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{C}\njo{24}{whole}\njo{30}{byte}\njo{35}{contexts}\njo{44}{(hashes)
}\n\ped \init{2}{}\njo{-2}{Array$<$U8}\njo0{$\ast$$>$}\njo{13}{runp;}\njo{19}{}\njo0{/}\njo0{/}\njo{22}{C}\njo{24}{{[}0..3]}\njo{31}{}\njo0{=}\njo{33}{count,}\njo{40}{value,}\njo{47}{unused,}\njo{55}{unused
}\n\ped \init{2}{}\njo{-2}{StateMap}\njo{11}{}\njo0{$\ast$sm;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{C}\njo{24}{maps}\njo{29}{of}\njo{32}{state}\njo{38}{}\njo0{{\mm}$>$}\njo{41}{p
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{cn;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{Next}\njo{27}{context}\njo{35}{to}\njo{38}{set}\njo{42}{by}\njo{45}{set()
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{update(U32}\njo{18}{cx,}\njo{22}{{\keywordfont
int}}\njo{26}{c);}\jmpo{31}{}\njo0{/}\njo0{/}\njo{34}{train}\njo{40}{model}\njo{46}{that}\njo{51}{context}\njo{59}{cx}\njo{62}{predicts}\njo{71}{c
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{mix1(Mixer\&}\njo{18}{m,}\njo{21}{{\keywordfont
int}}\njo{25}{cc,}\njo{29}{{\keywordfont int}}\njo{33}{bp,}\njo{37}{{\keywordfont
int}}\njo{41}{c1,}\njo{45}{{\keywordfont int}}\njo{49}{y1);}\njo0{
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{mix()}\njo{13}{with}\njo{18}{global}\njo{25}{context}\njo{33}{passed}\njo{40}{as}\njo{43}{arguments}\njo{53}{to}\njo{56}{improve}\njo{64}{speed.
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{ContextMap({\keywordfont
int}}\njo{17}{m,}\njo{20}{{\keywordfont int}}\njo{24}{c}\njo0{=1);}\jmpo{31}{}\njo0{/}\njo0{/}\njo{34}{m}\njo{36}{}\njo0{=}\njo{38}{memory}\njo{45}{in}\njo{48}{bytes,}\njo{55}{a}\njo{57}{power}\njo{63}{of}\njo{66}{2,}\njo{69}{C}\njo{71}{}\njo0{=}\njo{73}{c
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{set(U32}\njo{15}{cx);}\jmpo{22}{}\njo0{/}\njo0{/}\njo{25}{set}\njo{29}{next}\njo{34}{whole}\njo{40}{byte}\njo{45}{context
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{mix(Mixer\&}\njo{17}{m)}\njo{20}{}\njo0{\brl{}{\keywordfont
return}}\njo{28}{mix1(m,}\njo{36}{c0,}\njo{40}{bpos,}\njo{46}{buf(1),}\njo{54}{y);}\njo0{\brr{}}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Find}\njo{8}{or}\njo{11}{create}\njo{18}{hash}\njo{23}{element}\njo{31}{matching}\njo{40}{checksum}\njo{49}{ch
}\n\ped \init0{}\njo0{inline}\njo{7}{U8}\njo0{$\ast$}\njo{11}{ContextMap::E::get(U16}\njo{34}{ch)}\njo{38}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(chk{[}last\&15]}\njo0{==ch)}\njo{24}{{\keywordfont
return}}\njo{31}{\&bh{[}last\&15]{[}0];}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{b}\njo0{=0xffff,}\njo{16}{bi}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$7;}\njo{21}{++i)}\njo{26}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(chk{[}i]}\njo0{==ch)}\njo{20}{{\keywordfont
return}}\njo{27}{last}\njo0{=last\mlt{2}4$\mid$i,}\njo{43}{\&bh{[}i]{[}0];}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{pri}\njo0{=bh{[}i]{[}0];}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{((last\&15)}\njo0{!=i}\njo{21}{}\njo0{\&\&}\njo{24}{last\mgt{2}4}\njo0{!=i}\njo{35}{}\njo0{\&\&}\njo{38}{pri$<$b)}\njo{45}{b}\njo0{=pri,}\njo{52}{bi}\njo0{=i;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{last}\njo0{=0xf0$\mid$bi,}\njo{23}{chk{[}bi]}\njo0{=ch,}\njo{35}{(U8}\njo0{$\ast$)memset(\&bh{[}bi]{[}0],}\njo{59}{0,}\njo{62}{7);}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Construct}\njo{13}{using}\njo{19}{m}\njo{21}{bytes}\njo{27}{of}\njo{30}{memory}\njo{37}{{\keywordfont
for}}\njo{41}{c}\njo{43}{contexts }\n\ped \init0{}\njo0{ContextMap::ContextMap({\keywordfont
int}}\njo{27}{m,}\njo{30}{{\keywordfont int}}\njo{34}{c):}\njo{38}{C(c),}\njo{44}{t(m\mgt{2}6),}\njo{53}{cp(c),}\njo{60}{cp0(c),}\njo0{
}\n\ped \init{4}{}\njo{-4}{cxt(c),}\njo{12}{runp(c),}\njo{21}{cn(0)}\njo{27}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{assert(m}\njo0{$>$=64}\njo{15}{}\njo0{\&\&}\njo{18}{(m\&m}\njo0{{\mm}1)}\njo0{==0);}\jmpo{32}{}\njo0{/}\njo0{/}\njo{35}{power}\njo{41}{of}\njo{44}{2?
}\n\ped \init{2}{}\njo{-2}{assert({\keywordfont sizeof}(E)}\njo0{==64);}\njo0{
}\n\ped \init{2}{}\njo{-2}{sm}\njo0{=new}\njo{9}{StateMap{[}C];}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$C;}\njo{21}{++i)}\njo{26}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{cp0{[}i]}\njo0{=cp{[}i]}\njo0{=\&t{[}0].bh{[}0]{[}0];}\njo0{
}\n\ped \init{4}{}\njo{-4}{runp{[}i]}\njo0{=cp{[}i]}\njo0{+3;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Set}\njo{7}{the}\njo{11}{i\sq{}th}\njo{16}{context}\njo{24}{to}\njo{27}{cx
}\n\ped \init0{}\njo0{inline}\njo{7}{{\keywordfont void}}\njo{12}{ContextMap::set(U32}\njo{32}{cx)}\njo{36}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{i}\njo0{=cn++;}\njo0{
}\n\ped \init{2}{}\njo{-2}{assert(i}\njo0{$>$=0}\njo{14}{}\njo0{\&\&}\njo{17}{i$<$C);}\njo0{
}\n\ped \init{2}{}\njo{-2}{cx}\njo0{=cx}\njo0{$\ast$987654323}\njo0{+i;}\jmpo{22}{}\njo0{/}\njo0{/}\njo{25}{permute}\njo{33}{(don\sq{}t}\njo{40}{hash)}\njo{46}{cx}\njo{49}{to}\njo{52}{spread}\njo{59}{the}\njo{63}{distribution
}\n\ped \init{2}{}\njo{-2}{cx}\njo0{=cx\mlt{2}16$\mid$cx\mgt{2}16;}\njo0{
}\n\ped \init{2}{}\njo{-2}{cxt{[}i]}\njo0{=cx}\njo0{$\ast$123456791}\njo0{+i;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Update}\njo{10}{the}\njo{14}{model}\njo{20}{with}\njo{25}{bit}\njo{29}{y1,}\njo{33}{and}\njo{37}{predict}\njo{45}{next}\njo{50}{bit}\njo{54}{to}\njo{57}{mixer}\njo{63}{m.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Context:}\njo{12}{cc}\njo0{=c0,}\njo{19}{bp}\njo0{=bpos,}\njo{28}{c1}\njo0{=buf(1),}\njo{39}{y1}\njo0{=y.
}\n\ped \init0{}\njo0{{\keywordfont int}}\njo{4}{ContextMap::mix1(Mixer\&}\njo{28}{m,}\njo{31}{{\keywordfont
int}}\njo{35}{cc,}\njo{39}{{\keywordfont int}}\njo{43}{bp,}\njo{47}{{\keywordfont
int}}\njo{51}{c1,}\njo{55}{{\keywordfont int}}\njo{59}{y1)}\njo{63}{}\njo0{\brl{}
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Update}\njo{12}{model}\njo{18}{with}\njo{23}{y
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{result}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{i$<$cn;}\njo{22}{++i)}\njo{27}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(cp{[}i])}\njo{15}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{assert(cp{[}i]}\njo0{$>$=\&t{[}0].bh{[}0]{[}0]}\njo{35}{}\njo0{\&\&}\njo{38}{cp{[}i]}\njo0{$<$=\&t{[}t.size()}\njo0{{\mm}1].bh{[}6]{[}6]);}\njo0{
}\n\ped \init{6}{}\njo{-6}{assert((long(cp{[}i])\&63)}\njo0{$>$=15);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont int}}\njo{10}{ns}\njo0{=nex(}\njo0{$\ast$cp{[}i],}\njo{25}{y1);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(ns}\njo0{$>$=204}\njo{18}{}\njo0{\&\&}\njo{21}{rnd()}\njo{27}{\mlt{2}}\njo{30}{(452}\njo0{{\mm}ns\mgt{2}3))}\njo{43}{ns}\njo0{{\mm}=4;}\jmpo{51}{}\njo0{/}\njo0{/}\njo{54}{probabilistic}\njo{68}{increment
}\n\ped \init{6}{}\njo{-6}{}\njo0{$\ast$cp{[}i]}\njo0{=ns;}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Update}\njo{14}{context}\njo{22}{pointers
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(bpos$>$1}\njo{15}{}\njo0{\&\&}\njo{18}{runp{[}i]{[}0]}\njo0{==0)
}\n\ped \init{6}{}\njo{-6}{cp{[}i]}\njo0{=0;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{{\keywordfont
if}}\njo{12}{(bpos}\njo0{==1}\njo0{$\mid$$\mid$bpos}\njo0{==3}\njo0{$\mid$$\mid$bpos}\njo0{==6)
}\n\ped \init{6}{}\njo{-6}{cp{[}i]}\njo0{=cp0{[}i]}\njo0{+1}\njo0{+(cc\&1);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{{\keywordfont
if}}\njo{12}{(bpos}\njo0{==4}\njo0{$\mid$$\mid$bpos}\njo0{==7)
}\n\ped \init{6}{}\njo{-6}{cp{[}i]}\njo0{=cp0{[}i]}\njo0{+3}\njo0{+(cc\&3);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{cp0{[}i]}\njo0{=cp{[}i]}\njo0{=t{[}cxt{[}i]}\njo0{+cc\&t.size()}\njo0{{\mm}1].get(cxt{[}i]\mgt{2}16);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{Update}\njo{16}{pending}\njo{24}{bit}\njo{28}{histories}\njo{38}{{\keywordfont
for}}\njo{42}{bits}\njo{47}{2}\njo0{{\mm}7 }\n\ped
\init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(bpos}\njo0{==0)}\njo{19}{}\njo0{\brl{}
}\n\ped \init{8}{}\njo{-8}{{\keywordfont if}}\njo{11}{(cp0{[}i]{[}3]}\njo0{==2)}\njo{26}{}\njo0{\brl{}
}\n\ped \init{10}{}\njo{-10}{{\keywordfont const}}\njo{16}{{\keywordfont
int}}\njo{20}{c}\njo0{=cp0{[}i]{[}4]}\njo0{+256;}\njo0{
}\n\ped \init{10}{}\njo{-10}{U8}\njo{13}{}\njo0{$\ast$p}\njo0{=t{[}cxt{[}i]}\njo0{+(c\mgt{2}6)\&t.size()}\njo0{{\mm}1].get(cxt{[}i]\mgt{2}16);}\njo0{
}\n\ped \init{10}{}\njo{-10}{p{[}0]}\njo0{=1}\njo0{+((c\mgt{2}5)\&1);}\njo0{
}\n\ped \init{10}{}\njo{-10}{p{[}1}\njo0{+((c\mgt{2}5)\&1)]}\njo0{=1}\njo0{+((c\mgt{2}4)\&1);}\njo0{
}\n\ped \init{10}{}\njo{-10}{p{[}3}\njo0{+((c\mgt{2}4)\&3)]}\njo0{=1}\njo0{+((c\mgt{2}3)\&1);}\njo0{
}\n\ped \init{10}{}\njo{-10}{p}\njo0{=t{[}cxt{[}i]}\njo0{+(c\mgt{2}3)\&t.size()}\njo0{{\mm}1].get(cxt{[}i]\mgt{2}16);}\njo0{
}\n\ped \init{10}{}\njo{-10}{p{[}0]}\njo0{=1}\njo0{+((c\mgt{2}2)\&1);}\njo0{
}\n\ped \init{10}{}\njo{-10}{p{[}1}\njo0{+((c\mgt{2}2)\&1)]}\njo0{=1}\njo0{+((c\mgt{2}1)\&1);}\njo0{
}\n\ped \init{10}{}\njo{-10}{p{[}3}\njo0{+((c\mgt{2}1)\&3)]}\njo0{=1}\njo0{+(c\&1);}\njo0{
}\n\ped \init{10}{}\njo{-10}{cp0{[}i]{[}6]}\njo0{=0;}\njo0{
}\n\ped \init{8}{}\njo{-8}{\brr{}}\njo0{ }\n\ped
\init{8}{}\njo{-8}{}\njo0{/}\njo0{/}\njo{11}{Update}\njo{18}{run}\njo{22}{count}\njo{28}{of}\njo{31}{previous}\njo{40}{context
}\n\ped \init{8}{}\njo{-8}{{\keywordfont if}}\njo{11}{(runp{[}i]{[}0]}\njo0{==0)}\jmpo{28}{}\njo0{/}\njo0{/}\njo{31}{new}\njo{35}{context}\n\ped
\init{10}{}\njo{-10}{runp{[}i]{[}0]}\njo0{=2,}\njo{24}{runp{[}i]{[}1]}\njo0{=c1;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont else}}\njo{13}{{\keywordfont
if}}\njo{16}{(runp{[}i]{[}1]}\njo0{!=c1)}\jmpo{34}{}\njo0{/}\njo0{/}\njo{37}{different}\njo{47}{byte}\njo{52}{in}\njo{55}{context
}\n\ped \init{10}{}\njo{-10}{runp{[}i]{[}0]}\njo0{=1,}\njo{24}{runp{[}i]{[}1]}\njo0{=c1;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont else}}\njo{13}{{\keywordfont
if}}\njo{16}{(runp{[}i]{[}0]$<$254)}\jmpo{34}{}\njo0{/}\njo0{/}\njo{37}{same}\njo{42}{byte}\njo{47}{in}\njo{50}{context
}\n\ped \init{10}{}\njo{-10}{runp{[}i]{[}0]}\njo0{+=2;}\njo0{
}\n\ped \init{8}{}\njo{-8}{runp{[}i]}\njo0{=cp0{[}i]}\njo0{+3;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{predict}\njo{15}{from}\njo{20}{last}\njo{25}{byte}\njo{30}{in}\njo{33}{context
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{rc}\njo0{=runp{[}i]{[}0];}\jmpo{24}{}\njo0{/}\njo0{/}\njo{27}{count}\njo0{$\ast$2,}\njo{36}{}\njo0{+1}\njo{39}{{\keywordfont
if}}\njo{42}{2}\njo{44}{different}\njo{54}{bytes}\njo{60}{seen
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(runp{[}i]{[}1]}\njo0{+256\mgt{2}8}\njo0{{\mm}bp}\njo0{==cc)}\njo{34}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{{\keywordfont int}}\njo{10}{b}\njo0{=(runp{[}i]{[}1]\mgt{2}7}\njo0{{\mm}bp\&1)}\njo0{$\ast$2}\njo0{{\mm}1;}\jmpo{39}{}\njo0{/}\njo0{/}\njo{42}{predicted}\njo{52}{bit}\njo{56}{}\njo0{+}\njo{58}{{\keywordfont
for}}\njo{62}{1,}\njo{65}{}\njo0{{\mm}}\njo{67}{{\keywordfont
for}}\njo{71}{0 }\n\ped \init{6}{}\njo{-6}{{\keywordfont
int}}\njo{10}{c}\njo0{=ilog(rc}\njo0{+1)\mlt{2}2}\njo0{+($\sim$rc\&1);}\njo0{
}\n\ped \init{6}{}\njo{-6}{m.add(b}\njo0{$\ast$c);}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{else }\n\ped \init{6}{}\njo{-6}{m.add(0);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{predict}\njo{15}{from}\njo{20}{bit}\njo{24}{context
}\n\ped \init{4}{}\njo{-4}{result}\njo0{+=mix2(m,}\njo{20}{cp{[}i]}\njo{26}{?}\njo{28}{}\njo0{$\ast$cp{[}i]}\njo{35}{:}\njo{37}{0,}\njo{40}{sm{[}i]);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(bp}\njo0{==7)}\njo{13}{cn}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{result;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{Models}\njo{36}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{All}\njo{7}{of}\njo{10}{the}\njo{14}{models}\njo{21}{below}\njo{27}{take}\njo{32}{a}\njo{34}{Mixer}\njo{40}{as}\njo{43}{a}\njo{45}{parameter}\njo{55}{and}\njo{59}{write
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{predictions}\njo{15}{to}\njo{18}{it.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{matchModel}\njo{40}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{matchModel()}\njo{16}{finds}\njo{22}{the}\njo{26}{longest}\njo{34}{matching}\njo{43}{context}\njo{51}{and}\njo{55}{returns}\njo{63}{its}\njo{67}{length
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
int}}\njo{4}{matchModel(Mixer\&}\njo{22}{m)}\njo{25}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont const}}\njo{8}{{\keywordfont
int}}\njo{12}{MAXLEN}\njo0{=2047;}\jmpo{26}{}\njo0{/}\njo0{/}\njo{29}{longest}\njo{37}{allowed}\njo{45}{match}\njo{51}{}\njo0{+}\njo{53}{1
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{Array$<$int$>$}\njo{20}{t(MEM);}\jmpo{29}{}\njo0{/}\njo0{/}\njo{32}{hash}\njo{37}{table}\njo{43}{of}\njo{46}{pointers}\njo{55}{to}\njo{58}{contexts
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{{\keywordfont
int}}\njo{13}{h}\njo0{=0;}\jmpo{19}{}\njo0{/}\njo0{/}\njo{22}{hash}\njo{27}{of}\njo{30}{last}\njo{35}{7}\njo{37}{bytes
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{{\keywordfont
int}}\njo{13}{ptr}\njo0{=0;}\jmpo{21}{}\njo0{/}\njo0{/}\njo{24}{points}\njo{31}{to}\njo{34}{next}\njo{39}{byte}\njo{44}{of}\njo{47}{match}\njo{53}{{\keywordfont
if}}\njo{56}{any }\n\ped \init{2}{}\njo{-2}{{\keywordfont
static}}\njo{9}{{\keywordfont int}}\njo{13}{len}\njo0{=0;}\jmpo{21}{}\njo0{/}\njo0{/}\njo{24}{length}\njo{31}{of}\njo{34}{match,}\njo{41}{or}\njo{44}{0}\njo{46}{{\keywordfont
if}}\njo{49}{no}\njo{52}{match }\n\ped \init{2}{}\njo{-2}{{\keywordfont
static}}\njo{9}{{\keywordfont int}}\njo{13}{result}\njo0{=0;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
if}}\njo{5}{(!bpos)}\njo{13}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{h}\njo0{=h}\njo0{$\ast$997}\njo0{$\ast$8}\njo0{+buf(1)}\njo0{+1\&t.size()}\njo0{{\mm}1;}\jmpo{36}{}\njo0{/}\njo0{/}\njo{39}{update}\njo{46}{context}\njo{54}{hash
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(len)}\njo{13}{++len,}\njo{20}{++ptr;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{}\njo0{\brl{}}\jmpo{12}{}\njo0{/}\njo0{/}\njo{15}{find}\njo{20}{match}\n\ped
\init{6}{}\njo{-6}{ptr}\njo0{=t{[}h];}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(ptr}\njo{14}{}\njo0{\&\&}\njo{17}{pos}\njo0{{\mm}ptr$<$buf.size())
}\n\ped \init{8}{}\njo{-8}{{\keywordfont while}}\njo{14}{(buf(len}\njo0{+1)}\njo0{==buf{[}ptr}\njo0{{\mm}len}\njo0{{\mm}1]}\njo{42}{}\njo0{\&\&}\njo{45}{len$<$MAXLEN)}\njo{57}{++len;}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{t{[}h]}\njo0{=pos;}\jmpo{15}{}\njo0{/}\njo0{/}\njo{18}{update}\njo{25}{hash}\njo{30}{table
}\n\ped \init{4}{}\njo{-4}{result}\njo0{=len;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(result$>$0}\njo{17}{}\njo0{\&\&}\njo{20}{!(result\&0xfff))}\njo{37}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{pos=\%d~}\njo0{len=\%d~}\njo0{ptr=\%d\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{70}{pos,}\njo{75}{len,}\njo{80}{ptr);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{predict
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(len$>$MAXLEN)}\njo{18}{len}\njo0{=MAXLEN;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{sgn;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(len}\njo{10}{}\njo0{\&\&}\njo{13}{buf(1)}\njo0{==buf{[}ptr}\njo0{{\mm}1]}\njo{32}{}\njo0{\&\&}\njo{35}{c0}\njo0{==buf{[}ptr]}\njo0{+256\mgt{2}8}\njo0{{\mm}bpos)}\njo{61}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(buf{[}ptr]\mgt{2}7}\njo0{{\mm}bpos\&1)}\njo{28}{sgn}\njo0{=1;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{sgn}\njo0{=}\njo0{{\mm}1;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont else}}\njo{7}{sgn}\njo0{=len}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.add(sgn}\njo0{$\ast$4}\njo0{$\ast$ilog(len));}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.add(sgn}\njo0{$\ast$64}\njo0{$\ast$min(len,}\njo{24}{32));}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{result;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{contextModel}\njo{42}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{ }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{This}\njo{8}{combines}\njo{17}{all}\njo{21}{the}\njo{25}{context}\njo{33}{models}\njo{40}{with}\njo{45}{a}\njo{47}{Mixer.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
int}}\njo{4}{contextModel2()}\njo{20}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{ContextMap}\njo{20}{cm(MEM}\njo0{$\ast$32,}\njo{31}{9);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{RunContextMap}\njo{23}{rcm7(MEM),}\njo{34}{rcm9(MEM),}\njo{45}{rcm10(MEM);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{Mixer}\njo{15}{m(512,}\njo{22}{1040,}\njo{28}{4,}\njo{31}{128);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{U32}\njo{13}{cxt{[}16];}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{order}\njo{32}{0}\njo0{{\mm}11}\njo{37}{contexts
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{{\keywordfont
int}}\njo{13}{size}\njo0{=0;}\jmpo{22}{}\njo0{/}\njo0{/}\njo{25}{bytes}\njo{31}{remaining}\njo{41}{in}\njo{44}{block
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{4}{{\keywordfont
static}}\njo{11}{{\keywordfont const}}\njo{17}{{\keywordfont
char}}\njo0{$\ast$}\njo{23}{typenames{[}4]}\njo0{=}\njo0{\brl{}\texttt{\char`\"{}\char`\"{}},}\njo{41}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{jpeg~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{50}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{exe~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{58}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{text~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{\brr{}}\njo0{;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Parse}\njo{11}{filetype}\njo{20}{and}\njo{24}{size
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(bpos}\njo0{==0)}\njo{15}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\mm\mm}size;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(size}\njo0{==}\njo0{{\mm}5)}\njo{18}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{size}\njo0{=buf(4)\mlt{2}24$\mid$buf(3)\mlt{2}16$\mid$buf(2)\mlt{2}8$\mid$buf(1);}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{8}{{\keywordfont
if}}\njo{11}{(filetype}\njo0{$<$=3)}\njo{25}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{(\%s\%d)\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{42}{typenames{[}filetype],}\njo{63}{size);}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.update();}\njo0{ }\n\ped
\init{2}{}\njo{-2}{m.add(256);}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Test}\njo{10}{{\keywordfont
for}}\njo{14}{special}\njo{22}{file}\njo{27}{types
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{ismatch}\njo0{=matchModel(m);}\jmpo{30}{}\njo0{/}\njo0{/}\njo{33}{Length}\njo{40}{of}\njo{43}{longest}\njo{51}{matching}\njo{60}{context
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
if}}\njo{5}{(ismatch$>$400)}\njo{19}{}\njo0{\brl{}}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{Model}\njo{32}{{\keywordfont
long}}\njo{37}{matches}\njo{45}{directly}\n\ped \init{4}{}\njo{-4}{m.set(0,}\njo{13}{8);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{m.p();}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Normal}\njo{12}{model
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(bpos}\njo0{==0)}\njo{15}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{i}\njo0{=15;}\njo{19}{i$>$0;}\njo{24}{{\mm\mm}i)}\jmpo{30}{}\njo0{/}\njo0{/}\njo{33}{update}\njo{40}{order}\njo{46}{0}\njo0{{\mm}11}\njo{51}{context}\njo{59}{hashes
}\n\ped \init{6}{}\njo{-6}{cxt{[}i]}\njo0{=cxt{[}i}\njo0{{\mm}1]}\njo0{$\ast$257}\njo0{+(c4\&255)}\njo0{+1;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{i}\njo0{=0;}\njo{18}{i$<$7;}\njo{23}{++i)
}\n\ped \init{6}{}\njo{-6}{cm.set(cxt{[}i]);}\njo0{
}\n\ped \init{4}{}\njo{-4}{rcm7.set(cxt{[}7]);}\njo0{
}\n\ped \init{4}{}\njo{-4}{cm.set(cxt{[}8]);}\njo0{
}\n\ped \init{4}{}\njo{-4}{rcm9.set(cxt{[}10]);}\njo0{
}\n\ped \init{4}{}\njo{-4}{rcm10.set(cxt{[}12]);}\njo0{
}\n\ped \init{4}{}\njo{-4}{cm.set(cxt{[}14]);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{order}\njo0{=cm.mix(m);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(order$>$7)}\njo{15}{order}\njo0{=7;}\njo0{
}\n\ped \init{2}{}\njo{-2}{rcm7.mix(m);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{rcm9.mix(m);}\njo0{ }\n\ped \init{2}{}\njo{-2}{rcm10.mix(m);}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.set(buf(1)}\njo0{+8,}\njo{18}{264);}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.set(c0,}\njo{12}{256);}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.set(order}\njo0{+8}\njo0{$\ast$(c4\mgt{2}5\&7)}\njo0{+64}\njo0{$\ast$(buf(1)}\njo0{==buf(2)),}\njo{47}{256);}\njo0{
}\n\ped \init{2}{}\njo{-2}{m.set(buf(2),}\njo{16}{256);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{pr}\njo0{=m.p();}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{pr;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{Predictor}\njo{39}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{A}\njo{5}{Predictor}\njo{15}{estimates}\njo{25}{the}\njo{29}{probability}\njo{41}{that}\njo{46}{the}\njo{50}{next}\njo{55}{bit}\njo{59}{of
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{uncompressed}\njo{16}{data}\njo{21}{is}\njo{24}{1.}\jmpo{28}{Methods:
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{p()}\njo{7}{returns}\njo{15}{P(1)}\njo{20}{as}\njo{23}{a}\njo{25}{12}\njo{28}{bit}\njo{32}{number}\njo{39}{(0}\njo0{{\mm}4095).
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{update(y)}\njo{13}{trains}\njo{20}{the}\njo{24}{predictor}\njo{34}{with}\njo{39}{the}\njo{43}{actual}\njo{50}{bit}\njo{54}{(0}\njo{57}{or}\njo{60}{1).
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{class}\njo{6}{Predictor}\njo{16}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{pr;}\jmpo{11}{}\njo0{/}\njo0{/}\njo{14}{next}\njo{19}{prediction
}\n\ped \init0{}\njo0{public: }\n\ped \init{2}{}\njo{-2}{Predictor();}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{p()}\njo{10}{{\keywordfont
const}}\njo{16}{}\njo0{\brl{}assert(pr}\njo0{$>$=0}\njo{30}{}\njo0{\&\&}\njo{33}{pr$<$4096);}\njo{43}{{\keywordfont
return}}\njo{50}{pr;}\njo0{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{update();}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{Predictor::Predictor():}\njo{24}{pr(2048)}\njo{33}{}\njo0{\brl{}\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
void}}\njo{5}{Predictor::update()}\njo{25}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{APM}\njo{13}{a1(256),}\njo{22}{a2(0x10000),}\njo{35}{a3(0x10000),}\njo{48}{a4(0x10000);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Update}\njo{12}{global}\njo{19}{context:}\njo{28}{pos,}\njo{33}{bpos,}\njo{39}{c0,}\njo{43}{c4,}\njo{47}{buf
}\n\ped \init{2}{}\njo{-2}{c0}\njo0{+=c0}\njo0{+y;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(c0}\njo0{$>$=256)}\njo{15}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{buf{[}pos++]}\njo0{=c0;}\njo0{
}\n\ped \init{4}{}\njo{-4}{c4}\njo0{=(c4\mlt{2}8)}\njo0{+c0}\njo0{{\mm}256;}\njo0{
}\n\ped \init{4}{}\njo{-4}{c0}\njo0{=1;}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{bpos}\njo0{=(bpos}\njo0{+1)\&7;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Filter}\njo{12}{the}\njo{16}{context}\njo{24}{model}\njo{30}{with}\njo{35}{APMs
}\n\ped \init{2}{}\njo{-2}{pr}\njo0{=contextModel2();}\njo0{
}\n\ped \init{2}{}\njo{-2}{pr}\njo0{=a1.p(pr,}\njo{14}{c0)}\njo0{$\ast$3}\njo0{+pr\mgt{2}2;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{pr2}\njo0{=a2.p(pr,}\njo{19}{c0}\njo0{+256}\njo0{$\ast$buf(1));}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{pr3}\njo0{=a3.p(pr,}\njo{19}{c0$\hat{~}$hash(buf(1),}\njo{35}{buf(2))\&0xffff);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{pr4}\njo0{=a4.p(pr,}\njo{19}{c0$\hat{~}$hash(buf(1),}\njo{35}{buf(2),}\njo{43}{buf(3))\&0xffff);}\njo0{
}\n\ped \init{2}{}\njo{-2}{pr}\njo0{=pr2}\njo0{+pr3}\njo0{$\ast$2}\njo0{+pr4}\njo0{+2\mgt{2}2;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{Encoder}\njo{37}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{An}\njo{6}{Encoder}\njo{14}{does}\njo{19}{arithmetic}\njo{30}{encoding.}\jmpo{41}{Methods:
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Encoder(COMPRESS,}\njo{21}{f)}\njo{24}{creates}\njo{32}{encoder}\njo{40}{{\keywordfont
for}}\njo{44}{compression}\njo{56}{to}\njo{59}{archive}\njo{67}{f,}\njo{70}{which
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{must}\njo{10}{be}\njo{13}{open}\njo{18}{past}\njo{23}{any}\njo{27}{header}\njo{34}{{\keywordfont
for}}\njo{38}{writing}\njo{46}{in}\njo{49}{binary}\njo{56}{mode.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Encoder(DECOMPRESS,}\njo{23}{f)}\njo{26}{creates}\njo{34}{encoder}\njo{42}{{\keywordfont
for}}\njo{46}{decompression}\njo{60}{from}\njo{65}{archive}\njo{73}{f,}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{which}\njo{11}{must}\njo{16}{be}\njo{19}{open}\njo{24}{past}\njo{29}{any}\njo{33}{header}\njo{40}{{\keywordfont
for}}\njo{44}{reading}\njo{52}{in}\njo{55}{binary}\njo{62}{mode.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{code(i)}\njo{11}{in}\njo{14}{COMPRESS}\njo{23}{mode}\njo{28}{compresses}\njo{39}{bit}\njo{43}{i}\njo{45}{(0}\njo{48}{or}\njo{51}{1)}\njo{54}{to}\njo{57}{file}\njo{62}{f.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{code()}\njo{10}{in}\njo{13}{DECOMPRESS}\njo{24}{mode}\njo{29}{returns}\njo{37}{the}\njo{41}{next}\njo{46}{decompressed}\njo{59}{bit}\njo{63}{from}\njo{68}{file}\njo{73}{f.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{Global}\njo{12}{y}\njo{14}{is}\njo{17}{set}\njo{21}{to}\njo{24}{the}\njo{28}{last}\njo{33}{bit}\njo{37}{coded}\njo{43}{or}\njo{46}{decoded}\njo{54}{by}\njo{57}{code().
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{compress(c)}\njo{15}{in}\njo{18}{COMPRESS}\njo{27}{mode}\njo{32}{compresses}\njo{43}{one}\njo{47}{byte.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{decompress()}\njo{16}{in}\njo{19}{DECOMPRESS}\njo{30}{mode}\njo{35}{decompresses}\njo{48}{and}\njo{52}{returns}\njo{60}{one}\njo{64}{byte.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{flush()}\njo{11}{should}\njo{18}{be}\njo{21}{called}\njo{28}{exactly}\njo{36}{once}\njo{41}{after}\njo{47}{compression}\njo{59}{is}\njo{62}{done}\njo{67}{and
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{before}\njo{12}{closing}\njo{20}{f.}\jmpo{24}{It}\njo{27}{does}\njo{32}{nothing}\njo{40}{in}\njo{43}{DECOMPRESS}\njo{54}{mode.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{size()}\njo{10}{returns}\njo{18}{current}\njo{26}{length}\njo{33}{of}\njo{36}{archive
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{setFile(f)}\njo{14}{sets}\njo{19}{alternate}\njo{29}{source}\njo{36}{to}\njo{39}{FILE}\njo0{$\ast$}\njo{45}{f}\njo{47}{{\keywordfont
for}}\njo{51}{decompress()}\njo{64}{in}\njo{67}{COMPRESS
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{5}{mode}\njo{10}{({\keywordfont
for}}\njo{15}{testing}\njo{23}{transforms). }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{If}\njo{6}{level}\njo{12}{(global)}\njo{21}{is}\njo{24}{0,}\njo{27}{then}\njo{32}{data}\njo{37}{is}\njo{40}{stored}\njo{47}{without}\njo{55}{arithmetic}\njo{66}{coding.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
typedef}}\njo{8}{{\keywordfont enum}}\njo{13}{}\njo0{\brl{}COMPRESS,}\njo{24}{DECOMPRESS\brr{}}\njo{36}{Mode;}\njo0{
}\n\ped \init0{}\njo0{class}\njo{6}{Encoder}\njo{14}{}\njo0{\brl{}
}\n\ped \init0{}\njo0{private: }\n\ped \init{2}{}\njo{-2}{Predictor}\njo{12}{predictor;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont const}}\njo{8}{Mode}\njo{13}{mode;}\jmpo{25}{}\njo0{/}\njo0{/}\njo{28}{Compress}\njo{37}{or}\njo{40}{decompress?
}\n\ped \init{2}{}\njo{-2}{FILE}\njo0{$\ast$}\njo{8}{archive;}\jmpo{25}{}\njo0{/}\njo0{/}\njo{28}{Compressed}\njo{39}{data}\njo{44}{file
}\n\ped \init{2}{}\njo{-2}{U32}\njo{6}{x1,}\njo{10}{x2;}\jmpo{25}{}\njo0{/}\njo0{/}\njo{28}{Range,}\njo{35}{initially}\njo{45}{{[}0,}\njo{49}{1),}\njo{53}{scaled}\njo{60}{by}\njo{63}{2$\hat{~}$32
}\n\ped \init{2}{}\njo{-2}{U32}\njo{6}{x;}\jmpo{25}{}\njo0{/}\njo0{/}\njo{28}{Decompress}\njo{39}{mode:}\njo{45}{last}\njo{50}{4}\njo{52}{input}\njo{58}{bytes}\njo{64}{of}\njo{67}{archive
}\n\ped \init{2}{}\njo{-2}{FILE}\njo{7}{}\njo0{$\ast$alt;}\jmpo{25}{}\njo0{/}\njo0{/}\njo{28}{decompress()}\njo{41}{source}\njo{48}{in}\njo{51}{COMPRESS}\njo{60}{mode
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Compress}\njo{14}{bit}\njo{18}{y}\njo{20}{or}\njo{23}{{\keywordfont
return}}\njo{30}{decompressed}\njo{43}{bit }\n\ped \init{2}{}\njo{-2}{{\keywordfont
int}}\njo{6}{code({\keywordfont int}}\njo{15}{i}\njo0{=0)}\njo{20}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{p}\njo0{=predictor.p();}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert(p}\njo0{$>$=0}\njo{16}{}\njo0{\&\&}\njo{19}{p$<$4096);}\njo0{
}\n\ped \init{4}{}\njo{-4}{p}\njo0{+=p$<$2048;}\njo0{
}\n\ped \init{4}{}\njo{-4}{U32}\njo{8}{xmid}\njo0{=x1}\njo{16}{}\njo0{+}\njo{18}{(x2}\njo0{{\mm}x1\mgt{2}12)}\njo0{$\ast$p}\njo{32}{}\njo0{+}\njo{34}{((x2}\njo0{{\mm}x1\&0xfff)}\njo0{$\ast$p\mgt{2}12);}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert(xmid}\njo0{$>$=x1}\njo{20}{}\njo0{\&\&}\njo{23}{xmid$<$x2);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(mode}\njo0{==DECOMPRESS)}\njo{26}{y}\njo0{=x}\njo0{$<$=xmid;}\njo{37}{{\keywordfont
else}}\njo{42}{y}\njo0{=i;}\njo0{ }\n\ped \init{4}{}\njo{-4}{y}\njo{6}{?}\njo{8}{(x2}\njo0{=xmid)}\njo{18}{:}\njo{20}{(x1}\njo0{=xmid}\njo0{+1);}\njo0{
}\n\ped \init{4}{}\njo{-4}{predictor.update();}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont while}}\njo{10}{(((x1$\hat{~}$x2)\&0xff000000)}\njo0{==0)}\njo{36}{}\njo0{\brl{}}\jmpo{39}{}\njo0{/}\njo0{/}\njo{42}{pass}\njo{47}{equal}\njo{53}{leading}\njo{61}{bytes}\njo{67}{of}\njo{70}{range
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(mode}\njo0{==COMPRESS)}\njo{26}{putc(x2\mgt{2}24,}\njo{39}{archive);}\njo0{
}\n\ped \init{6}{}\njo{-6}{x1}\njo0{\mlt{2}=8;}\njo0{
}\n\ped \init{6}{}\njo{-6}{x2}\njo0{=(x2\mlt{2}8)}\njo0{+255;}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(mode}\njo0{==DECOMPRESS)}\njo{28}{x}\njo0{=(x\mlt{2}8)}\njo0{+(getc(archive)\&255);}\jmpo{59}{}\njo0{/}\njo0{/}\njo{62}{EOF}\njo{66}{is}\njo{69}{OK
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{y;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{public: }\n\ped
\init{2}{}\njo{-2}{Encoder(Mode}\njo{15}{m,}\njo{18}{FILE}\njo0{$\ast$}\njo{24}{f);}\njo0{
}\n\ped \init{2}{}\njo{-2}{Mode}\njo{7}{getMode()}\njo{17}{{\keywordfont
const}}\njo{23}{}\njo0{\brl{}{\keywordfont return}}\njo{31}{mode;}\njo0{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont long}}\njo{7}{size()}\njo{14}{{\keywordfont
const}}\njo{20}{}\njo0{\brl{}{\keywordfont return}}\njo{28}{ftell(archive);}\njo0{\brr{}}\jmpo{46}{}\njo0{/}\njo0{/}\njo{49}{length}\njo{56}{of}\njo{59}{archive}\njo{67}{so}\njo{70}{far
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{flush();}\jmpo{17}{}\njo0{/}\njo0{/}\njo{20}{call}\njo{25}{this}\njo{30}{when}\njo{35}{compression}\njo{47}{is}\njo{50}{finished
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{setFile(FILE}\njo0{$\ast$}\njo{21}{f)}\njo{24}{}\njo0{\brl{}alt}\njo0{=f;}\njo0{\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Compress}\njo{14}{one}\njo{18}{byte
}\n\ped \init{2}{}\njo{-2}{{\keywordfont void}}\njo{7}{compress({\keywordfont
int}}\njo{20}{c)}\njo{23}{}\njo0{\brl{} }\n\ped
\init{4}{}\njo{-4}{assert(mode}\njo0{==COMPRESS);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=7;}\njo{20}{i}\njo0{$>$=0;}\njo{26}{{\mm\mm}i)
}\n\ped \init{8}{}\njo{-8}{code((c\mgt{2}i)\&1);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Decompress}\njo{16}{and}\njo{20}{{\keywordfont
return}}\njo{27}{one}\njo{31}{byte }\n\ped \init{2}{}\njo{-2}{{\keywordfont
int}}\njo{6}{decompress()}\njo{19}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(mode}\njo0{==COMPRESS)}\njo{24}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{assert(alt);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont return}}\njo{13}{getc(alt);}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{{\keywordfont int}}\njo{10}{c}\njo0{=0;}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=0;}\njo{20}{i$<$8;}\njo{25}{++i)
}\n\ped \init{8}{}\njo{-8}{c}\njo0{+=c}\njo0{+code();}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont return}}\njo{13}{c;}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init0{}\njo0{\brr{}}\njo0{;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{Encoder::Encoder(Mode}\njo{22}{m,}\njo{25}{FILE}\njo0{$\ast$}\njo{31}{f):}\njo{35}{
}\n\ped \init{4}{}\njo{-4}{mode(m),}\njo{13}{archive(f),}\njo{25}{x1(0),}\njo{32}{x2(0xffffffff),}\njo{48}{x(0),}\njo{54}{alt(0)}\njo{61}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(}\njo{7}{mode}\njo0{==DECOMPRESS)}\njo{25}{}\njo0{\brl{}}\jmpo{28}{}\njo0{/}\njo0{/}\njo{31}{x}\njo{33}{}\njo0{=}\njo{35}{first}\njo{41}{4}\njo{43}{bytes}\njo{49}{of}\njo{52}{archive
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{i}\njo0{=0;}\njo{18}{i$<$4;}\njo{23}{++i)
}\n\ped \init{6}{}\njo{-6}{x}\njo0{=(x\mlt{2}8)}\njo0{+(getc(archive)\&255);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{{\keywordfont void}}\njo{5}{Encoder::flush()}\njo{22}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(mode}\njo0{==COMPRESS)
}\n\ped \init{4}{}\njo{-4}{putc(x1\mgt{2}24,}\njo{17}{archive);}\jmpo{28}{}\njo0{/}\njo0{/}\njo{31}{Flush}\njo{37}{first}\njo{43}{unequal}\njo{51}{byte}\njo{56}{of}\njo{59}{range
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{21}{Compress,}\njo{31}{Decompress}\njo{42}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Print}\njo{9}{progress:}\njo{19}{n}\njo{21}{is}\njo{24}{the}\njo{28}{number}\njo{35}{of}\njo{38}{bytes}\njo{44}{compressed}\njo{55}{or}\njo{58}{decompressed}\n\ped
\init0{}\njo0{{\keywordfont void}}\njo{5}{printStatus({\keywordfont
int}}\njo{21}{n)}\njo{24}{}\njo0{\brl{} }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(n$>$0}\njo{10}{}\njo0{\&\&}\njo{13}{!(n\&0x3fff))
}\n\ped \init{4}{}\njo{-4}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%12d\bs{1}b\bs{1}b\bs{1}b\bs{1}b\bs{1}b\bs{1}b\bs{1}b\bs{1}b\bs{1}b\bs{1}b\bs{1}b\bs{1}b\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{43}{n),}\njo{47}{fflush(stdout);}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Compress}\njo{12}{a}\njo{14}{file
}\n\ped \init0{}\njo0{{\keywordfont void}}\njo{5}{compress({\keywordfont
const}}\njo{20}{{\keywordfont char}}\njo0{$\ast$}\njo{26}{filename,}\njo{36}{{\keywordfont
long}}\njo{41}{filesize,}\njo{51}{Encoder\&}\njo{60}{en)}\njo{64}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{assert(en.getMode()}\njo0{==COMPRESS);}\njo0{
}\n\ped \init{2}{}\njo{-2}{assert(filename}\njo{18}{}\njo0{\&\&}\njo{21}{filename{[}0]);}\njo0{
}\n\ped \init{2}{}\njo{-2}{FILE}\njo{7}{}\njo0{$\ast$f}\njo0{=fopen(filename,}\njo{26}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{rb\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(!f)}\njo{10}{perror(filename),}\njo{28}{quit();}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont long}}\njo{7}{start}\njo0{=en.size();}\njo0{
}\n\ped \init{2}{}\njo{-2}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%s~}\njo0{\%ld~}\njo0{{\mm}$>$~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{23}{filename,}\njo{33}{filesize);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Transform}\njo{15}{and}\njo{19}{test}\njo{24}{in}\njo{27}{blocks
}\n\ped \init{2}{}\njo{-2}{{\keywordfont const}}\njo{8}{{\keywordfont
int}}\njo{12}{BLOCK}\njo0{=MEM}\njo0{$\ast$64;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont for}}\njo{6}{({\keywordfont
int}}\njo{11}{i}\njo0{=0;}\njo{16}{filesize$>$0;}\njo{28}{i}\njo0{+=BLOCK)}\njo{38}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{size}\njo0{=BLOCK;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(size$>$filesize)}\njo{23}{size}\njo0{=filesize;}\njo0{
}\n\ped \init{4}{}\njo{-4}{FILE}\njo0{$\ast$}\njo{10}{tmp}\njo0{=tmpfile();}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(!tmp)}\njo{14}{perror(\qql}\stringfont\pes{\bs{1}}{0}\njo0{tmpfile\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{),}\njo{33}{quit();}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont long}}\njo{9}{savepos}\njo0{=ftell(f);}\njo0{
}\n\ped \init{6}{}\njo{-6}{en.compress(size\mgt{2}24);}\njo0{
}\n\ped \init{6}{}\njo{-6}{en.compress(size\mgt{2}16);}\njo0{
}\n\ped \init{6}{}\njo{-6}{en.compress(size\mgt{2}8);}\njo0{
}\n\ped \init{6}{}\njo{-6}{en.compress(size);}\njo0{
}\n\ped \init{6}{}\njo{-6}{fseek(f,}\njo{15}{savepos,}\njo{24}{SEEK{\ul}SET);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{j}\njo0{=0;}\njo{20}{j$<$size;}\njo{28}{++j)}\njo{33}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{printStatus(i}\njo0{+j);}\njo0{ }\n\ped
\init{8}{}\njo{-8}{en.compress(getc(f));}\njo0{ }\n\ped
\init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped \init{4}{}\njo{-4}{filesize}\njo0{{\mm}=size;}\njo0{
}\n\ped \init{4}{}\njo{-4}{fclose(tmp);}\jmpo{18}{}\njo0{/}\njo0{/}\njo{21}{deletes
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(f)}\njo{9}{fclose(f);}\njo0{
}\n\ped \init{2}{}\njo{-2}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%{\mm}12ld\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{21}{en.size()}\njo0{{\mm}start);}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Try}\njo{7}{to}\njo{10}{make}\njo{15}{a}\njo{17}{directory,}\njo{28}{{\keywordfont
return}}\njo{35}{true}\njo{40}{{\keywordfont if}}\njo{43}{successful
}\n\ped \init0{}\njo0{bool}\njo{5}{makedir({\keywordfont
const}}\njo{19}{{\keywordfont char}}\njo0{$\ast$}\njo{25}{dir)}\njo{30}{}\njo0{\brl{}
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
ifdef}}\njo{7}{WINDOWS }\n\ped \init{2}{}\njo{-2}{{\keywordfont
return}}\njo{9}{CreateDirectory(dir,}\njo{30}{0)}\njo0{==TRUE;}\njo0{
}\n\ped \init0{}\njo0{\#else }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont ifdef}}\njo{7}{UNIX
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{mkdir(dir,}\njo{20}{0777)}\njo0{==0;}\njo0{
}\n\ped \init0{}\njo0{\#else }\n\ped \init{2}{}\njo{-2}{{\keywordfont
return}}\njo{9}{false;}\njo0{ }\n\ped \init0{}\njo0{\#endif
}\n\ped \init0{}\njo0{\#endif }\n\ped \init0{}\njo0{\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
int}}\njo{4}{decode(Encoder\&}\njo{20}{en)}\njo{24}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{{\keywordfont
int}}\njo{13}{len}\njo0{=0;}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
while}}\njo{8}{(len}\njo0{==0)}\njo{17}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{len}\njo0{=en.decompress()\mlt{2}24;}\njo0{
}\n\ped \init{4}{}\njo{-4}{len}\njo0{$\mid$=en.decompress()\mlt{2}16;}\njo0{
}\n\ped \init{4}{}\njo{-4}{len}\njo0{$\mid$=en.decompress()\mlt{2}8;}\njo0{
}\n\ped \init{4}{}\njo{-4}{len}\njo0{$\mid$=en.decompress();}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(len$<$0)}\njo{15}{len}\njo0{=1;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\mm\mm}len;}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
return}}\njo{9}{en.decompress();}\njo0{ }\n\ped \init0{}\njo0{\brr{}}\njo0{
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Decompress}\njo{14}{a}\njo{16}{file
}\n\ped \init0{}\njo0{{\keywordfont void}}\njo{5}{decompress({\keywordfont
const}}\njo{22}{{\keywordfont char}}\njo0{$\ast$}\njo{28}{filename,}\njo{38}{{\keywordfont
long}}\njo{43}{filesize,}\njo{53}{Encoder\&}\njo{62}{en)}\njo{66}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{assert(en.getMode()}\njo0{==DECOMPRESS);}\njo0{
}\n\ped \init{2}{}\njo{-2}{assert(filename}\njo{18}{}\njo0{\&\&}\njo{21}{filename{[}0]);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Test}\njo{10}{{\keywordfont
if}}\njo{13}{output}\njo{20}{file}\njo{25}{exists.}\jmpo{34}{If}\njo{37}{so,}\njo{41}{then}\njo{46}{compare.
}\n\ped \init{2}{}\njo{-2}{FILE}\njo0{$\ast$}\njo{8}{f}\njo0{=fopen(filename,}\njo{26}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{rb\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(f)}\njo{9}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Comparing~}\njo0{\%s~}\njo0{\%ld~}\njo0{{\mm}$>$~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{35}{filename,}\njo{45}{filesize);}\njo0{
}\n\ped \init{4}{}\njo{-4}{bool}\njo{9}{found}\njo0{=false;}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{mismatch?
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{i}\njo0{=0;}\njo{18}{i$<$filesize;}\njo{30}{++i)}\njo{35}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{printStatus(i);}\njo0{ }\n\ped \init{6}{}\njo{-6}{{\keywordfont
int}}\njo{10}{c1}\njo0{=found?EOF:getc(f);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont int}}\njo{10}{c2}\njo0{=decode(en);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(c1}\njo0{!=c2}\njo{17}{}\njo0{\&\&}\njo{20}{!found)}\njo{28}{}\njo0{\brl{}
}\n\ped \init{8}{}\njo{-8}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{differ~}\njo0{at~}\njo0{\%d:~}\njo0{file=\%d~}\njo0{archive=\%d\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{53}{i,}\njo{56}{c1,}\njo{60}{c2);}\njo0{
}\n\ped \init{8}{}\njo{-8}{found}\njo0{=true;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init{4}{}\njo{-4}{{\keywordfont
if}}\njo{7}{(!found}\njo{15}{}\njo0{\&\&}\njo{18}{getc(f)}\njo0{!=EOF)
}\n\ped \init{6}{}\njo{-6}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{file~}\njo0{is~}\njo0{longer\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{{\keywordfont
if}}\njo{12}{(!found) }\n\ped \init{6}{}\njo{-6}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{identical~~~}\njo0{\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{4}{}\njo{-4}{fclose(f);}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{Create}\njo{12}{file
}\n\ped \init{2}{}\njo{-2}{{\keywordfont else}}\njo{7}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{f}\njo0{=fopen(filename,}\njo{22}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{wb\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(!f)}\njo{12}{}\njo0{\brl{}}\jmpo{15}{}\njo0{/}\njo0{/}\njo{18}{Try}\njo{22}{creating}\njo{31}{directories}\njo{43}{in}\njo{46}{path}\njo{51}{and}\njo{55}{try}\njo{59}{again
}\n\ped \init{6}{}\njo{-6}{String}\njo{13}{path(filename);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=0;}\njo{20}{path{[}i];}\njo{29}{++i)}\njo{34}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{{\keywordfont if}}\njo{11}{(path{[}i]}\njo0{=={\sq}/{\sq}}\njo{25}{}\njo0{$\mid$$\mid$}\njo{28}{path{[}i]}\njo0{==\sq{}\bs{2}\sq{})}\njo{43}{}\njo0{\brl{}
}\n\ped \init{10}{}\njo{-10}{{\keywordfont char}}\njo{15}{savechar}\njo0{=path{[}i];}\njo0{
}\n\ped \init{10}{}\njo{-10}{path{[}i]}\njo0{=0;}\njo0{
}\n\ped \init{10}{}\njo{-10}{{\keywordfont if}}\njo{13}{(makedir(path.c{\ul}str()))
}\n\ped \init{12}{}\njo{-12}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Created~}\njo0{directory~}\njo0{\%s\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{45}{path.c{\ul}str());}\njo0{
}\n\ped \init{10}{}\njo{-10}{path{[}i]}\njo0{=savechar;}\njo0{
}\n\ped \init{8}{}\njo{-8}{\brr{}}\njo0{ }\n\ped
\init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped \init{6}{}\njo{-6}{f}\njo0{=fopen(filename,}\njo{24}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{wb\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Decompress}\n\ped
\init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(f)}\njo{11}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Extracting~}\njo0{\%s~}\njo0{\%ld~}\njo0{{\mm}$>$~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{38}{filename,}\njo{48}{filesize);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=0;}\njo{20}{i$<$filesize;}\njo{32}{++i)}\njo{37}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{printStatus(i);}\njo0{ }\n\ped \init{8}{}\njo{-8}{putc(decode(en),}\njo{25}{f);}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{6}{}\njo{-6}{fclose(f);}\njo0{ }\n\ped \init{6}{}\njo{-6}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{done~~~~~~~~}\njo0{\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Can\sq{}t}\njo{13}{create,}\njo{21}{discard}\njo{29}{data
}\n\ped \init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{perror(filename);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Skipping~}\njo0{\%s~}\njo0{\%ld~}\njo0{{\mm}$>$~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{36}{filename,}\njo{46}{filesize);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=0;}\njo{20}{i$<$filesize;}\njo{32}{++i)}\njo{37}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{printStatus(i);}\njo0{ }\n\ped \init{8}{}\njo{-8}{decode(en);}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{6}{}\njo{-6}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{not~}\njo0{extracted\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo{29}{User}\njo{34}{Interface}\njo{44}{}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\njo0{/}\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Read}\njo{8}{one}\njo{12}{line,}\njo{18}{{\keywordfont
return}}\njo{25}{NULL}\njo{30}{at}\njo{33}{EOF}\njo{37}{or}\njo{40}{$\hat{~}$Z.}\jmpo{45}{f}\njo{47}{may}\njo{51}{be}\njo{54}{opened}\njo{61}{ascii}\njo{67}{or}\njo{70}{binary.
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Trailing}\njo{12}{\bs{1}r\bs{1}n}\njo{17}{is}\njo{20}{dropped.}\jmpo{30}{Line}\njo{35}{length}\njo{42}{is}\njo{45}{unlimited.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
const}}\njo{6}{{\keywordfont char}}\njo0{$\ast$}\njo{12}{getline(FILE}\njo{25}{}\njo0{$\ast$f}\njo0{=stdin)}\njo{35}{}\njo0{\brl{}
}\n\ped \init{2}{}\njo{-2}{{\keywordfont static}}\njo{9}{String}\njo{16}{s;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{len}\njo0{=0,}\njo{13}{c;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont while}}\njo{8}{((c}\njo0{=getc(f))}\njo0{!=EOF}\njo{26}{}\njo0{\&\&}\njo{29}{c}\njo0{!=26}\njo{35}{}\njo0{\&\&}\njo{38}{c}\njo0{!=\sq{}\bs{1}n\sq{})}\njo{47}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(len}\njo0{$>$=s.size())}\njo{23}{s.resize(len}\njo0{$\ast$2}\njo0{+1);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(c}\njo0{!=\sq{}\bs{1}r\sq{})}\njo{17}{s{[}len++]}\njo0{=c;}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(len}\njo0{$>$=s.size())}\njo{21}{s.resize(len}\njo0{+1);}\njo0{
}\n\ped \init{2}{}\njo{-2}{s{[}len]}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(c}\njo0{==EOF}\njo{13}{}\njo0{$\mid$$\mid$}\njo{16}{c}\njo0{==26)
}\n\ped \init{4}{}\njo{-4}{{\keywordfont return}}\njo{11}{0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{else }\n\ped \init{4}{}\njo{-4}{{\keywordfont
return}}\njo{11}{s.c{\ul}str();}\njo0{ }\n\ped \init0{}\njo0{\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{{\keywordfont
int}}\njo{7}{expand(String\&}\njo{22}{archive,}\njo{31}{String\&}\njo{39}{s,}\njo{42}{{\keywordfont
const}}\njo{48}{{\keywordfont char}}\njo0{$\ast$}\njo{54}{fname,}\njo{61}{{\keywordfont
int}}\njo{65}{base)}\njo{71}{}\njo0{\brl{} }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Given}\njo{9}{file}\njo{14}{name}\njo{19}{fname,}\njo{26}{print}\njo{32}{its}\njo{36}{length}\njo{43}{and}\njo{47}{base}\njo{52}{name}\njo{57}{(beginning
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{at}\njo{6}{fname}\njo0{+base)}\njo{18}{to}\njo{21}{archive}\njo{29}{in}\njo{32}{format}\njo{39}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%ld\bs{1}t\%s\bs{1}r\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{53}{and}\njo{57}{append}\njo{64}{the
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{full}\njo{8}{name}\njo{13}{(including}\njo{24}{path)}\njo{30}{to}\njo{33}{String}\njo{40}{s}\njo{42}{in}\njo{45}{format}\njo{52}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%s\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{.}\jmpo{61}{If}\njo{64}{fname
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{is}\njo{6}{a}\njo{8}{directory}\njo{18}{then}\njo{23}{substitute}\njo{34}{all}\njo{38}{of}\njo{41}{its}\njo{45}{regular}\njo{53}{files}\njo{59}{and}\njo{63}{recursively}\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{expand}\njo{10}{any}\njo{14}{subdirectories.}\jmpo{31}{Base}\njo{36}{initially}\njo{46}{points}\njo{53}{to}\njo{56}{the}\njo{60}{first
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{character}\njo{13}{after}\njo{19}{the}\njo{23}{last}\njo{28}{}\njo0{/}\njo{30}{in}\njo{33}{fname,}\njo{40}{but}\njo{44}{in}\njo{47}{subdirectories}\njo{62}{includes
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{the}\njo{7}{path}\njo{12}{from}\njo{17}{the}\njo{21}{topmost}\njo{29}{directory.}\jmpo{41}{Return}\njo{48}{the}\njo{52}{number}\njo{59}{of}\njo{62}{files
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{whose}\njo{9}{names}\njo{15}{are}\njo{19}{appended}\njo{28}{to}\njo{31}{s}\njo{33}{and}\njo{37}{archive.
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{Same}\njo{8}{as}\njo{11}{expand()}\njo{20}{except}\njo{27}{fname}\njo{33}{is}\njo{36}{an}\njo{39}{ordinary}\njo{48}{file
}\n\ped \init0{}\njo0{{\keywordfont int}}\njo{4}{putsize(String\&}\njo{20}{archive,}\njo{29}{String\&}\njo{37}{s,}\njo{40}{{\keywordfont
const}}\njo{46}{{\keywordfont char}}\njo0{$\ast$}\njo{52}{fname,}\njo{59}{{\keywordfont
int}}\njo{63}{base)}\njo{69}{}\njo0{\brl{} }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{result}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{FILE}\njo{7}{}\njo0{$\ast$f}\njo0{=fopen(fname,}\njo{23}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{rb\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(f)}\njo{9}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{fseek(f,}\njo{13}{0,}\njo{16}{SEEK{\ul}END);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont long}}\njo{9}{len}\njo0{=ftell(f);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(len}\njo0{$>$=0)}\njo{16}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{{\keywordfont static}}\njo{13}{{\keywordfont
char}}\njo{18}{blk{[}24];}\njo0{ }\n\ped \init{6}{}\njo{-6}{sprintf(blk,}\njo{19}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%ld\bs{1}t\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{28}{len);}\njo0{
}\n\ped \init{6}{}\njo{-6}{archive}\njo0{+=blk;}\njo0{
}\n\ped \init{6}{}\njo{-6}{archive}\njo0{+=(fname}\njo0{+base);}\njo0{
}\n\ped \init{6}{}\njo{-6}{archive}\njo0{+=\qql}\stringfont\pes{\bs{1}}{0}\njo0{\bs{1}r\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{;}\njo0{ }\n\ped
\init{6}{}\njo{-6}{s}\njo0{+=fname;}\njo0{ }\n\ped
\init{6}{}\njo{-6}{s}\njo0{+=\qql}\stringfont\pes{\bs{1}}{0}\njo0{\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{;}\njo0{ }\n\ped
\init{6}{}\njo{-6}{++result;}\njo0{ }\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{
}\n\ped \init{4}{}\njo{-4}{fclose(f);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
return}}\njo{9}{result;}\njo0{ }\n\ped \init0{}\njo0{\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont ifdef}}\njo{7}{WINDOWS
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
int}}\njo{4}{expand(String\&}\njo{19}{archive,}\njo{28}{String\&}\njo{36}{s,}\njo{39}{{\keywordfont
const}}\njo{45}{{\keywordfont char}}\njo0{$\ast$}\njo{51}{fname,}\njo{58}{{\keywordfont
int}}\njo{62}{base)}\njo{68}{}\njo0{\brl{} }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{result}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{DWORD}\njo{8}{attr}\njo0{=GetFileAttributes(fname);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(attr}\njo{11}{\&}\njo{13}{FILE{\ul}ATTRIBUTE{\ul}DIRECTORY)}\njo{39}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{WIN32{\ul}FIND{\ul}DATA}\njo{20}{ffd;}\njo0{
}\n\ped \init{4}{}\njo{-4}{String}\njo{11}{fdir(fname);}\njo0{
}\n\ped \init{4}{}\njo{-4}{fdir}\njo0{+=\qql}\stringfont\pes{\bs{1}}{0}\njo0{/$\ast$\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{;}\njo0{ }\n\ped
\init{4}{}\njo{-4}{HANDLE}\njo{11}{h}\njo0{=FindFirstFile(fdir.c{\ul}str(),}\njo{41}{\&ffd);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont while}}\njo{10}{(h}\njo0{!=INVALID{\ul}HANDLE{\ul}VALUE)}\njo{36}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(!equals(ffd.cFileName,}\njo{33}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{)}\njo{38}{}\njo0{\&\&}\njo{41}{!equals(ffd.cFileName,}\njo{64}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{..\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{))}\njo{71}{}\njo0{\brl{}
}\n\ped \init{8}{}\njo{-8}{String}\njo{15}{d(fname);}\njo0{
}\n\ped \init{8}{}\njo{-8}{d}\njo0{+=\qql}\stringfont\pes{\bs{1}}{0}\njo0{/\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{;}\njo0{ }\n\ped
\init{8}{}\njo{-8}{d}\njo0{+=ffd.cFileName;}\njo0{ }\n\ped
\init{8}{}\njo{-8}{result}\njo0{+=expand(archive,}\njo{32}{s,}\njo{35}{d.c{\ul}str(),}\njo{46}{base);}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(FindNextFile(h,}\njo{26}{\&ffd)}\njo0{!=TRUE)}\njo{39}{{\keywordfont
break};}\njo0{ }\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{
}\n\ped \init{4}{}\njo{-4}{FindClose(h);}\njo0{ }\n\ped
\init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped \init{2}{}\njo{-2}{{\keywordfont
else}}\njo{7}{}\njo0{/}\njo0{/}\njo{10}{ordinary}\njo{19}{file
}\n\ped \init{4}{}\njo{-4}{result}\njo0{+=putsize(archive,}\njo{29}{s,}\njo{32}{fname,}\njo{39}{base);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{result;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{\#else }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont ifdef}}\njo{7}{UNIX
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
int}}\njo{4}{expand(String\&}\njo{19}{archive,}\njo{28}{String\&}\njo{36}{s,}\njo{39}{{\keywordfont
const}}\njo{45}{{\keywordfont char}}\njo0{$\ast$}\njo{51}{fname,}\njo{58}{{\keywordfont
int}}\njo{62}{base)}\njo{68}{}\njo0{\brl{} }\n\ped
\init{2}{}\njo{-2}{{\keywordfont int}}\njo{6}{result}\njo0{=0;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont struct}}\njo{9}{stat}\njo{14}{sb;}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(stat(fname,}\njo{18}{\&sb)$<$0)}\njo{26}{{\keywordfont
return}}\njo{33}{0;}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{If}\njo{8}{a}\njo{10}{regular}\njo{18}{file}\njo{23}{and}\njo{27}{readable,}\njo{37}{get}\njo{41}{file}\njo{46}{size
}\n\ped \init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(sb.st{\ul}mode}\njo{17}{\&}\njo{19}{S{\ul}IFREG}\njo{27}{}\njo0{\&\&}\njo{30}{sb.st{\ul}mode}\njo{41}{\&}\njo{43}{0400)
}\n\ped \init{4}{}\njo{-4}{result}\njo0{+=putsize(archive,}\njo{29}{s,}\njo{32}{fname,}\njo{39}{base);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{2}{}\njo{-2}{}\njo0{/}\njo0{/}\njo{5}{If}\njo{8}{a}\njo{10}{directory}\njo{20}{with}\njo{25}{read}\njo{30}{and}\njo{34}{execute}\njo{42}{permission,}\njo{54}{traverse}\njo{63}{it
}\n\ped \init{2}{}\njo{-2}{{\keywordfont else}}\njo{7}{{\keywordfont
if}}\njo{10}{(sb.st{\ul}mode}\njo{22}{\&}\njo{24}{S{\ul}IFDIR}\njo{32}{}\njo0{\&\&}\njo{35}{sb.st{\ul}mode}\njo{46}{\&}\njo{48}{0400}\njo{53}{}\njo0{\&\&}\njo{56}{sb.st{\ul}mode}\njo{67}{\&}\njo{69}{0100)}\njo{75}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{DIR}\njo{8}{}\njo0{$\ast$dirp}\njo0{=opendir(fname);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(!dirp)}\njo{15}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{perror(\qql}\stringfont\pes{\bs{1}}{0}\njo0{opendir\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont return}}\njo{13}{result;}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{dirent}\njo{11}{}\njo0{$\ast$dp;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont while}(errno}\njo0{=0,}\njo{19}{(dp}\njo0{=readdir(dirp))}\njo0{!=0)}\njo{42}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(!equals(dp}\njo0{{\mm}$>$d{\ul}name,}\njo{30}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{)}\njo{35}{}\njo0{\&\&}\njo{38}{!equals(dp}\njo0{{\mm}$>$d{\ul}name,}\njo{58}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{..\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{))}\njo{65}{}\njo0{\brl{}
}\n\ped \init{8}{}\njo{-8}{String}\njo{15}{d(fname);}\njo0{
}\n\ped \init{8}{}\njo{-8}{d}\njo0{+=\qql}\stringfont\pes{\bs{1}}{0}\njo0{/\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{;}\njo0{ }\n\ped
\init{8}{}\njo{-8}{d}\njo0{+=dp}\njo0{{\mm}$>$d{\ul}name;}\njo0{
}\n\ped \init{8}{}\njo{-8}{result}\njo0{+=expand(archive,}\njo{32}{s,}\njo{35}{d.c{\ul}str(),}\njo{46}{base);}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init{4}{}\njo{-4}{{\keywordfont
if}}\njo{7}{(errno)}\njo{15}{perror(\qql}\stringfont\pes{\bs{1}}{0}\njo0{readdir\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{4}{}\njo{-4}{closedir(dirp);}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont else}}\njo{7}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%s~}\njo0{is~}\njo0{not~}\njo0{a~}\njo0{readable~}\njo0{file~}\njo0{or~}\njo0{directory\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{58}{fname);}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{result;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
else}}\jmpo{7}{}\njo0{/}\njo0{/}\njo{10}{Not}\njo{14}{WINDOWS}\njo{22}{or}\njo{25}{UNIX,}\njo{31}{ignore}\njo{38}{directories
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
int}}\njo{4}{expand(String\&}\njo{19}{archive,}\njo{28}{String\&}\njo{36}{s,}\njo{39}{{\keywordfont
const}}\njo{45}{{\keywordfont char}}\njo0{$\ast$}\njo{51}{fname,}\njo{58}{{\keywordfont
int}}\njo{62}{base)}\njo{68}{}\njo0{\brl{} }\n\ped
\init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{putsize(archive,}\njo{26}{s,}\njo{29}{fname,}\njo{36}{base);}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\jmpo{3}{ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{\#endif }\n\ped \init0{}\njo0{\#endif
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{ }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{To}\njo{6}{compress}\njo{15}{to}\njo{18}{file1.paq8f:}\njo{31}{paq8f}\njo{37}{{[}}\njo0{{\mm}n]}\njo{42}{file1}\njo{48}{{[}file2...]
}\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\njo{3}{To}\njo{6}{decompress:}\njo{18}{paq8f}\njo{24}{file1.paq8f}\njo{36}{{[}output{\ul}dir]
}\n\ped \init0{}\njo0{{\keywordfont int}}\njo{4}{main({\keywordfont
int}}\njo{13}{argc,}\njo{19}{{\keywordfont char}\mast{2}}\njo{26}{argv)}\njo{32}{}\njo0{\brl{}}\n\ped
\init{2}{}\njo{-2}{bool}\njo{7}{pause}\njo0{=argc}\njo0{$<$=2;}\jmpo{23}{}\njo0{/}\njo0{/}\njo{26}{Pause}\njo{32}{when}\njo{37}{done?
}\n\ped \init{2}{}\njo{-2}{try}\njo{6}{}\njo0{\brl{}
}\n\ped \init0{}\njo0{ }\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Get}\njo{11}{option
}\n\ped \init{4}{}\njo{-4}{bool}\njo{9}{doExtract}\njo0{=false;}\jmpo{27}{}\njo0{/}\njo0{/}\njo{30}{}\njo0{{\mm}d}\njo{33}{option
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(argc$>$1}\njo{15}{}\njo0{\&\&}\njo{18}{argv{[}1]{[}0]}\njo0{=={\sq}{\mm}{\sq}}\njo{34}{}\njo0{\&\&}\njo{37}{argv{[}1]{[}1]}\njo{48}{}\njo0{\&\&}\njo{51}{!argv{[}1]{[}2])}\njo{64}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(argv{[}1]{[}1]}\njo0{=={\sq}d{\sq})
}\n\ped \init{8}{}\njo{-8}{doExtract}\njo0{=true;}\njo0{
}\n\ped \init{6}{}\njo{-6}{else }\n\ped \init{8}{}\njo{-8}{quit(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Valid~}\njo0{options~}\njo0{are~}\njo0{{\mm}0~}\njo0{through~}\njo0{{\mm}9~}\njo0{or~}\njo0{{\mm}d\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\mm\mm}argc;}\njo0{ }\n\ped
\init{6}{}\njo{-6}{++argv;}\njo0{ }\n\ped \init{6}{}\njo{-6}{pause}\njo0{=false;}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Print}\njo{13}{help}\njo{18}{message
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(argc$<$2)}\njo{16}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{printf(PROGNAME}\njo{22}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{archiver~}\njo0{(C)~}\njo0{2006,~}\njo0{Matt~}\njo0{Mahoney.\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{Free~}\njo0{under~}\njo0{GPL,~}\njo0{http://www.gnu.org/licenses/gpl.txt\bs{1}n}\njo0{\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont ifdef}}\njo{7}{WINDOWS
}\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{To~}\njo0{compress~}\njo0{or~}\njo0{extract,~}\njo0{drop~}\njo0{a~}\njo0{file~}\njo0{or~}\njo0{folder~}\njo0{on~}\njo0{the~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{PROGNAME}\njo{17}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{icon.\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{The~}\njo0{output~}\njo0{will~}\njo0{be~}\njo0{put~}\njo0{in~}\njo0{the~}\njo0{same~}\njo0{folder~}\njo0{as~}\njo0{the~}\njo0{input.\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{Or~}\njo0{from~}\njo0{a~}\njo0{command~}\njo0{window:~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init0{}\njo0{\#endif
}\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{To~}\njo0{compress:\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{13}{PROGNAME}\njo{22}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{file~~~~~~~~~~~~~~~}\njo0{(compresses~}\njo0{to~}\njo0{file.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{65}{PROGNAME}\njo{74}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{)\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{13}{PROGNAME}\njo{22}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~~}\njo0{archive~}\njo0{files...~~~}\njo0{(creates~}\njo0{archive.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{63}{PROGNAME}\njo{72}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{)\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{13}{PROGNAME}\njo{22}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{file~~~~~~~~~~~~~~~~~~~~~~}\njo0{(~}\njo0{pause~}\njo0{when~}\njo0{done)\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont if}}\njo{4}{{\keywordfont
defined}(WINDOWS)}\njo{21}{}\njo0{$\mid$$\mid$}\njo{24}{{\keywordfont
defined}}\njo{32}{(UNIX) }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{You~}\njo0{may~}\njo0{also~}\njo0{compress~}\njo0{directories.\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\n\ped \init0{}\njo0{\#endif
}\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{To~}\njo0{extract~}\njo0{or~}\njo0{compare:\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{13}{PROGNAME}\njo{22}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{{\mm}d~}\njo0{dir1/archive.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{42}{PROGNAME}\njo{51}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~~~~~~}\njo0{(extract~}\njo0{to~}\njo0{dir1)\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{13}{PROGNAME}\njo{22}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{{\mm}d~}\njo0{dir1/archive.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{42}{PROGNAME}\njo{51}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{dir2~}\njo0{(extract~}\njo0{to~}\njo0{dir2)\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~~}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{13}{PROGNAME}\njo{22}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{archive.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{34}{PROGNAME}\njo{43}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~~~~~~~~~~~~~~}\njo0{(extract,~}\njo0{pause~}\njo0{when~}\njo0{done)\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{To~}\njo0{view~}\njo0{contents:~}\njo0{more~}\njo0{$<$~}\njo0{archive.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{44}{PROGNAME}\njo{53}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{quit();}\njo0{ }\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{4}{}\njo{-4}{FILE}\njo0{$\ast$}\njo{10}{archive}\njo0{=0;}\jmpo{22}{}\njo0{/}\njo0{/}\njo{25}{compressed}\njo{36}{file
}\n\ped \init{4}{}\njo{-4}{{\keywordfont int}}\njo{8}{files}\njo0{=0;}\jmpo{18}{}\njo0{/}\njo0{/}\njo{21}{number}\njo{28}{of}\njo{31}{files}\njo{37}{to}\njo{40}{compress}\njo0{/decompress}\n\ped
\init{4}{}\njo{-4}{Array$<${\keywordfont char}}\njo0{$\ast$$>$}\njo{17}{fname(1);}\jmpo{28}{}\njo0{/}\njo0{/}\njo{31}{file}\njo{36}{names}\njo{42}{(resized}\njo{51}{to}\njo{54}{files)
}\n\ped \init{4}{}\njo{-4}{Array$<$long$>$}\njo{16}{fsize(1);}\jmpo{28}{}\njo0{/}\njo0{/}\njo{31}{file}\njo{36}{lengths}\njo{44}{(resized}\njo{53}{to}\njo{56}{files)
}\n\ped \init0{}\njo0{ }\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Compress}\njo{16}{or}\njo{19}{decompress?}\jmpo{32}{Get}\njo{36}{archive}\njo{44}{name
}\n\ped \init{4}{}\njo{-4}{Mode}\njo{9}{mode}\njo0{=COMPRESS;}\njo0{
}\n\ped \init{4}{}\njo{-4}{String}\njo{11}{archiveName(argv{[}1]);}\njo0{
}\n\ped \init{4}{}\njo{-4}{}\njo0{\brl{} }\n\ped
\init{6}{}\njo{-6}{{\keywordfont const}}\njo{12}{{\keywordfont
int}}\njo{16}{prognamesize}\njo0{=strlen(PROGNAME);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont const}}\njo{12}{{\keywordfont
int}}\njo{16}{arg1size}\njo0{=strlen(argv{[}1]);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(arg1size$>$prognamesize}\njo0{+1}\njo{34}{}\njo0{\&\&}\njo{37}{argv{[}1]{[}arg1size}\njo0{{\mm}prognamesize}\njo0{{\mm}1]}\njo0{=={\sq}.{\sq}
}\n\ped \init{10}{}\njo{-10}{}\njo0{\&\&}\njo{13}{equals(PROGNAME,}\njo{30}{argv{[}1]}\njo0{+arg1size}\njo0{{\mm}prognamesize))}\njo{62}{}\njo0{\brl{}
}\n\ped \init{8}{}\njo{-8}{mode}\njo0{=DECOMPRESS;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont else}}\njo{11}{{\keywordfont
if}}\njo{14}{(doExtract) }\n\ped \init{8}{}\njo{-8}{mode}\njo0{=DECOMPRESS;}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont else}}\njo{11}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{archiveName}\njo0{+=\qql}\stringfont\pes{\bs{1}}{0}\njo0{.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{;}\njo0{ }\n\ped
\init{8}{}\njo{-8}{archiveName}\njo0{+=PROGNAME;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init{3}{}\njo{-3}{
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Compress:}\njo{17}{write}\njo{23}{archive}\njo{31}{header,}\njo{39}{get}\njo{43}{file}\njo{48}{names}\njo{54}{and}\njo{58}{sizes
}\n\ped \init{4}{}\njo{-4}{String}\njo{11}{filenames;}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(mode}\njo0{==COMPRESS)}\njo{24}{}\njo0{\brl{}
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{Expand}\njo{16}{filenames}\njo{26}{to}\njo{29}{read}\njo{34}{later.}\jmpo{42}{Write}\njo{48}{their}\njo{54}{base}\njo{59}{names}\njo{65}{and}\njo{69}{sizes
}\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{to}\njo{12}{archive.
}\n\ped \init{6}{}\njo{-6}{String}\njo{13}{header{\ul}string;}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=1;}\njo{20}{i$<$argc;}\njo{28}{++i)}\njo{33}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{String}\njo{15}{name(argv{[}i]);}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont int}}\njo{12}{len}\njo0{=name.size()}\njo0{{\mm}1;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont for}}\njo{12}{({\keywordfont
int}}\njo{17}{j}\njo0{=0;}\njo{22}{j}\njo0{$<$=len;}\njo{30}{++j)}\jmpo{36}{}\njo0{/}\njo0{/}\njo{39}{change}\njo{46}{\bs{1}}\njo{48}{to}\njo{51}{}\njo0{/
}\n\ped \init{10}{}\njo{-10}{{\keywordfont if}}\njo{13}{(name{[}j]}\njo0{==\sq{}\bs{2}\sq{})}\njo{29}{name{[}j]}\njo0{={\sq}/{\sq};}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont while}}\njo{14}{(len$>$0}\njo{21}{}\njo0{\&\&}\njo{24}{name{[}len}\njo0{{\mm}1]}\njo0{=={\sq}/{\sq})}\jmpo{43}{}\njo0{/}\njo0{/}\njo{46}{remove}\njo{53}{trailing}\njo{62}{}\njo0{/
}\n\ped \init{10}{}\njo{-10}{name{[}{\mm\mm}len]}\njo0{=0;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont int}}\njo{12}{base}\njo0{=len}\njo0{{\mm}1;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont while}}\njo{14}{(base}\njo0{$>$=0}\njo{23}{}\njo0{\&\&}\njo{26}{name{[}base]}\njo0{!={\sq}/{\sq})}\njo{43}{{\mm\mm}base;}\jmpo{52}{}\njo0{/}\njo0{/}\njo{55}{find}\njo{60}{last}\njo{65}{}\njo0{/
}\n\ped \init{8}{}\njo{-8}{++base;}\njo0{ }\n\ped
\init{8}{}\njo{-8}{{\keywordfont if}}\njo{11}{(base}\njo0{==0}\njo{20}{}\njo0{\&\&}\njo{23}{len}\njo0{$>$=2}\njo{30}{}\njo0{\&\&}\njo{33}{name{[}1]}\njo0{=={\sq}:{\sq})}\njo{47}{base}\njo0{=2;}\jmpo{56}{}\njo0{/}\njo0{/}\njo{59}{chop}\njo{64}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{C:\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{8}{}\njo{-8}{{\keywordfont
int}}\njo{12}{expanded}\njo0{=expand(header{\ul}string,}\njo{43}{filenames,}\njo{54}{name.c{\ul}str(),}\njo{68}{base);}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont if}}\njo{11}{(!expanded}\njo{22}{}\njo0{\&\&}\njo{25}{(i$>$1}\njo0{$\mid$$\mid$argc}\njo0{==2))
}\n\ped \init{10}{}\njo{-10}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%s:~}\njo0{not~}\njo0{found,~}\njo0{skipping...\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{49}{name.c{\ul}str());}\njo0{
}\n\ped \init{8}{}\njo{-8}{files}\njo0{+=expanded;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{If}\njo{12}{archive}\njo{20}{doesn\sq{}t}\njo{28}{exist}\njo{34}{and}\njo{38}{there}\njo{44}{is}\njo{47}{at}\njo{50}{least}\njo{56}{one}\njo{60}{file}\njo{65}{to}\njo{68}{compress
}\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{then}\njo{14}{create}\njo{21}{the}\njo{25}{archive}\njo{33}{header.
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(files$<$1)}\njo{19}{quit(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Nothing~}\njo0{to~}\njo0{compress\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{8}{archive}\njo0{=fopen(archiveName.c{\ul}str(),}\njo{43}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{rb\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{8}{{\keywordfont
if}}\njo{11}{(archive) }\n\ped \init0{}\njo0{}\njo0{/}\njo0{/}\jmpo{10}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%s~}\njo0{already~}\njo0{exists\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{40}{archiveName.c{\ul}str()),}\njo{62}{quit();}\njo0{
}\n\ped \init{6}{}\njo{-6}{archive}\njo0{=fopen(archiveName.c{\ul}str(),}\njo{41}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{wb+\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(!archive)}\njo{20}{perror(archiveName.c{\ul}str()),}\njo{49}{quit();}\njo0{
}\n\ped \init{6}{}\njo{-6}{fprintf(archive,}\njo{23}{PROGNAME}\njo{32}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{{\mm}\%d\bs{1}r\bs{1}n}\njo0{\%s\bs{1}x1A\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo0{ }\n\ped
\init{8}{}\njo{-8}{level,}\njo{15}{header{\ul}string.c{\ul}str());}\njo0{
}\n\ped \init{6}{}\njo{-6}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Creating~}\njo0{archive~}\njo0{\%s~}\njo0{with~}\njo0{\%d~}\njo0{file(s)...\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo0{ }\n\ped
\init{8}{}\njo{-8}{archiveName.c{\ul}str(),}\njo{29}{files);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{Fill}\njo{14}{fname{[}files],}\njo{28}{fsize{[}files]}\njo{41}{with}\njo{46}{input}\njo{52}{filenames}\njo{62}{and}\njo{66}{sizes
}\n\ped \init{6}{}\njo{-6}{fname.resize(files);}\njo0{
}\n\ped \init{6}{}\njo{-6}{fsize.resize(files);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont char}}\njo{11}{}\njo0{$\ast$p}\njo0{=\&filenames{[}0];}\njo0{
}\n\ped \init{6}{}\njo{-6}{rewind(archive);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{getline(archive);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=0;}\njo{20}{i$<$files;}\njo{29}{++i)}\njo{34}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{{\keywordfont const}}\njo{14}{{\keywordfont
char}}\njo{19}{}\njo0{$\ast$num}\njo0{=getline(archive);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(num);}\njo0{ }\n\ped
\init{8}{}\njo{-8}{fsize{[}i]}\njo0{=atol(num);}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(fsize{[}i]}\njo0{$>$=0);}\njo0{
}\n\ped \init{8}{}\njo{-8}{fname{[}i]}\njo0{=p;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont while}}\njo{14}{(}\njo0{$\ast$p}\njo0{!=\sq{}\bs{1}n\sq{})}\njo{25}{++p;}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(p}\njo0{{\mm}filenames.c{\ul}str()$<$filenames.size());}\njo0{
}\n\ped \init{8}{}\njo{-8}{}\njo0{$\ast$p++}\njo0{=0;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{6}{}\njo{-6}{fseek(archive,}\njo{21}{0,}\njo{24}{SEEK{\ul}END);}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Decompress:}\njo{19}{open}\njo{24}{archive}\njo{32}{{\keywordfont
for}}\njo{36}{reading}\njo{44}{and}\njo{48}{store}\njo{54}{file}\njo{59}{names}\njo{65}{and}\njo{69}{sizes
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(mode}\njo0{==DECOMPRESS)}\njo{26}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{archive}\njo0{=fopen(archiveName.c{\ul}str(),}\njo{41}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{rb+\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(!archive)}\njo{20}{perror(archiveName.c{\ul}str()),}\njo{49}{quit();}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{Check}\njo{15}{{\keywordfont
for}}\njo{19}{proper}\njo{26}{format}\njo{33}{and}\njo{37}{get}\njo{41}{option
}\n\ped \init{6}{}\njo{-6}{{\keywordfont const}}\njo{12}{{\keywordfont
char}}\njo0{$\ast$}\njo{18}{header}\njo0{=getline(archive);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(strncmp(header,}\njo{26}{PROGNAME}\njo{35}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{~}\njo0{{\mm}\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{41}{strlen(PROGNAME)}\njo0{+2))
}\n\ped \init{8}{}\njo{-8}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%s:~}\njo0{not~}\njo0{a~}\njo0{\%s~}\njo0{file\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{38}{archiveName.c{\ul}str(),}\njo{59}{PROGNAME),}\njo{70}{quit();}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{}\njo0{/}\njo0{/}\njo{9}{Fill}\njo{14}{fname{[}files],}\njo{28}{fsize{[}files]}\njo{41}{with}\njo{46}{output}\njo{53}{file}\njo{58}{names}\njo{64}{and}\njo{68}{sizes
}\n\ped \init{6}{}\njo{-6}{{\keywordfont while}}\njo{12}{(getline(archive))}\njo{31}{++files;}\jmpo{41}{}\njo0{/}\njo0{/}\njo{44}{count}\njo{50}{files
}\n\ped \init{6}{}\njo{-6}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{Extracting~}\njo0{\%d~}\njo0{file(s)~}\njo0{from~}\njo0{\%s~}\njo0{{\mm}\%d\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{52}{files,}\njo0{
}\n\ped \init{8}{}\njo{-8}{archiveName.c{\ul}str(),}\njo{29}{level);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont long}}\njo{11}{header{\ul}size}\njo0{=ftell(archive);}\njo0{
}\n\ped \init{6}{}\njo{-6}{filenames.resize(header{\ul}size}\njo0{+4);}\jmpo{40}{}\njo0{/}\njo0{/}\njo{43}{copy}\njo{48}{of}\njo{51}{header}\n\ped
\init{6}{}\njo{-6}{rewind(archive);}\njo0{ }\n\ped \init{6}{}\njo{-6}{fread(\&filenames{[}0],}\njo{27}{1,}\njo{30}{header{\ul}size,}\njo{43}{archive);}\njo0{
}\n\ped \init{6}{}\njo{-6}{fname.resize(files);}\njo0{
}\n\ped \init{6}{}\njo{-6}{fsize.resize(files);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont char}}\njo0{$\ast$}\njo{12}{p}\njo0{=\&filenames{[}0];}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont while}}\njo{12}{(}\njo0{$\ast$p}\njo{16}{}\njo0{\&\&}\njo{19}{}\njo0{$\ast$p}\njo0{!=\sq{}\bs{1}r\sq{})}\njo{29}{++p;}\jmpo{35}{}\njo0{/}\njo0{/}\njo{38}{skip}\njo{43}{first}\njo{49}{line
}\n\ped \init{6}{}\njo{-6}{++p;}\njo0{ }\n\ped \init{6}{}\njo{-6}{{\keywordfont
for}}\njo{10}{({\keywordfont int}}\njo{15}{i}\njo0{=0;}\njo{20}{i$<$files;}\njo{29}{++i)}\njo{34}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{fsize{[}i]}\njo0{=atol(p}\njo0{+1);}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont while}}\njo{14}{(}\njo0{$\ast$p}\njo{18}{}\njo0{\&\&}\njo{21}{}\njo0{$\ast$p}\njo0{!=\sq{}\bs{1}t\sq{})}\njo{31}{++p;}\njo0{
}\n\ped \init{8}{}\njo{-8}{fname{[}i]}\njo0{=p}\njo0{+1;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont while}}\njo{14}{(}\njo0{$\ast$p}\njo{18}{}\njo0{\&\&}\njo{21}{}\njo0{$\ast$p}\njo0{!=\sq{}\bs{1}r\sq{})}\njo{31}{++p;}\njo0{
}\n\ped \init{8}{}\njo{-8}{{\keywordfont if}}\njo{11}{(!}\njo0{$\ast$p)}\njo{17}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%s:~}\njo0{header~}\njo0{corrupted~}\njo0{at~}\njo0{\%d\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{56}{archiveName.c{\ul}str(),}\njo0{
}\n\ped \init{10}{}\njo{-10}{p}\njo0{{\mm}\&filenames{[}0]),}\njo{28}{quit();}\njo0{
}\n\ped \init{8}{}\njo{-8}{assert(p}\njo0{{\mm}\&filenames{[}0]$<$header{\ul}size);}\njo0{
}\n\ped \init{8}{}\njo{-8}{}\njo0{$\ast$p++}\njo0{=0;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init{8}{}\njo{-8}{
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Set}\njo{11}{globals}\njo{19}{according}\njo{29}{to}\njo{32}{option
}\n\ped \init{4}{}\njo{-4}{assert(level}\njo0{$>$=0}\njo{20}{}\njo0{\&\&}\njo{23}{level}\njo0{$<$=9);}\njo0{
}\n\ped \init{4}{}\njo{-4}{buf.setsize(MEM}\njo0{$\ast$8);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Compress}\njo{16}{or}\njo{19}{decompress}\njo{30}{files
}\n\ped \init{4}{}\njo{-4}{assert(fname.size()}\njo0{==files);}\njo0{
}\n\ped \init{4}{}\njo{-4}{assert(fsize.size()}\njo0{==files);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont long}}\njo{9}{total{\ul}size}\njo0{=0;}\jmpo{24}{}\njo0{/}\njo0{/}\njo{27}{sum}\njo{31}{of}\njo{34}{file}\njo{39}{sizes
}\n\ped \init{4}{}\njo{-4}{{\keywordfont for}}\njo{8}{({\keywordfont
int}}\njo{13}{i}\njo0{=0;}\njo{18}{i$<$files;}\njo{27}{++i)}\njo{32}{total{\ul}size}\njo0{+=fsize{[}i];}\njo0{
}\n\ped \init{4}{}\njo{-4}{Encoder}\njo{12}{en(mode,}\njo{21}{archive);}\njo0{
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(mode}\njo0{==COMPRESS)}\njo{24}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=0;}\njo{20}{i$<$files;}\njo{29}{++i)
}\n\ped \init{8}{}\njo{-8}{compress(fname{[}i],}\njo{27}{fsize{[}i],}\njo{37}{en);}\njo0{
}\n\ped \init{6}{}\njo{-6}{en.flush();}\njo0{ }\n\ped
\init{6}{}\njo{-6}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%ld~}\njo0{{\mm}$>$~}\njo0{\%ld\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{29}{total{\ul}size,}\njo{41}{en.size());}\njo0{
}\n\ped \init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{Decompress}\njo{18}{files}\njo{24}{to}\njo{27}{dir2:}\njo{33}{paq8f}\njo{39}{}\njo0{{\mm}d}\njo{42}{dir1}\njo0{/archive.paq8f}\njo{61}{dir2
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{If}\njo{10}{there}\njo{16}{is}\njo{19}{no}\njo{22}{dir2,}\njo{28}{then}\njo{33}{extract}\njo{41}{to}\njo{44}{dir1
}\n\ped \init{4}{}\njo{-4}{}\njo0{/}\njo0{/}\njo{7}{If}\njo{10}{there}\njo{16}{is}\njo{19}{no}\njo{22}{dir1,}\njo{28}{then}\njo{33}{extract}\njo{41}{to}\njo{44}{.
}\n\ped \init{4}{}\njo{-4}{{\keywordfont else}}\njo{9}{}\njo0{\brl{}}\n\ped
\init{6}{}\njo{-6}{assert(argc}\njo0{$>$=2);}\njo0{
}\n\ped \init{6}{}\njo{-6}{String}\njo{13}{dir(argc$>$2?argv{[}2]:argv{[}1]);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(argc}\njo0{==2)}\njo{19}{}\njo0{\brl{}}\jmpo{22}{}\njo0{/}\njo0{/}\njo{25}{chop}\njo{30}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{/archive.paq8f\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\n\ped \init{8}{}\njo{-8}{{\keywordfont
int}}\njo{12}{i;}\njo0{ }\n\ped \init{8}{}\njo{-8}{{\keywordfont
for}}\njo{12}{(i}\njo0{=dir.size()}\njo0{{\mm}2;}\njo{29}{i}\njo0{$>$=0;}\njo{35}{{\mm\mm}i)}\njo{40}{}\njo0{\brl{}
}\n\ped \init{10}{}\njo{-10}{{\keywordfont if}}\njo{13}{(dir{[}i]}\njo0{=={\sq}/{\sq}}\njo{26}{}\njo0{$\mid$$\mid$}\njo{29}{dir{[}i]}\njo0{==\sq{}\bs{2}\sq{})}\njo{43}{}\njo0{\brl{}
}\n\ped \init{12}{}\njo{-12}{dir{[}i]}\njo0{=0;}\njo0{
}\n\ped \init{12}{}\njo{-12}{{\keywordfont break};}\njo0{
}\n\ped \init{10}{}\njo{-10}{\brr{}}\njo0{ }\n\ped
\init{10}{}\njo{-10}{{\keywordfont if}}\njo{13}{(i}\njo0{==1}\njo{19}{}\njo0{\&\&}\njo{22}{dir{[}i]}\njo0{=={\sq}:{\sq})}\njo{35}{}\njo0{\brl{}}\jmpo{38}{}\njo0{/}\njo0{/}\njo{41}{leave}\njo{47}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{C:\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{ }\n\ped \init{12}{}\njo{-12}{dir{[}i}\njo0{+1]}\njo0{=0;}\njo0{
}\n\ped \init{12}{}\njo{-12}{{\keywordfont break};}\njo0{
}\n\ped \init{10}{}\njo{-10}{\brr{}}\njo0{ }\n\ped
\init{8}{}\njo{-8}{\brr{}}\njo0{ }\n\ped \init{8}{}\njo{-8}{{\keywordfont
if}}\njo{11}{(i}\njo0{==}\njo0{{\mm}1)}\njo{19}{dir}\njo0{=\qql}\stringfont\pes{\bs{1}}{0}\njo0{.\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{;}\jmpo{29}{}\njo0{/}\njo0{/}\njo{32}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{/\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{}\njo{36}{not}\njo{40}{found
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{6}{}\njo{-6}{dir}\njo0{=dir.c{\ul}str();}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}}\njo{9}{(dir{[}0]}\njo{17}{}\njo0{\&\&}\njo{20}{(dir.size()}\njo0{!=3}\njo{35}{}\njo0{$\mid$$\mid$}\njo{38}{dir{[}1]}\njo0{!={\sq}:{\sq}))}\njo{52}{dir}\njo0{+=\qql}\stringfont\pes{\bs{1}}{0}\njo0{/\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{;}\njo0{ }\n\ped
\init{6}{}\njo{-6}{{\keywordfont for}}\njo{10}{({\keywordfont
int}}\njo{15}{i}\njo0{=0;}\njo{20}{i$<$files;}\njo{29}{++i)}\njo{34}{}\njo0{\brl{}}\n\ped
\init{8}{}\njo{-8}{String}\njo{15}{out(dir.c{\ul}str());}\njo0{
}\n\ped \init{8}{}\njo{-8}{out}\njo0{+=fname{[}i];}\njo0{
}\n\ped \init{8}{}\njo{-8}{decompress(out.c{\ul}str(),}\njo{32}{fsize{[}i],}\njo{42}{en);}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{4}{}\njo{-4}{\brr{}}\njo0{ }\n\ped \init{4}{}\njo{-4}{fclose(archive);}\njo0{
}\n\ped \init{4}{}\njo{-4}{programChecker.print();}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{catch({\keywordfont const}}\njo{14}{{\keywordfont
char}}\njo0{$\ast$}\njo{20}{s)}\njo{23}{}\njo0{\brl{}
}\n\ped \init{4}{}\njo{-4}{{\keywordfont if}}\njo{7}{(s)}\njo{11}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\%s\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{,}\njo{26}{s);}\njo0{
}\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{ }\n\ped
\init{2}{}\njo{-2}{{\keywordfont if}}\njo{5}{(pause)}\njo{13}{}\njo0{\brl{}}\n\ped
\init{4}{}\njo{-4}{printf(\qql}\stringfont\pes{\bs{1}}{0}\njo0{\bs{1}n}\njo0{Close~}\njo0{this~}\njo0{window~}\njo0{or~}\njo0{press~}\njo0{ENTER~}\njo0{to~}\njo0{continue...\bs{1}n}\njo0{\basefont
\qqr}\basefont\ped\pstart\pstarta\njo0{);}\njo0{ }\n\ped
\init{4}{}\njo{-4}{getchar();}\njo0{ }\n\ped \init{2}{}\njo{-2}{\brr{}}\njo0{
}\n\ped \init{2}{}\njo{-2}{{\keywordfont return}}\njo{9}{0;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \par\end{flushleft}

\ifmfiles\def\END{\relax}\else\def\END{\end{document}}\fi \END 
