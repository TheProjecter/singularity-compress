%% LyX 1.4.3 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% LyX specific LaTeX commands.
%% Bold symbol macro for standard LaTeX users
\providecommand{\boldsymbol}[1]{\mbox{\boldmath $#1$}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% User specified LaTeX commands.
%% This file was generated by tiny_c2l (version 1.4.0, 25-feb-2000)

\ifx\getformat\undefined
 \newcount\getformat\getformat0
\else
 \mfilestrue\getformat3
\fi
\ifx\undefined\advance\getformat1\fi

\ifcase\getformat
 
 \usepackage{a4}
\usepackage{position}
\usepackage{fancyhdr}

 
 \textwidth18cm\textheight25cm\hoffset-3cm\voffset-1cm
\or
 \documentstyle[a4,position,fancyhdr]{article}
 \textwidth18cm\textheight25cm\hoffset-3cm\voffset-1cm
\else\fi % multiple file input: don't load format

\plcntmargin{777}
\lhead{\headfont }
\chead{\headfont Produced from unpacker/simple{\ul}d.c on 16{\mm}Jan{\mm}2007 23:26}
\rhead{\headfont }
\lfoot{\footfont }
\cfoot{\footfont Page \thepage}
\rfoot{\footfont }
\plinenowidth0pt
\gdef\cmt#1#2{\psinit{#1}{\hphantom{/}$\ast$\mblank{#2}}\commentfont}
\gdef\cmtpp#1#2{\psinit{#1}{//\mblank{#2}}\commentfont}
\gdef\ccmtend{\setbox\pstartbox=\hbox{\hphantom{/}}}
\ifmfiles\else

\usepackage{babel}
\makeatother
\begin{document}
\fi

\begin{flushleft}\init0{}\njo0{}\cmtinit\njo0{/$\ast$ }\n
\initc{0}{5}{1}{}\cmt{0}{1}\njo0{Singularity{\mm}compress:}\njo{25}{arithmetic}\njo{36}{decoder,}\njo{45}{and}\njo{49}{lz77}\njo{54}{decoder
}\n \initc{0}{5}{0}{}\njo0{ }\n \initc{0}{5}{1}{}\njo0{Based}\njo{9}{on}\njo{12}{Michael}\njo{20}{Schindler{'}s}\njo{32}{rangecoder,}\njo{44}{which}\njo{50}{is:
}\n \initc{0}{5}{1}{}\njo0{(c)}\njo{7}{Michael}\njo{15}{Schindler}\njo{25}{1999
}\n \initc{0}{5}{1}{}\njo0{http://www.compressconsult.com/
}\n \initc{0}{5}{0}{}\njo0{ }\n \initc{0}{5}{1}{}\njo0{This}\njo{8}{program}\njo{16}{is}\njo{19}{free}\njo{24}{software;}\njo{34}{you}\njo{38}{can}\njo{42}{redistribute}\njo{55}{it}\njo{58}{and/or
}\n \initc{0}{5}{1}{}\njo0{modify}\njo{10}{it}\njo{13}{under}\njo{19}{the}\njo{23}{terms}\njo{29}{of}\njo{32}{the}\njo{36}{GNU}\njo{40}{General}\njo{48}{Public}\njo{55}{License
}\n \initc{0}{5}{1}{}\njo0{as}\njo{6}{published}\njo{16}{by}\njo{19}{the}\njo{23}{Free}\njo{28}{Software}\njo{37}{Foundation;}\njo{49}{version}\njo{57}{2
}\n \initc{0}{5}{1}{}\njo0{of}\njo{6}{the}\njo{10}{License.
}\n \initc{0}{0}{0}{}\njo0{ }\n \initc{0}{5}{1}{}\njo0{This}\njo{8}{program}\njo{16}{is}\njo{19}{distributed}\njo{31}{in}\njo{34}{the}\njo{38}{hope}\njo{43}{that}\njo{48}{it}\njo{51}{will}\njo{56}{be}\njo{59}{useful,
}\n \initc{0}{5}{1}{}\njo0{but}\njo{7}{WITHOUT}\njo{15}{ANY}\njo{19}{WARRANTY;}\njo{29}{without}\njo{37}{even}\njo{42}{the}\njo{46}{implied}\njo{54}{warranty}\njo{63}{of
}\n \initc{0}{5}{1}{}\njo0{MERCHANTABILITY}\njo{19}{or}\njo{22}{FITNESS}\njo{30}{FOR}\njo{34}{A}\njo{36}{PARTICULAR}\njo{47}{PURPOSE.}\jmpo{57}{See}\njo{61}{the
}\n \initc{0}{5}{1}{}\njo0{GNU}\njo{7}{General}\njo{15}{Public}\njo{22}{License}\njo{30}{for}\njo{34}{more}\njo{39}{details.
}\n \initc{0}{0}{0}{}\njo0{ }\n \initc{0}{5}{1}{}\njo0{You}\njo{7}{should}\njo{14}{have}\njo{19}{received}\njo{28}{a}\njo{30}{copy}\njo{35}{of}\njo{38}{the}\njo{42}{GNU}\njo{46}{General}\njo{54}{Public}\njo{61}{License
}\n \initc{0}{5}{1}{}\njo0{along}\njo{9}{with}\njo{14}{this}\njo{19}{program;}\njo{28}{if}\njo{31}{not,}\njo{36}{write}\njo{42}{to}\njo{45}{the}\njo{49}{Free}\njo{54}{Software
}\n \initc{0}{5}{1}{}\njo0{Foundation,}\njo{15}{Inc.,}\njo{21}{51}\njo{24}{Franklin}\njo{33}{Street,}\njo{41}{Fifth}\njo{47}{Floor,}\njo{54}{Boston,}\njo{62}{MA}\jmpo{66}{02110{\mm}1301,}\njo{78}{USA.
}\n \initc{0}{5}{0}{}\ccmtend\basefont\njo0{/}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont include}}\njo{9}{$<$stdio.h$>$
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{$<$stdlib.h$>$ }\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont include}}\njo{9}{$<$stdint.h$>$
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{$<$string.h$>$ }\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont
include}}\njo{9}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{../common/code{\ul}tables.h\basefont
\qqr}\basefont\pes{ \bs{1}}{3}\njo0{}\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont include}}\njo{9}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{range{\ul}decod.h\basefont
\qqr}\basefont\pes{ \bs{1}}{3}\njo0{}\n\ped \init0{}\njo0{{\keywordfont
\#}}\pes{ \bs{1}}{3}\njo0{{\keywordfont include}}\njo{9}{\qql}\stringfont\pes{\bs{1}}{0}\njo0{../common/model.h\basefont
\qqr}\basefont\pes{ \bs{1}}{3}\njo0{}\n\ped \init0{}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont struct}}\njo{7}{buffer}\njo{14}{}\njo0{\brl{}}\n\ped
\init{3}{}\njo{-3}{unsigned}\njo{12}{{\keywordfont
char}}\njo0{$\ast$}\njo{18}{data;}\njo0{ }\n\ped \init{3}{}\njo{-3}{size{\ul}t}\jmpo{18}{len;}\njo0{
}\n\ped \init{3}{}\njo{-3}{ssize{\ul}t}\jmpo{18}{len{\ul}mask;}\njo0{
}\n\ped \init{3}{}\njo{-3}{size{\ul}t}\jmpo{18}{len{\ul}power;}\njo0{
}\n\ped \init{3}{}\njo{-3}{size{\ul}t}\jmpo{18}{offset;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{;}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont \#}}\pes{
\bs{1}}{3}\njo0{{\keywordfont define}}\njo{8}{MIN(a,}\njo0{b)}\njo{17}{((a)$<$(b)}\njo{26}{?}\njo{28}{(a)}\njo{32}{:}\njo{34}{(b))
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
static}}\njo{7}{ssize{\ul}t}\njo{15}{copy{\ul}back{\ul}bytes({\keywordfont
struct}}\njo{38}{buffer}\njo0{$\ast$}\njo{46}{buff,}\njo0{ssize{\ul}t}\njo{59}{dest,}\njo0{ssize{\ul}t}\njo{72}{backbytes,}\njo0{size{\ul}t}\njo{89}{backsize)
}\n\ped \init0{}\njo0{}\njo0{\brl{} }\n\ped \init{3}{}\njo{-3}{size{\ul}t}\njo{10}{from}\njo{15}{}\njo0{=}\njo{17}{(dest}\njo{23}{}\njo0{{\mm}}\njo{25}{backbytes)}\njo{36}{\&}\njo{38}{buff}\njo0{{\mm}$>$len{\ul}mask;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{3}{}\njo{-3}{size{\ul}t}\njo{10}{dest{\ul}maxcopy}\njo{23}{}\njo0{=}\njo{25}{MIN(buff}\njo0{{\mm}$>$len}\njo{39}{}\njo0{{\mm}}\njo{41}{dest,}\njo{47}{backsize);}\njo0{
}\n\ped \init{3}{}\njo{-3}{size{\ul}t}\njo{10}{src{\ul}maxcopy}\njo{22}{}\njo0{=}\jmpo{25}{MIN(buff}\njo0{{\mm}$>$len}\njo{39}{}\njo0{{\mm}}\njo{41}{from,}\njo{47}{backsize);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{3}{}\njo{-3}{{\keywordfont
if}(src{\ul}maxcopy}\njo{18}{$<$}\njo{20}{dest{\ul}maxcopy)}\njo{34}{}\njo0{\brl{}
}\n\ped \init{6}{}\njo{-6}{memcpy(\&buff}\njo0{{\mm}$>$data{[}dest],}\njo{32}{\&buff}\njo0{{\mm}$>$data{[}from],}\njo{51}{src{\ul}maxcopy);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{dest}\njo{11}{}\njo0{+=}\njo{14}{src{\ul}maxcopy;}\njo0{
}\n\ped \init{6}{}\njo{-6}{backsize}\njo{15}{}\njo0{{\mm}=}\njo{18}{src{\ul}maxcopy;}\njo0{
}\n\ped \init{6}{}\njo{-6}{from}\jmpo{12}{}\njo0{=}\njo{14}{(from}\njo{20}{}\njo0{+}\njo{22}{src{\ul}maxcopy)\&buff}\njo0{{\mm}$>$len{\ul}mask;}\njo{51}{
}\n\ped \init{6}{}\njo{-6}{dest{\ul}maxcopy}\njo{19}{}\njo0{{\mm}=}\njo{22}{src{\ul}maxcopy;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{{\keywordfont
if}(dest{\ul}maxcopy)}\njo{23}{}\njo0{\brl{}}\n\ped
\init{9}{}\njo{-9}{memcpy(\&buff}\njo0{{\mm}$>$data{[}dest],}\njo{35}{\&buff}\njo0{{\mm}$>$data{[}from],}\njo{54}{dest{\ul}maxcopy);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{9}{}\njo{-9}{from}\njo{14}{}\njo0{+=}\njo{17}{dest{\ul}maxcopy;}\njo0{
}\n\ped \init{9}{}\njo{-9}{backsize}\njo{18}{}\njo0{{\mm}=}\njo{21}{dest{\ul}maxcopy;}\njo0{
}\n\ped \init{9}{}\njo{-9}{dest}\jmpo{15}{}\njo0{=}\njo{17}{(dest}\njo{23}{}\njo0{+}\njo{25}{dest{\ul}maxcopy)\&buff}\njo0{{\mm}$>$len{\ul}mask;}\njo0{
}\n\ped \init{14}{}\njo{-14}{{\keywordfont if}(!dest)
}\n\ped \init{12}{}\njo{-12}{fwrite(buff}\njo0{{\mm}$>$data,}\njo0{1,}\njo0{buff}\njo0{{\mm}$>$len,}\njo0{stdout);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{9}{}\njo{-9}{memcpy(\&buff}\njo0{{\mm}$>$data{[}dest],}\njo{35}{\&buff}\njo0{{\mm}$>$data{[}from],}\njo{54}{backsize);}\njo0{
}\n\ped \init{9}{}\njo{-9}{dest}\njo{14}{}\njo0{+=}\njo{17}{backsize;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{3}{}\njo{-3}{\brr{}}\njo0{ }\n\ped \init{3}{}\njo{-3}{{\keywordfont
else}}\njo{8}{}\njo0{\brl{}}\n\ped \init{6}{}\njo{-6}{memcpy(\&buff}\njo0{{\mm}$>$data{[}dest],}\njo{32}{\&buff}\njo0{{\mm}$>$data{[}from],}\njo{51}{dest{\ul}maxcopy);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{from}\njo{11}{}\njo0{+=}\njo{14}{dest{\ul}maxcopy;}\njo0{
}\n\ped \init{6}{}\njo{-6}{backsize}\njo{15}{}\njo0{{\mm}=}\njo{18}{dest{\ul}maxcopy;}\njo0{
}\n\ped \init{6}{}\njo{-6}{dest}\njo{11}{}\njo0{=}\njo{13}{(dest}\njo{19}{}\njo0{+}\njo{21}{dest{\ul}maxcopy)\&buff}\njo0{{\mm}$>$len{\ul}mask;}\njo0{
}\n\ped \init{6}{}\njo{-6}{src{\ul}maxcopy}\njo{18}{}\njo0{{\mm}=}\njo{21}{dest{\ul}maxcopy;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{{\keywordfont
if}(!dest) }\n\ped \init{9}{}\njo{-9}{fwrite(buff}\njo0{{\mm}$>$data,}\njo0{1,}\njo0{buff}\njo0{{\mm}$>$len,}\njo0{stdout);}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}(src{\ul}maxcopy)}\njo{22}{}\njo0{\brl{}}\n\ped
\init{9}{}\njo{-9}{memcpy(\&buff}\njo0{{\mm}$>$data{[}dest],}\njo{35}{\&buff}\njo0{{\mm}$>$data{[}from],}\njo{54}{src{\ul}maxcopy);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{9}{}\njo{-9}{dest}\njo{14}{}\njo0{+=}\njo{17}{src{\ul}maxcopy;}\njo0{
}\n\ped \init{9}{}\njo{-9}{backsize}\njo{18}{}\njo0{{\mm}=}\njo{21}{src{\ul}maxcopy;}\njo0{
}\n\ped \init{9}{}\njo{-9}{from}\njo{14}{}\njo0{=}\njo{16}{(from}\njo{22}{}\njo0{+}\njo{24}{src{\ul}maxcopy)}\njo{37}{\&buff}\njo0{{\mm}$>$len{\ul}mask;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{9}{}\njo{-9}{memcpy(\&buff}\njo0{{\mm}$>$data{[}dest],}\njo0{\&buff}\njo0{{\mm}$>$data{[}from],}\njo{53}{backsize);}\njo0{
}\n\ped \init{9}{}\njo{-9}{dest}\njo{14}{}\njo0{+=}\njo{17}{backsize;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{3}{}\njo{-3}{\brr{}}\njo0{ }\n\ped \init{3}{}\njo{-3}{{\keywordfont
return}}\njo{10}{dest;}\njo0{ }\n\ped \init0{}\njo0{\brr{}}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init0{}\njo0{ }\n\ped \init0{}\njo0{{\keywordfont
int}}\njo{4}{unpack(FILE}\njo0{$\ast$}\njo{17}{out,}\njo0{FILE}\njo0{$\ast$}\njo{27}{in)}\njo{31}{
}\n\ped \init0{}\njo0{}\njo0{\brl{} }\n\ped \init{3}{}\njo{-3}{freq}\njo{8}{cf;}\njo0{
}\n\ped \init{3}{}\njo{-3}{rangecoder}\njo{14}{rc;}\njo0{
}\n\ped \init{3}{}\njo{-3}{{\keywordfont struct}}\njo{10}{buffer}\njo{17}{buffer;}\njo0{
}\n\ped \init{3}{}\njo{-3}{{\keywordfont struct}}\njo{10}{ari{\ul}model}\njo{20}{model;}\njo0{
}\n\ped \init{3}{}\njo{-3}{size{\ul}t}\njo{10}{processed}\njo0{=0;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{3}{}\njo{-3}{buffer.offset}\njo{17}{}\njo0{=}\njo{19}{0;}\njo0{
}\n\ped \init{3}{}\njo{-3}{buffer.len{\ul}power}\njo{20}{}\njo0{=}\njo{22}{1}\njo0{+BLOCKSIZE{\ul}POWER;}\njo0{
}\n\ped \init{3}{}\njo{-3}{buffer.len}\njo{14}{}\njo0{=}\njo{16}{1\mlt{2}buffer.len{\ul}power;}\njo0{
}\n\ped \init{3}{}\njo{-3}{buffer.len{\ul}mask}\njo{19}{}\njo0{=}\njo{21}{buffer.len}\njo{32}{}\njo0{{\mm}}\njo{34}{1;}\njo0{
}\n\ped \init{3}{}\njo{-3}{buffer.data}\njo{15}{}\njo0{=}\njo{17}{malloc(buffer.len);}\njo0{
}\n\ped \init{3}{}\njo{-3}{rc.in}\njo{9}{}\njo0{=}\njo{11}{in;}\njo0{
}\n\ped \init{3}{}\njo{-3}{model{\ul}setup(\&model);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{3}{}\njo{-3}{{\keywordfont
if}(!buffer.data) }\n\ped \init{6}{}\njo{-6}{{\keywordfont
return}}\njo{13}{}\njo0{{\mm}2;}\njo0{ }\n\ped \init0{}\njo0{
}\n\ped \init{3}{}\njo{-3}{{\keywordfont if}}\njo{6}{(start{\ul}decoding(\&rc)}\njo{27}{}\njo0{!=}\njo{30}{0)}\njo{33}{}\njo0{\brl{}}\jmpo{37}{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont return}}\njo{13}{}\njo0{{\mm}1;}\njo0{
}\n\ped \init{3}{}\njo{-3}{\brr{}}\njo0{ }\n\ped
\init0{}\njo0{ }\n\ped \init{3}{}\njo{-3}{{\keywordfont
while}}\njo{9}{(}\njo{11}{(cf}\njo{15}{}\njo0{=}\njo{17}{decode{\ul}culfreq(\&rc,}\njo0{2))}\njo{40}{)}\njo{42}{}\njo0{\brl{}}\jmpo{46}{
}\n\ped \init{6}{}\njo{-6}{freq}\njo{11}{i,}\njo{14}{blocksize;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{decode{\ul}update(\&rc,}\njo0{1,}\njo0{1,}\njo0{2);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{blocksize}\njo{16}{}\njo0{=}\njo{18}{decode{\ul}short(\&rc)}\njo{36}{$\mid$}\njo{38}{((size{\ul}t)decode{\ul}short(\&rc))}\njo{66}{\mlt{2}16;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{6}{}\njo{-6}{{\keywordfont
for}}\njo{10}{(i}\njo0{=0;}\njo{16}{i$<$blocksize;}\njo{29}{i++)}\njo{34}{}\njo0{\brl{}}\jmpo{38}{
}\n\ped \init{9}{}\njo{-9}{freq}\njo{14}{symbol;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{9}{}\njo{-9}{cf}\njo{12}{}\njo0{=}\njo{14}{decode{\ul}culfreq(\&rc,}\njo0{model.counts{[}SYMBOLS]);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{9}{}\njo{-9}{symbol}\njo{16}{}\njo0{=}\jmpo{19}{model{\ul}get{\ul}symbol(\&model,}\njo{44}{cf);}\njo0{
}\n\ped \init{9}{}\njo{-9}{decode{\ul}update(\&rc,}\njo{28}{model.counts{[}symbol}\njo0{+1]}\njo0{{\mm}model.counts{[}symbol],}\njo0{model.counts{[}symbol],}\njo0{model.counts{[}SYMBOLS]);}\njo0{
}\n\ped \init{9}{}\njo{-9}{model{\ul}update{\ul}freq(\&model,}\njo0{symbol);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{9}{}\njo{-9}{}\cmtinit\njo0{/$\ast$fprintf(stderr,\texttt{\char`\"{}}Decoding:\%d(\%c),\%ld,\%ld\bs{1}n\texttt{\char`\"{}},symbol,symbol,counts{[}symbol+1]{\mm}counts{[}symbol],counts{[}symbol]);}\ccmtend\basefont\njo0{\mast{1}/}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{9}{}\njo{-9}{{\keywordfont
if}(symbol}\njo{19}{$>$}\njo{21}{0xff)}\njo{27}{}\njo0{\brl{}
}\n\ped \init{12}{}\njo{-12}{{\keywordfont const}}\njo{18}{uint8{\ul}t}\njo{26}{extra{\ul}bits}\njo{37}{}\njo0{=}\njo{39}{code{\ul}to{\ul}length{[}symbol}\njo0{{\mm}0x100].extra{\ul}bits;}\njo0{
}\n\ped \init{12}{}\njo{-12}{{\keywordfont const}}\njo{18}{size{\ul}t}\jmpo{26}{extra{\ul}data}\njo{37}{}\njo0{=}\njo{39}{decode{\ul}culshift(\&rc,}\njo{60}{extra{\ul}bits);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{12}{}\njo{-12}{{\keywordfont
const}}\njo{18}{size{\ul}t}\jmpo{26}{length}\njo{33}{}\njo0{=}\njo{35}{code{\ul}to{\ul}length{[}symbol}\njo0{{\mm}0x100].start}\njo{70}{}\njo0{+}\njo{72}{extra{\ul}data;}\njo0{
}\n\ped \init{12}{}\njo{-12}{size{\ul}t}\njo{19}{distance;}\njo0{
}\n\ped \init{12}{}\njo{-12}{size{\ul}t}\njo{19}{distance{\ul}hi;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{12}{}\njo{-12}{decode{\ul}update{\ul}shift(\&rc,}\njo{37}{1,}\njo{40}{extra{\ul}data,}\njo{52}{extra{\ul}bits);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{12}{}\njo{-12}{distance}\njo{21}{}\njo0{=}\njo{23}{decode{\ul}culshift(\&rc,}\njo0{8);}\njo0{
}\n\ped \init{12}{}\njo{-12}{decode{\ul}update{\ul}shift(\&rc,}\njo{37}{1,}\njo{40}{distance,}\njo{50}{8);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{12}{}\njo{-12}{distance{\ul}hi}\njo{24}{}\njo0{=}\njo{26}{decode{\ul}culshift(\&rc,}\njo0{8);}\njo0{
}\n\ped \init{12}{}\njo{-12}{decode{\ul}update{\ul}shift(\&rc,}\njo{37}{1,}\njo{40}{distance{\ul}hi,}\njo{53}{8);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{12}{}\njo{-12}{distance}\njo{21}{}\njo0{$\mid$=}\njo{24}{distance{\ul}hi\mlt{2}8;}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{12}{}\njo{-12}{}\cmtinit\njo0{/$\ast$\commentfont~fprintf(stderr,\texttt{\char`\"{}}Retrieved}\cmt{12}{1}\njo{41}{length,distance:\%ld,\%ld\bs{1}n\texttt{\char`\"{}},length,distance);}\ccmtend\basefont\njo0{\mast{1}/}\njo0{
}\n\ped \init{12}{}\njo{-12}{buffer.offset}\njo{26}{}\njo0{=}\njo{28}{copy{\ul}back{\ul}bytes(\&buffer,}\njo0{buffer.offset,}\njo0{distance,}\njo0{length);}\njo0{
}\n\ped \init{9}{}\njo{-9}{\brr{}}\njo0{ }\n\ped
\init{9}{}\njo{-9}{{\keywordfont else}}\njo{14}{}\njo0{\brl{}}\n\ped
\init{12}{}\njo{-12}{buffer.data{[}buffer.offset++]}\njo{41}{}\njo0{=}\njo{43}{symbol;}\njo0{
}\n\ped \init{12}{}\njo{-12}{{\keywordfont if}(buffer.offset}\njo{29}{}\njo0{$>$=}\njo{32}{buffer.len)}\njo{44}{}\njo0{\brl{}
}\n\ped \init{15}{}\njo{-15}{buffer.offset}\njo{29}{}\njo0{=}\njo{31}{0;}\njo0{
}\n\ped \init{15}{}\njo{-15}{fwrite(buffer.data,}\njo0{1,}\njo0{buffer.len,}\njo0{out);}\njo0{
}\n\ped \init{12}{}\njo{-12}{\brr{}}\njo0{ }\n\ped
\init{9}{}\njo{-9}{\brr{}}\njo0{ }\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{
}\n\ped \init{6}{}\njo{-6}{processed}\njo{16}{}\njo0{+=}\njo{19}{blocksize;}\njo0{
}\n\ped \init{6}{}\njo{-6}{{\keywordfont if}(processed}\njo{19}{$>$}\njo{21}{1\mlt{2}19)}\njo{28}{}\njo0{\brl{}
}\n\ped \init{9}{}\njo{-9}{done{\ul}decoding(\&rc);}\njo0{
}\n\ped \init{9}{}\njo{-9}{start{\ul}decoding(\&rc);}\njo0{
}\n\ped \init{9}{}\njo{-9}{processed}\njo0{=0;}\njo0{
}\n\ped \init{6}{}\njo{-6}{\brr{}}\njo0{ }\n\ped
\init{6}{}\njo{-6}{}\cmtinit\njo0{/$\ast$fprintf(stderr,\texttt{\char`\"{}}\%ld;;\%d\bs{1}n\texttt{\char`\"{}},blocksize,model.counts{[}SYMBOLS]);}\ccmtend\basefont\njo0{\mast{1}/}\njo0{
}\n\ped \init{9}{}\njo{-9}{\brr{}}\njo0{ }\n\ped
\init{3}{}\njo{-3}{fwrite(buffer.data,}\njo0{1,}\njo0{buffer.offset,}\njo0{out);}\njo0{
}\n\ped \init{3}{}\njo{-3}{done{\ul}decoding(\&rc);}\njo0{
}\n\ped \init{3}{}\njo{-3}{model{\ul}done(\&model);}\njo0{
}\n\ped \init{3}{}\njo{-3}{free(buffer.data);}\njo0{
}\n\ped \init0{}\njo0{ }\n\ped \init{3}{}\njo{-3}{fclose(out);}\njo0{
}\n\ped \init{3}{}\njo{-3}{{\keywordfont return}}\njo{10}{0;}\njo0{
}\n\ped \init0{}\njo0{\brr{}}\njo0{ }\n\ped \par\end{flushleft}

\ifmfiles\def\END{\relax}\else\def\END{\end{document}}\fi \END 
